"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{459:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(7437),a=n(29),r=n.n(a),s=n(2265),o=n(8029),l=n(1028);function c(e){let{isOpen:t,onClose:n,onTransferComplete:a,incidentId:c,patientLetter:d,isLoading:f=!1}=e,[u,m]=(0,s.useState)([]),[p,b]=(0,s.useState)(null),[x,g]=(0,s.useState)(!1),[h,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t&&(j(),b(null),g(!1))},[t]);let j=async()=>{y(!0);try{let e=(0,o.ts)(),t=(await l.cO()).filter(t=>t.discord_id!==(null==e?void 0:e.discordId)).map(e=>({discordId:e.discord_id,discordUsername:e.discord_username,callsign:e.callsign,vehicle:e.vehicle,loginTime:e.last_login}));t.length>0?m(t):m((0,o.Cn)())}catch(e){console.error("Failed to load users from API:",e),m((0,o.Cn)())}finally{y(!1)}};if(!t)return null;let v=e=>{b(e)},w=d?"Patient ".concat(d," of ").concat(c):"all patients of ".concat(c);return(0,i.jsxs)("div",{onClick:n,className:"jsx-58b95ddaf6432387 modal-overlay",children:[(0,i.jsx)(r(),{id:"58b95ddaf6432387",children:".transfer-modal.jsx-58b95ddaf6432387{background:#fff;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;max-width:500px;width:90%;-webkit-box-shadow:0 10px 40px rgba(0,0,0,.3);-moz-box-shadow:0 10px 40px rgba(0,0,0,.3);box-shadow:0 10px 40px rgba(0,0,0,.3);overflow:hidden}.transfer-header.jsx-58b95ddaf6432387{background:#06c;color:white;padding:20px 25px;font-size:18px;font-weight:600}.transfer-body.jsx-58b95ddaf6432387{padding:25px}.transfer-info.jsx-58b95ddaf6432387{background:#f0f4f8;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:15px;margin-bottom:20px;font-size:14px;color:#444}.transfer-warning.jsx-58b95ddaf6432387{background:#fff3cd;border:1px solid#ffc107;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:15px;margin-bottom:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:10px}.warning-icon.jsx-58b95ddaf6432387{font-size:20px}.warning-text.jsx-58b95ddaf6432387{font-size:13px;color:#856404}.users-list.jsx-58b95ddaf6432387{max-height:250px;overflow-y:auto;border:1px solid#e0e0e0;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.user-item.jsx-58b95ddaf6432387{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:15px;border-bottom:1px solid#e0e0e0;cursor:pointer;-webkit-transition:background.2s;-moz-transition:background.2s;-o-transition:background.2s;transition:background.2s}.user-item.jsx-58b95ddaf6432387:last-child{border-bottom:none}.user-item.jsx-58b95ddaf6432387:hover{background:#f5f5f5}.user-item.selected.jsx-58b95ddaf6432387{background:#e3f2fd;border-left:3px solid#06c}.user-radio.jsx-58b95ddaf6432387{width:20px;height:20px;margin-right:15px}.user-info.jsx-58b95ddaf6432387{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.user-callsign.jsx-58b95ddaf6432387{font-weight:600;font-size:15px;color:#1a3a5c}.user-vehicle.jsx-58b95ddaf6432387{font-size:13px;color:#666;margin-top:2px}.user-login-time.jsx-58b95ddaf6432387{font-size:12px;color:#999;margin-top:2px}.no-users.jsx-58b95ddaf6432387{padding:40px 20px;text-align:center;color:#666}.no-users-icon.jsx-58b95ddaf6432387{font-size:40px;margin-bottom:10px}.transfer-footer.jsx-58b95ddaf6432387{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;gap:12px;padding:20px 25px;border-top:1px solid#e0e0e0;background:#f8f9fa}.transfer-btn.jsx-58b95ddaf6432387{padding:10px 24px;font-size:14px;font-weight:600;border:none;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.transfer-btn.jsx-58b95ddaf6432387:disabled{opacity:.5;cursor:not-allowed}.transfer-btn-cancel.jsx-58b95ddaf6432387{background:#e0e0e0;color:#333}.transfer-btn-cancel.jsx-58b95ddaf6432387:hover:not(:disabled){background:#d0d0d0}.transfer-btn-confirm.jsx-58b95ddaf6432387{background:#dc3545;color:white}.transfer-btn-confirm.jsx-58b95ddaf6432387:hover:not(:disabled){background:#c82333}.confirmation-overlay.jsx-58b95ddaf6432387{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,.95);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:30px;text-align:center}.confirmation-icon.jsx-58b95ddaf6432387{font-size:50px;margin-bottom:20px}.confirmation-title.jsx-58b95ddaf6432387{font-size:20px;font-weight:600;color:#dc3545;margin-bottom:15px}.confirmation-message.jsx-58b95ddaf6432387{font-size:14px;color:#555;line-height:1.6;margin-bottom:25px;max-width:350px}.confirmation-buttons.jsx-58b95ddaf6432387{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:15px}"}),(0,i.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-58b95ddaf6432387 transfer-modal",children:[(0,i.jsx)("div",{className:"jsx-58b95ddaf6432387 transfer-header",children:"Transfer ePRF"}),(0,i.jsxs)("div",{style:{position:"relative"},className:"jsx-58b95ddaf6432387 transfer-body",children:[(0,i.jsxs)("div",{className:"jsx-58b95ddaf6432387 transfer-info",children:[(0,i.jsx)("strong",{className:"jsx-58b95ddaf6432387",children:"Transferring:"})," ",w]}),(0,i.jsxs)("div",{className:"jsx-58b95ddaf6432387 transfer-warning",children:[(0,i.jsx)("span",{className:"jsx-58b95ddaf6432387 warning-icon",children:"⚠️"}),(0,i.jsxs)("span",{className:"jsx-58b95ddaf6432387 warning-text",children:["This action is ",(0,i.jsx)("strong",{className:"jsx-58b95ddaf6432387",children:"irreversible"}),". The ePRF will be transferred to another user and they will become the author. You will no longer be able to edit this record."]})]}),h?(0,i.jsxs)("div",{className:"jsx-58b95ddaf6432387 no-users",children:[(0,i.jsx)("div",{className:"jsx-58b95ddaf6432387 no-users-icon",children:"⏳"}),(0,i.jsx)("p",{className:"jsx-58b95ddaf6432387",children:"Loading users..."})]}):u.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{style:{marginBottom:"12px",fontSize:"14px",color:"#555"},className:"jsx-58b95ddaf6432387",children:"Select a user to transfer to:"}),(0,i.jsx)("div",{className:"jsx-58b95ddaf6432387 users-list",children:u.map(e=>(0,i.jsxs)("div",{onClick:()=>v(e),className:"jsx-58b95ddaf6432387 "+"user-item ".concat((null==p?void 0:p.discordId)===e.discordId?"selected":""),children:[(0,i.jsx)("input",{type:"radio",checked:(null==p?void 0:p.discordId)===e.discordId,onChange:()=>v(e),className:"jsx-58b95ddaf6432387 user-radio"}),(0,i.jsxs)("div",{className:"jsx-58b95ddaf6432387 user-info",children:[(0,i.jsx)("div",{className:"jsx-58b95ddaf6432387 user-callsign",children:e.callsign}),(0,i.jsx)("div",{className:"jsx-58b95ddaf6432387 user-vehicle",children:e.vehicle}),(0,i.jsxs)("div",{className:"jsx-58b95ddaf6432387 user-login-time",children:["Logged in: ",new Date(e.loginTime).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]},e.discordId))})]}):!h&&(0,i.jsxs)("div",{className:"jsx-58b95ddaf6432387 no-users",children:[(0,i.jsx)("div",{className:"jsx-58b95ddaf6432387 no-users-icon",children:"\uD83D\uDC64"}),(0,i.jsx)("p",{className:"jsx-58b95ddaf6432387",children:"No other users are currently logged in."}),(0,i.jsx)("p",{style:{fontSize:"13px",marginTop:"5px"},className:"jsx-58b95ddaf6432387",children:"Ask another crew member to log in first."})]}),x&&p&&(0,i.jsxs)("div",{className:"jsx-58b95ddaf6432387 confirmation-overlay",children:[(0,i.jsx)("div",{className:"jsx-58b95ddaf6432387 confirmation-icon",children:"\uD83D\uDD04"}),(0,i.jsx)("div",{className:"jsx-58b95ddaf6432387 confirmation-title",children:"Confirm Transfer"}),(0,i.jsxs)("div",{className:"jsx-58b95ddaf6432387 confirmation-message",children:["You are about to transfer ",(0,i.jsx)("strong",{className:"jsx-58b95ddaf6432387",children:w})," to ",(0,i.jsx)("strong",{className:"jsx-58b95ddaf6432387",children:p.callsign}),".",(0,i.jsx)("br",{className:"jsx-58b95ddaf6432387"}),(0,i.jsx)("br",{className:"jsx-58b95ddaf6432387"}),"This cannot be undone. Are you sure?"]}),(0,i.jsxs)("div",{className:"jsx-58b95ddaf6432387 confirmation-buttons",children:[(0,i.jsx)("button",{onClick:()=>g(!1),disabled:f,className:"jsx-58b95ddaf6432387 transfer-btn transfer-btn-cancel",children:"Go Back"}),(0,i.jsx)("button",{onClick:()=>{p&&a(p)},disabled:f,className:"jsx-58b95ddaf6432387 transfer-btn transfer-btn-confirm",children:f?"Transferring...":"Yes, Transfer"})]})]})]}),!x&&(0,i.jsxs)("div",{className:"jsx-58b95ddaf6432387 transfer-footer",children:[(0,i.jsx)("button",{onClick:n,disabled:f,className:"jsx-58b95ddaf6432387 transfer-btn transfer-btn-cancel",children:"Cancel"}),(0,i.jsx)("button",{onClick:()=>{p&&g(!0)},disabled:!p||f,className:"jsx-58b95ddaf6432387 transfer-btn transfer-btn-confirm",children:"Transfer ePRF"})]})]})]})}},190:function(e,t,n){n.r(t),n.d(t,{areAllPatientsComplete:function(){return _},createEPRFRecord:function(){return u},createEPRFRecordAsync:function(){return f},deleteEPRFRecord:function(){return h},deleteEPRFRecordAsync:function(){return x},getAllEPRFRecords:function(){return l},getBlockedSubmissions:function(){return C},getCompleteEPRFs:function(){return N},getEPRFHistory:function(){return o},getEPRFHistoryAsync:function(){return s},getEPRFRecord:function(){return F},getIncompleteEPRFs:function(){return A},groupEPRFsByIncident:function(){return S},markEPRFComplete:function(){return b},markEPRFCompleteAsync:function(){return m},saveEPRFRecord:function(){return d},saveEPRFRecordLocal:function(){return c},searchEPRFs:function(){return P},searchEPRFsAsync:function(){return k},transferAllPatients:function(){return I},transferAllPatientsAsync:function(){return w},transferEPRF:function(){return v},transferEPRFAsync:function(){return y}});var i=n(1028);let a="eprf_history";function r(e){return{id:"".concat(e.incident_id,"-").concat(e.patient_letter),incidentId:e.incident_id,patientLetter:e.patient_letter,status:e.status,author:e.author_discord_id,authorCallsign:e.author_callsign,createdAt:e.created_at,updatedAt:e.updated_at,submittedAt:e.submitted_at,fleetId:e.fleet_id}}async function s(e){try{let t=(await i.Jf(e)).map(r),n=l().filter(t=>t.author!==e);return localStorage.setItem(a,JSON.stringify([...n,...t])),localStorage.setItem("eprf_cache_timestamp",Date.now().toString()),t}catch(t){return console.error("Failed to fetch from API, using cache:",t),o(e)}}function o(e){try{let t=localStorage.getItem(a);if(!t)return[];return JSON.parse(t).filter(t=>t.author===e)}catch(e){return[]}}function l(){try{let e=localStorage.getItem(a);return e?JSON.parse(e):[]}catch(e){return[]}}function c(e){let t=l(),n=t.findIndex(t=>t.incidentId===e.incidentId&&t.patientLetter===e.patientLetter);n>=0?t[n]={...t[n],...e,updatedAt:new Date().toISOString()}:t.push(e),localStorage.setItem(a,JSON.stringify(t))}async function d(e){c(e);try{await i.ie(e.incidentId,e.patientLetter,e.author,e.authorCallsign,e.fleetId)}catch(e){console.error("Failed to sync to API:",e)}}async function f(e,t,n,a,r){let s=new Date().toISOString(),o={id:"".concat(e,"-").concat(t),incidentId:e,patientLetter:t,status:"incomplete",author:n,authorCallsign:a,createdAt:s,updatedAt:s,fleetId:r};c(o);try{await i.ie(e,t,n,a,r)}catch(e){console.error("Failed to save to API:",e)}return o}function u(e,t,n,a,r){let s=new Date().toISOString(),o={id:"".concat(e,"-").concat(t),incidentId:e,patientLetter:t,status:"incomplete",author:n,authorCallsign:a,createdAt:s,updatedAt:s,fleetId:r};return c(o),i.ie(e,t,n,a,r).catch(e=>console.error("Failed to sync to API:",e)),o}async function m(e,t){p(e,t);try{await i.$h(e,t)}catch(e){console.error("Failed to mark complete via API:",e)}}function p(e,t){let n=l(),i=n.find(n=>n.incidentId===e&&n.patientLetter===t);i&&(i.status="complete",i.submittedAt=new Date().toISOString(),i.updatedAt=new Date().toISOString(),localStorage.setItem(a,JSON.stringify(n)))}function b(e,t){p(e,t),i.$h(e,t).catch(e=>console.error("Failed to sync to API:",e))}async function x(e,t){let n=g(e,t);try{return await i.HX(e,t),!0}catch(e){return console.error("Failed to delete via API:",e),n}}function g(e,t){let n=l(),i=n.find(n=>n.incidentId===e&&n.patientLetter===t);if(i&&"incomplete"===i.status){let i=n.filter(n=>!(n.incidentId===e&&n.patientLetter===t));return localStorage.setItem(a,JSON.stringify(i)),["incident","patient_info","primary_survey","hx_complaint","past_medical_history","clinical_impression","disposition","vitals","medications","interventions","media"].forEach(t=>{localStorage.removeItem("".concat(t,"_").concat(e))}),!0}return!1}function h(e,t){let n=g(e,t);return i.HX(e,t).catch(e=>console.error("Failed to sync delete to API:",e)),n}async function y(e,t,n,a){j(e,t,n,a);try{return await i.F3(e,t,n,a),!0}catch(e){return console.error("Failed to transfer via API:",e),!0}}function j(e,t,n,i){let r=l(),s=r.find(n=>n.incidentId===e&&n.patientLetter===t);return!!s&&(s.author=n,s.authorCallsign=i,s.updatedAt=new Date().toISOString(),localStorage.setItem(a,JSON.stringify(r)),!0)}function v(e,t,n,a){let r=j(e,t,n,a);return i.F3(e,t,n,a).catch(e=>console.error("Failed to sync transfer to API:",e)),r}async function w(e,t,n){let i=l().filter(t=>t.incidentId===e);if(0===i.length)return!1;for(let a of i)await y(e,a.patientLetter,t,n);return!0}function I(e,t,n){let i=l().filter(t=>t.incidentId===e);return 0!==i.length&&(i.forEach(i=>{v(e,i.patientLetter,t,n)}),!0)}async function k(e,t,n){try{return(await i.qx(e,t,n)).map(r)}catch(i){return console.error("Failed to search via API, using local cache:",i),P(e,t||"",{status:n})}}function S(e){let t={};return e.forEach(e=>{t[e.incidentId]||(t[e.incidentId]=[]),t[e.incidentId].push(e)}),Object.entries(t).map(e=>{var t,n;let[i,a]=e;return{incidentId:i,patients:a.sort((e,t)=>e.patientLetter.localeCompare(t.patientLetter)),allComplete:a.every(e=>"complete"===e.status),createdAt:(null===(t=a[0])||void 0===t?void 0:t.createdAt)||"",fleetId:(null===(n=a[0])||void 0===n?void 0:n.fleetId)||""}}).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}function _(e){let t=l().filter(t=>t.incidentId===e);return t.length>0&&t.every(e=>"complete"===e.status)}function A(e){return o(e).filter(e=>"incomplete"===e.status)}function N(e){return o(e).filter(e=>"complete"===e.status)}function P(e,t,n){let i=o(e);if((null==n?void 0:n.status)&&"all"!==n.status&&(i=i.filter(e=>e.status===n.status)),null==n?void 0:n.dateFrom){let e=new Date(n.dateFrom).getTime();i=i.filter(t=>new Date(t.createdAt).getTime()>=e)}if(null==n?void 0:n.dateTo){let e=new Date(n.dateTo).getTime()+864e5;i=i.filter(t=>new Date(t.createdAt).getTime()<=e)}if(t.trim()){let e=t.toLowerCase();i=i.filter(t=>t.incidentId.toLowerCase().includes(e)||t.patientLetter.toLowerCase().includes(e)||t.authorCallsign.toLowerCase().includes(e))}return i}function F(e,t){return l().find(n=>n.incidentId===e&&n.patientLetter===t)||null}function C(e){return S(o(e)).filter(e=>e.patients.length>1&&!e.allComplete&&e.patients.some(e=>"complete"===e.status))}},1923:function(e,t,n){n.d(t,{Gf:function(){return c},Q2:function(){return r},mb:function(){return l}});var i=n(3278),a=n(3291);function r(e){try{return localStorage.getItem("patient_letter_".concat(e))||"A"}catch(e){return"A"}}function s(e,t){let n=function(e){try{let t=localStorage.getItem("saved_patients_".concat(e));return t?JSON.parse(t):[]}catch(e){return[]}}(e);n.includes(t)||(n.push(t),localStorage.setItem("saved_patients_".concat(e),JSON.stringify(n)))}function o(e,t){["patient_info","primary_survey","hx_complaint","past_medical_history","clinical_impression","disposition","vitals","medications","interventions"].forEach(n=>{let i="".concat(n,"_").concat(e),a="".concat(n,"_").concat(e,"_").concat(t),r=localStorage.getItem(i);r&&localStorage.setItem(a,r)})}async function l(e){try{let t=r(e);o(e,t),s(e,t);let n=function(e){let t=e.charCodeAt(0);return t>=90?"Z":String.fromCharCode(t+1)}(t);return localStorage.setItem("patient_letter_".concat(e),n),["patient_info","primary_survey","hx_complaint","past_medical_history","clinical_impression","disposition","vitals","medications","interventions"].forEach(t=>{localStorage.removeItem("".concat(t,"_").concat(e))}),["vitals_draft","medications_draft","interventions_draft"].forEach(t=>{localStorage.removeItem("".concat(t,"_").concat(e))}),{success:!0,newLetter:n}}catch(e){return console.error("Error adding patient:",e),{success:!1,newLetter:"",error:"Failed to add patient"}}}async function c(e,t){try{let n=(0,i.Zl)(e);if(!n.isValid)return{success:!1,validationResult:n,error:"Please complete all required fields before submitting"};let l=r(e),c=(0,a.kv)(e,l);(0,a.NI)(c);try{(await fetch("/api/eprf/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({incidentId:e,fleetId:t,patientLetter:l,data:c,submittedAt:new Date().toISOString()})})).ok||console.warn("Database save failed, but PDF was downloaded")}catch(e){console.warn("Database save failed, but PDF was downloaded:",e)}return o(e,l),s(e,l),{success:!0}}catch(e){return console.error("Error submitting ePRF:",e),{success:!1,error:"Failed to submit ePRF"}}}},3278:function(e,t,n){n.d(t,{Zl:function(){return r},aY:function(){return s}});let i={incident:"incident","patient-info":"patient_info","primary-survey":"primary_survey","hx-complaint":"hx_complaint","past-medical-history":"past_medical_history","clinical-impression":"clinical_impression",disposition:"disposition"},a={incident:{fields:["caseType","dateTimeOfCall","incidentLocation","locationType"],labels:{caseType:"Case Type",dateTimeOfCall:"Date/Time of Call",incidentLocation:"Incident Location",locationType:"Location Type"}},"patient-info":{fields:["robloxUsername","firstName","surname","sex","dob","age","ageType","ptAddress"],labels:{robloxUsername:"Roblox Username",firstName:"First Name",surname:"Family Name (surname)",sex:"Sex",dob:"Date of Birth",age:"Age",ageType:"Age Type",ptAddress:"Patient Address"}},"primary-survey":{fields:["clinicalStatus","responsiveness","airway","breathing","circulation","bloodLoss"],labels:{clinicalStatus:"Clinical Status at Scene",responsiveness:"Responsiveness",airway:"Airway",breathing:"Breathing",circulation:"Circulation",bloodLoss:"Blood Loss"}},"hx-complaint":{fields:["complaints","dateOfOnset"],labels:{complaints:"Presenting Complaint",dateOfOnset:"Date of Onset"}},"past-medical-history":{fields:["pastMedicalHistory","medications","allergies","lastOralIntake"],labels:{pastMedicalHistory:"Past Medical History",medications:"Medications",allergies:"Allergies",lastOralIntake:"Last Oral Intake"}},"clinical-impression":{fields:["primaryClinicalImpression"],labels:{primaryClinicalImpression:"Primary Clinical Impression"}},disposition:{fields:["disposition","finalPatientStatus","copyToGP"],labels:{disposition:"Disposition",finalPatientStatus:"Final Patient Status",copyToGP:"Copy to GP?"}}};function r(e){let t=[],n={};for(let r of Object.keys(a)){let s=function(e,t){let n=[],r=a[e];if(!r)return n;try{let a=function(e,t){let n=i[e]||e.replace(/-/g,"_");return"".concat(n,"_").concat(t)}(e,t),s=localStorage.getItem(a);if(!s)return r.fields.map(e=>r.labels[e]);let o=JSON.parse(s);for(let e of r.fields){let t=o[e];Array.isArray(t)?0===t.length&&n.push(r.labels[e]):t&&("string"!=typeof t||""!==t.trim())||n.push(r.labels[e])}}catch(t){console.error("Error validating ".concat(e,":"),t)}return n}(r,e);s.length>0&&(t.push(r),n[r]=s)}try{let i=localStorage.getItem("vitals_".concat(e));if(i){let e=JSON.parse(i);if(Array.isArray(e)&&e.length>0)for(let i of e)i.time&&""!==i.time.trim()||(t.includes("vital-obs")||t.push("vital-obs"),n["vital-obs"]||(n["vital-obs"]=[]),n["vital-obs"].includes("Vitals entry missing Time")||n["vital-obs"].push("Vitals entry missing Time"))}}catch(e){console.error("Error validating vitals:",e)}try{let i=localStorage.getItem("medications_".concat(e));if(i){let e=JSON.parse(i);if(Array.isArray(e)&&e.length>0)for(let i of e){let e=[];i.time||e.push("Time"),i.administeredBy||e.push("Administered by"),i.medication||e.push("Medication"),i.dose||e.push("Dose"),i.unit||e.push("Unit"),i.route||e.push("Route"),e.length>0&&(t.includes("medications")||t.push("medications"),n.medications||(n.medications=[]),n.medications.push("Medication entry missing: ".concat(e.join(", "))))}}}catch(e){console.error("Error validating medications:",e)}try{let i=localStorage.getItem("interventions_".concat(e));if(i){let e=JSON.parse(i);if(Array.isArray(e)&&e.length>0)for(let i of e){let e=[];i.time||e.push("Time"),i.performedBy||e.push("Performed by"),e.length>0&&(t.includes("interventions")||t.push("interventions"),n.interventions||(n.interventions=[]),n.interventions.push("Intervention entry missing: ".concat(e.join(", "))))}}}catch(e){console.error("Error validating interventions:",e)}return{isValid:0===t.length,incompleteSections:t,fieldErrors:n}}function s(e){return({incident:"Incident Information","patient-info":"Patient Information","primary-survey":"Primary Survey","vital-obs":"Vital Obs / Treat","hx-complaint":"Hx Complaint","past-medical-history":"Past Medical History","clinical-impression":"Clinical Impression",disposition:"Disposition",media:"Media",medications:"Medications",interventions:"Interventions"})[e]||e}}}]);