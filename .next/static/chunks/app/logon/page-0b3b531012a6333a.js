(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{6393:function(e,s,r){Promise.resolve().then(r.bind(r,1903))},1903:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return o},runtime:function(){return t}});var i=r(7437),l=r(2265),n=r(9376);let t="edge",a=[/^HAM-([1-9]|10)$/i,/^HAM[1-9]$/i,/^HAM-0\d{2}$/i,/^MKE-30$/i,/^OSC-(1|2|3|30|31|32)$/i],c=["Frontline Ambulance","Events Vehicle","Echo Unit","SERT truck","Manager SUV","StJ | Support Unit","4 WD Unit","MIST"];function o(){let e=(0,n.useSearchParams)(),s=(0,n.useRouter)(),[r,t]=(0,l.useState)(""),[o,d]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[m,f]=(0,l.useState)({}),[v,p]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let s=null==e?void 0:e.get("token");s?fetch("https://discord.com/api/users/@me",{headers:{Authorization:"Bearer ".concat(s)}}).then(e=>e.json()).then(e=>{t(e.id||""),p(!1)}).catch(()=>{f({discordId:"Failed to fetch Discord user info"}),p(!1)}):(p(!1),f({discordId:"No authentication token found. Please log in first."}))},[e]);let g=e=>a.some(s=>s.test(e));return v?(0,i.jsx)("div",{className:"eprf-container",children:(0,i.jsx)("div",{className:"eprf-header",children:(0,i.jsx)("h1",{children:"Loading..."})})}):(0,i.jsxs)("div",{className:"eprf-container",children:[(0,i.jsx)("div",{className:"eprf-header",children:(0,i.jsx)("h1",{children:"Logon Form"})}),(0,i.jsx)("div",{className:"eprf-content",children:(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault();let i={};r||(i.discordId="Discord ID is required"),o?g(o)||(i.callsign="Invalid callsign format. Valid formats: HAM-1 to HAM-10, HAM1-HAM9, HAM-001 to HAM-099, MKE-30, OSC-1, OSC-2, OSC-3, OSC-30, OSC-31, OSC-32"):i.callsign="Callsign is required",u||(i.vehicle="Vehicle type is required"),f(i),0===Object.keys(i).length&&s.push("/dashboard?fleetId=".concat(encodeURIComponent(o)))},className:"eprf-form",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"discordId",children:"Discord ID:"}),(0,i.jsx)("input",{type:"text",id:"discordId",value:r,onChange:e=>t(e.target.value),readOnly:!0,disabled:!0,className:"form-input readonly ".concat(m.discordId?"error":"")}),m.discordId&&(0,i.jsx)("div",{className:"field-error",children:m.discordId})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"callsign",children:"Callsign:"}),(0,i.jsx)("input",{type:"text",id:"callsign",value:o,onChange:e=>{d(e.target.value.toUpperCase()),m.callsign&&f({...m,callsign:void 0})},placeholder:"e.g., HAM-1, MKE-30, OSC-32",className:"form-input ".concat(m.callsign?"error":"")}),m.callsign&&(0,i.jsx)("div",{className:"field-error",children:m.callsign})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"vehicle",children:"Vehicle Type:"}),(0,i.jsxs)("select",{id:"vehicle",value:u,onChange:e=>{h(e.target.value),m.vehicle&&f({...m,vehicle:void 0})},className:"form-select ".concat(m.vehicle?"error":""),children:[(0,i.jsx)("option",{value:"",children:"-- Select Vehicle --"}),c.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]}),m.vehicle&&(0,i.jsx)("div",{className:"field-error",children:m.vehicle})]}),(0,i.jsx)("div",{className:"form-actions",children:(0,i.jsx)("button",{type:"submit",className:"btn-submit",children:"Sign In"})})]})})]})}},9376:function(e,s,r){"use strict";var i=r(5475);r.o(i,"useRouter")&&r.d(s,{useRouter:function(){return i.useRouter}}),r.o(i,"useSearchParams")&&r.d(s,{useSearchParams:function(){return i.useSearchParams}})}},function(e){e.O(0,[971,30,744],function(){return e(e.s=6393)}),_N_E=e.O()}]);