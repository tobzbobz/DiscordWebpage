(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[753],{5635:function(e,a,t){Promise.resolve().then(t.bind(t,4516))},4516:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m},runtime:function(){return b}});var s=t(7437),i=t(29),o=t.n(i),n=t(9376),l=t(2265),d=t(3278),r=t(1923),c=t(8310),x=t(459),f=t(8029),p=t(1028);let b="edge";function m(){let e=(0,n.useSearchParams)(),a=(0,n.useRouter)(),i=(null==e?void 0:e.get("id"))||"",b=(null==e?void 0:e.get("fleetId"))||"",[m,u]=(0,l.useState)([]),[j,h]=(0,l.useState)(1),[g,y]=(0,l.useState)("A"),[w,N]=(0,l.useState)(!1),[v,k]=(0,l.useState)(!1),[P,C]=(0,l.useState)(!1),[z,S]=(0,l.useState)(!1),[T,R]=(0,l.useState)(!1),[A,F]=(0,l.useState)({}),[G,O]=(0,l.useState)(!1),[D,I]=(0,l.useState)({title:"",message:""}),[Y,_]=(0,l.useState)({disposition:"",noTreatmentReason:"Transport not indicated",noTransportReason:"",finalPatientStatus:"",dispositionNotes:"",referralPathway:"",acsAccessCode:"",reasonForDelay:"",nonTransportAdvice:"",copyToGP:"",noteToGP:"",flagForAudit:!1,auditReason:""});(0,l.useEffect)(()=>{i&&y((0,r.Q2)(i))},[i]),(0,l.useEffect)(()=>{if(i){let e=localStorage.getItem("disposition_".concat(i));if(e)try{let a=JSON.parse(e);_(e=>({...e,...a}))}catch(e){console.error("Failed to parse saved data:",e)}}},[i]),(0,l.useEffect)(()=>{i&&localStorage.setItem("disposition_".concat(i),JSON.stringify(Y))},[Y,i]);let E=()=>{let e=new URLSearchParams({fleetId:b});a.push("/dashboard?".concat(e))},L=e=>{let t=new URLSearchParams({id:i,fleetId:b});"incident"===e?a.push("/incident?".concat(t)):"patient-info"===e?a.push("/patient-info?".concat(t)):"primary-survey"===e?a.push("/primary-survey?".concat(t)):"vital-obs"===e?a.push("/vital-obs?".concat(t)):"hx-complaint"===e?a.push("/hx-complaint?".concat(t)):"past-medical-history"===e?a.push("/past-medical-history?".concat(t)):"clinical-impression"===e?a.push("/clinical-impression?".concat(t)):"disposition"===e?a.push("/disposition?".concat(t)):"media"===e&&a.push("/media?".concat(t))},q=async()=>{O(!0);try{let e=await (0,r.Gf)(i,b);e.success?(k(!1),I({title:"ePRF Submitted Successfully!",message:"The ePRF for Patient ".concat(g," has been submitted.\n\nA PDF copy has been downloaded to your device and the record has been saved.")}),R(!0)):e.validationResult&&(k(!1),F(e.validationResult.fieldErrors),u(e.validationResult.incompleteSections),S(!0))}catch(e){console.error("Submit error:",e),alert("An error occurred while submitting. Please try again.")}finally{O(!1)}},Z=async()=>{O(!0);try{let e=await (0,r.mb)(i);e.success?(N(!1),y(e.newLetter),I({title:"Patient Added Successfully!",message:"Patient ".concat(g," has been saved.\n\nYou are now working on Patient ").concat(e.newLetter,".\n\nThe form has been cleared for the new patient.")}),R(!0),setTimeout(()=>{let e=new URLSearchParams({id:i,fleetId:b});a.push("/patient-info?".concat(e))},2e3)):alert(e.error||"Failed to add patient")}catch(e){console.error("Add patient error:",e),alert("An error occurred. Please try again.")}finally{O(!1)}},H=e=>m.includes("disposition")&&("disposition"===e&&!Y.disposition||"finalPatientStatus"===e&&!Y.finalPatientStatus||"copyToGP"===e&&!Y.copyToGP),J=(e,a)=>{_(t=>({...t,[e]:a}))},M=(e,a)=>{_(t=>({...t,[e]:a}))},U=""!==Y.disposition&&"Transport"!==Y.disposition;return(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 eprf-dashboard incident-page",children:[(0,s.jsx)(o(),{id:"ed279f79a4111f63",children:'.disposition-section.jsx-ed279f79a4111f63{padding:20px}.disposition-title.jsx-ed279f79a4111f63{font-size:16px;font-weight:bold;color:#1a3a5c;margin-bottom:15px}.disposition-title.required.jsx-ed279f79a4111f63::after{content:"*";color:#c00;margin-left:2px}.disposition-options.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:60px;margin-bottom:25px}.disposition-option.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px;cursor:pointer;font-size:15px;color:#1a3a5c}.disposition-option.jsx-ed279f79a4111f63 input[type="radio"].jsx-ed279f79a4111f63{width:20px;height:20px;cursor:pointer}.reason-row.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:40px;margin-bottom:25px}.reason-field.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:8px}.reason-label.jsx-ed279f79a4111f63{font-size:15px;font-weight:bold;color:#1a3a5c}.reason-select.jsx-ed279f79a4111f63{padding:8px 12px;font-size:14px;border:1px solid#7a9cc0;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;background:white;min-width:200px;cursor:pointer}.reason-select.jsx-ed279f79a4111f63:focus{outline:none;border-color:#5a8ab8}.status-section.jsx-ed279f79a4111f63{margin-bottom:25px}.status-title.jsx-ed279f79a4111f63{font-size:15px;font-weight:bold;color:#1a3a5c;margin-bottom:10px}.status-title.required.jsx-ed279f79a4111f63::after{content:"*";color:#c00;margin-left:2px}.status-options.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:50px}.status-option.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px;cursor:pointer;font-size:15px;color:#1a3a5c}.status-option.jsx-ed279f79a4111f63 input[type="radio"].jsx-ed279f79a4111f63{width:20px;height:20px;cursor:pointer}.notes-section.jsx-ed279f79a4111f63{margin-bottom:25px}.notes-label.jsx-ed279f79a4111f63{font-size:15px;font-weight:bold;color:#1a3a5c;margin-bottom:8px;display:block}.notes-textarea.jsx-ed279f79a4111f63{width:100%;min-height:80px;padding:10px 12px;font-size:14px;border:1px solid#7a9cc0;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;background:white;resize:vertical;font-family:inherit}.notes-textarea.jsx-ed279f79a4111f63:focus{outline:none;border-color:#5a8ab8}.pathway-row.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:30px;margin-bottom:25px}.pathway-field.jsx-ed279f79a4111f63{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:8px}.pathway-label.jsx-ed279f79a4111f63{font-size:15px;font-weight:bold;color:#1a3a5c}.pathway-input.jsx-ed279f79a4111f63{padding:8px 12px;font-size:14px;border:1px solid#7a9cc0;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;background:#d0d8e0;color:#666;cursor:not-allowed}.pathway-input.grayed.jsx-ed279f79a4111f63{background:#c8d0d8;pointer-events:none}.delay-section.jsx-ed279f79a4111f63{margin-bottom:25px}.delay-label.jsx-ed279f79a4111f63{font-size:15px;font-weight:bold;color:#1a3a5c;margin-bottom:8px;display:block}.delay-input.jsx-ed279f79a4111f63{width:100%;padding:10px 12px;font-size:14px;border:1px solid#7a9cc0;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;background:white;font-family:inherit}.delay-input.jsx-ed279f79a4111f63:focus{outline:none;border-color:#5a8ab8}.page2-section.jsx-ed279f79a4111f63{padding:20px}.non-transport-section.jsx-ed279f79a4111f63{margin-bottom:25px}.section-label.jsx-ed279f79a4111f63{font-size:15px;font-weight:bold;color:#1a3a5c;background:#6a7ba2;color:white;padding:2px 8px;display:inline-block;margin-bottom:8px}.large-textarea.jsx-ed279f79a4111f63{width:100%;min-height:100px;padding:10px 12px;font-size:14px;border:1px solid#7a9cc0;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;background:white;resize:vertical;font-family:inherit}.large-textarea.jsx-ed279f79a4111f63:focus{outline:none;border-color:#5a8ab8}.large-textarea.grayed.jsx-ed279f79a4111f63{background:#c8d0d8;color:#666;cursor:not-allowed}.gp-section.jsx-ed279f79a4111f63{margin-bottom:25px}.gp-row.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:40px;margin-bottom:15px}.gp-options.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:5px}.gp-title.jsx-ed279f79a4111f63{font-size:15px;font-weight:bold;color:white;background:#6a7ba2;padding:2px 8px;display:inline-block;margin-bottom:8px}.gp-title.required.jsx-ed279f79a4111f63::after{content:"*";color:#c00;margin-left:2px}.gp-option.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px;cursor:pointer;font-size:15px;color:#1a3a5c}.gp-option.jsx-ed279f79a4111f63 input[type="radio"].jsx-ed279f79a4111f63{width:18px;height:18px;cursor:pointer}.gp-textarea-area.jsx-ed279f79a4111f63{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.note-to-gp-section.jsx-ed279f79a4111f63{margin-bottom:25px}.note-to-gp-label.jsx-ed279f79a4111f63{font-size:15px;font-weight:bold;color:white;background:#6a7ba2;padding:2px 8px;display:inline-block;margin-bottom:8px}.note-to-gp-input.jsx-ed279f79a4111f63{width:100%;padding:10px 12px;font-size:14px;border:1px solid#7a9cc0;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;background:white;font-family:inherit}.note-to-gp-input.jsx-ed279f79a4111f63:focus{outline:none;border-color:#5a8ab8}.audit-section.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:40px;margin-bottom:25px}.audit-checkbox-area.jsx-ed279f79a4111f63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px;padding-top:25px}.audit-checkbox.jsx-ed279f79a4111f63{width:20px;height:20px;cursor:pointer}.audit-label.jsx-ed279f79a4111f63{font-size:15px;font-weight:bold;color:white;background:#6a7ba2;padding:2px 8px;cursor:pointer}.audit-reason-area.jsx-ed279f79a4111f63{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.reason-title.jsx-ed279f79a4111f63{font-size:15px;font-weight:bold;color:white;background:#6a7ba2;padding:2px 8px;display:inline-block;margin-bottom:8px}.reason-input.jsx-ed279f79a4111f63{width:100%;padding:10px 12px;font-size:14px;border:1px solid#7a9cc0;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;background:white;font-family:inherit}.reason-input.jsx-ed279f79a4111f63:focus{outline:none;border-color:#5a8ab8}.reason-input.grayed.jsx-ed279f79a4111f63{background:#c8d0d8;color:#666;cursor:not-allowed}'}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 eprf-nav",children:[(0,s.jsx)("button",{onClick:E,className:"jsx-ed279f79a4111f63 nav-btn",children:"Home"}),(0,s.jsx)("button",{className:"jsx-ed279f79a4111f63 nav-btn",children:"Tools"}),(0,s.jsx)("button",{onClick:()=>{let e=(0,f.ts)();e&&(0,p.GJ)(e.discordId)&&a.push("/admin")},className:"jsx-ed279f79a4111f63 nav-btn",children:"Admin Panel"}),(0,s.jsx)("button",{onClick:()=>{a.push("/")},className:"jsx-ed279f79a4111f63 nav-btn",children:"Manage Crew"}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 page-counter",children:[(0,s.jsx)("span",{className:"jsx-ed279f79a4111f63 patient-letter",children:g}),(0,s.jsxs)("span",{className:"jsx-ed279f79a4111f63 page-indicator",children:[j," of ",2]})]})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 incident-layout",children:[(0,s.jsxs)("aside",{className:"jsx-ed279f79a4111f63 sidebar",children:[(0,s.jsx)("button",{onClick:()=>L("incident"),className:"jsx-ed279f79a4111f63 "+"sidebar-btn".concat(m.includes("incident")?" incomplete":""),children:"Incident Information"}),(0,s.jsx)("button",{onClick:()=>L("patient-info"),className:"jsx-ed279f79a4111f63 "+"sidebar-btn".concat(m.includes("patient-info")?" incomplete":""),children:"Patient Information"}),(0,s.jsx)("button",{onClick:()=>L("primary-survey"),className:"jsx-ed279f79a4111f63 "+"sidebar-btn".concat(m.includes("primary-survey")?" incomplete":""),children:"Primary Survey"}),(0,s.jsx)("button",{onClick:()=>L("vital-obs"),className:"jsx-ed279f79a4111f63 "+"sidebar-btn".concat(m.includes("vital-obs")?" incomplete":""),children:"Vital Obs / Treat"}),(0,s.jsx)("button",{onClick:()=>L("hx-complaint"),className:"jsx-ed279f79a4111f63 "+"sidebar-btn".concat(m.includes("hx-complaint")?" incomplete":""),children:"Hx Complaint"}),(0,s.jsx)("button",{onClick:()=>L("past-medical-history"),className:"jsx-ed279f79a4111f63 "+"sidebar-btn".concat(m.includes("past-medical-history")?" incomplete":""),children:"Past Medical History"}),(0,s.jsx)("button",{onClick:()=>L("clinical-impression"),className:"jsx-ed279f79a4111f63 "+"sidebar-btn".concat(m.includes("clinical-impression")?" incomplete":""),children:"Clinical Impression"}),(0,s.jsx)("button",{className:"jsx-ed279f79a4111f63 "+"sidebar-btn active".concat(m.includes("disposition")?" incomplete":""),children:"Disposition"}),(0,s.jsx)("button",{onClick:()=>L("media"),className:"jsx-ed279f79a4111f63 sidebar-btn",children:"Media"})]}),(0,s.jsxs)("main",{className:"jsx-ed279f79a4111f63 incident-content",children:[1===j&&(0,s.jsxs)("section",{className:"jsx-ed279f79a4111f63 incident-section disposition-section",children:[(0,s.jsx)("div",{className:"jsx-ed279f79a4111f63 "+"disposition-title required ".concat(H("disposition")?"validation-error-label":""),children:"Disposition"}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 "+"disposition-options ".concat(H("disposition")?"validation-error-radio":""),children:[(0,s.jsxs)("label",{className:"jsx-ed279f79a4111f63 disposition-option",children:[(0,s.jsx)("input",{type:"radio",name:"disposition",value:"Transport",checked:"Transport"===Y.disposition,onChange:e=>J("disposition",e.target.value),className:"jsx-ed279f79a4111f63"}),"Transport"]}),(0,s.jsxs)("label",{className:"jsx-ed279f79a4111f63 disposition-option",children:[(0,s.jsx)("input",{type:"radio",name:"disposition",value:"Treat or Assist only",checked:"Treat or Assist only"===Y.disposition,onChange:e=>J("disposition",e.target.value),className:"jsx-ed279f79a4111f63"}),"Treat or Assist only"]}),(0,s.jsxs)("label",{className:"jsx-ed279f79a4111f63 disposition-option",children:[(0,s.jsx)("input",{type:"radio",name:"disposition",value:"Treat and Refer",checked:"Treat and Refer"===Y.disposition,onChange:e=>J("disposition",e.target.value),className:"jsx-ed279f79a4111f63"}),"Treat and Refer"]}),(0,s.jsxs)("label",{className:"jsx-ed279f79a4111f63 disposition-option",children:[(0,s.jsx)("input",{type:"radio",name:"disposition",value:"No treatment",checked:"No treatment"===Y.disposition,onChange:e=>J("disposition",e.target.value),className:"jsx-ed279f79a4111f63"}),"No treatment"]})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 reason-row",children:[(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 reason-field",children:[(0,s.jsx)("label",{className:"jsx-ed279f79a4111f63 reason-label",children:"No Treatment Reason"}),(0,s.jsx)("select",{value:Y.noTreatmentReason,onChange:e=>M("noTreatmentReason",e.target.value),className:"jsx-ed279f79a4111f63 reason-select",children:["Transport not indicated","Patient declined transport","Patient absconded","Patient deceased"].map(e=>(0,s.jsx)("option",{value:e,className:"jsx-ed279f79a4111f63",children:e},e))})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 reason-field",children:[(0,s.jsx)("label",{className:"jsx-ed279f79a4111f63 reason-label",children:"No Transport Reason"}),(0,s.jsx)("select",{value:Y.noTransportReason,onChange:e=>M("noTransportReason",e.target.value),className:"jsx-ed279f79a4111f63 reason-select",children:(0,s.jsx)("option",{value:"",className:"jsx-ed279f79a4111f63"})})]})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 status-section",children:[(0,s.jsx)("div",{className:"jsx-ed279f79a4111f63 "+"status-title required ".concat(H("finalPatientStatus")?"validation-error-label":""),children:"Final Patient Status"}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 "+"status-options ".concat(H("finalPatientStatus")?"validation-error-radio":""),children:[(0,s.jsxs)("label",{className:"jsx-ed279f79a4111f63 status-option",children:[(0,s.jsx)("input",{type:"radio",name:"finalPatientStatus",value:"0",checked:"0"===Y.finalPatientStatus,onChange:e=>J("finalPatientStatus",e.target.value),className:"jsx-ed279f79a4111f63"}),"0"]}),(0,s.jsxs)("label",{className:"jsx-ed279f79a4111f63 status-option",children:[(0,s.jsx)("input",{type:"radio",name:"finalPatientStatus",value:"1",checked:"1"===Y.finalPatientStatus,onChange:e=>J("finalPatientStatus",e.target.value),className:"jsx-ed279f79a4111f63"}),"1"]}),(0,s.jsxs)("label",{className:"jsx-ed279f79a4111f63 status-option",children:[(0,s.jsx)("input",{type:"radio",name:"finalPatientStatus",value:"2",checked:"2"===Y.finalPatientStatus,onChange:e=>J("finalPatientStatus",e.target.value),className:"jsx-ed279f79a4111f63"}),"2"]}),(0,s.jsxs)("label",{className:"jsx-ed279f79a4111f63 status-option",children:[(0,s.jsx)("input",{type:"radio",name:"finalPatientStatus",value:"3",checked:"3"===Y.finalPatientStatus,onChange:e=>J("finalPatientStatus",e.target.value),className:"jsx-ed279f79a4111f63"}),"3"]}),(0,s.jsxs)("label",{className:"jsx-ed279f79a4111f63 status-option",children:[(0,s.jsx)("input",{type:"radio",name:"finalPatientStatus",value:"4",checked:"4"===Y.finalPatientStatus,onChange:e=>J("finalPatientStatus",e.target.value),className:"jsx-ed279f79a4111f63"}),"4"]})]})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 notes-section",children:[(0,s.jsx)("label",{className:"jsx-ed279f79a4111f63 notes-label",children:"Disposition Notes"}),(0,s.jsx)("textarea",{value:Y.dispositionNotes,onChange:e=>M("dispositionNotes",e.target.value),placeholder:"",className:"jsx-ed279f79a4111f63 notes-textarea"})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 pathway-row",children:[(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 pathway-field",children:[(0,s.jsx)("label",{className:"jsx-ed279f79a4111f63 pathway-label",children:"Referral Pathway"}),(0,s.jsx)("input",{type:"text",value:Y.referralPathway,disabled:!0,readOnly:!0,className:"jsx-ed279f79a4111f63 pathway-input grayed"})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 pathway-field",children:[(0,s.jsx)("label",{className:"jsx-ed279f79a4111f63 pathway-label",children:"ACS access code"}),(0,s.jsx)("input",{type:"text",value:Y.acsAccessCode,disabled:!0,readOnly:!0,className:"jsx-ed279f79a4111f63 pathway-input grayed"})]})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 delay-section",children:[(0,s.jsx)("label",{className:"jsx-ed279f79a4111f63 delay-label",children:"Reason for delay at scene"}),(0,s.jsx)("input",{type:"text",value:Y.reasonForDelay,onChange:e=>M("reasonForDelay",e.target.value),placeholder:"",className:"jsx-ed279f79a4111f63 delay-input"})]})]}),2===j&&(0,s.jsxs)("section",{className:"jsx-ed279f79a4111f63 incident-section page2-section",children:[(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 non-transport-section",children:[(0,s.jsx)("label",{className:"jsx-ed279f79a4111f63 section-label",children:"Non Transport Advice"}),(0,s.jsx)("textarea",{value:Y.nonTransportAdvice,onChange:e=>M("nonTransportAdvice",e.target.value),disabled:!U,placeholder:"",className:"jsx-ed279f79a4111f63 "+"large-textarea ".concat(U?"":"grayed")})]}),(0,s.jsx)("div",{className:"jsx-ed279f79a4111f63 gp-section",children:(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 gp-row",children:[(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 "+"gp-options ".concat(H("copyToGP")?"validation-error-radio":""),children:[(0,s.jsx)("span",{className:"jsx-ed279f79a4111f63 "+"gp-title required ".concat(H("copyToGP")?"validation-error-label":""),children:"Copy to GP?"}),(0,s.jsxs)("label",{className:"jsx-ed279f79a4111f63 gp-option",children:[(0,s.jsx)("input",{type:"radio",name:"copyToGP",value:"Not this time",checked:"Not this time"===Y.copyToGP,onChange:e=>J("copyToGP",e.target.value),className:"jsx-ed279f79a4111f63"}),"Not this time"]}),(0,s.jsxs)("label",{className:"jsx-ed279f79a4111f63 gp-option",children:[(0,s.jsx)("input",{type:"radio",name:"copyToGP",value:"Yes",checked:"Yes"===Y.copyToGP,onChange:e=>J("copyToGP",e.target.value),className:"jsx-ed279f79a4111f63"}),"Yes"]})]}),(0,s.jsx)("div",{className:"jsx-ed279f79a4111f63 gp-textarea-area"})]})}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 note-to-gp-section",children:[(0,s.jsx)("label",{className:"jsx-ed279f79a4111f63 note-to-gp-label",children:"Note to GP"}),(0,s.jsx)("input",{type:"text",value:Y.noteToGP,onChange:e=>M("noteToGP",e.target.value),placeholder:"",className:"jsx-ed279f79a4111f63 note-to-gp-input"})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 audit-section",children:[(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 audit-checkbox-area",children:[(0,s.jsx)("input",{type:"checkbox",id:"flagForAudit",checked:Y.flagForAudit,onChange:e=>M("flagForAudit",e.target.checked),className:"jsx-ed279f79a4111f63 audit-checkbox"}),(0,s.jsx)("label",{htmlFor:"flagForAudit",className:"jsx-ed279f79a4111f63 audit-label",children:"Flag for Audit"})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 audit-reason-area",children:[(0,s.jsx)("label",{className:"jsx-ed279f79a4111f63 reason-title",children:"Reason"}),(0,s.jsx)("input",{type:"text",value:Y.auditReason,onChange:e=>M("auditReason",e.target.value),disabled:!Y.flagForAudit,placeholder:"",className:"jsx-ed279f79a4111f63 "+"reason-input ".concat(Y.flagForAudit?"":"grayed")})]})]})]})]})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 eprf-footer incident-footer",children:[(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 footer-left",children:[(0,s.jsx)("button",{className:"jsx-ed279f79a4111f63 footer-btn internet",children:"Internet"}),(0,s.jsx)("button",{className:"jsx-ed279f79a4111f63 footer-btn server",children:"Server"}),(0,s.jsx)("button",{onClick:()=>{N(!0)},className:"jsx-ed279f79a4111f63 footer-btn discovery",children:"Add Patient"}),(0,s.jsx)("button",{onClick:()=>{C(!0)},className:"jsx-ed279f79a4111f63 footer-btn green",children:"Transfer ePRF"}),(0,s.jsx)("button",{onClick:()=>{let e=(0,d.Zl)(i);u(e.incompleteSections),e.isValid?k(!0):(F(e.fieldErrors),S(!0))},className:"jsx-ed279f79a4111f63 footer-btn green",children:"Submit ePRF"})]}),(0,s.jsxs)("div",{className:"jsx-ed279f79a4111f63 footer-right",children:[(0,s.jsx)("button",{onClick:()=>{j>1?h(j-1):L("clinical-impression")},className:"jsx-ed279f79a4111f63 footer-btn orange",children:"< Previous"}),(0,s.jsx)("button",{onClick:()=>{j<2?h(j+1):L("media")},className:"jsx-ed279f79a4111f63 footer-btn orange",children:"Next >"})]})]}),(0,s.jsx)(c.ZP,{isOpen:w,onClose:()=>N(!1),onConfirm:Z,title:"Add New Patient",message:"Are you sure you want to add a new patient?\n\nThis will:\n• Save the current Patient ".concat(g," data\n• Create a new patient record (Patient ").concat(String.fromCharCode(g.charCodeAt(0)+1),")\n• Clear the form for the new patient"),confirmText:"Yes, Add Patient",cancelText:"Cancel",type:"info",isLoading:G}),(0,s.jsx)(c.ZP,{isOpen:v,onClose:()=>k(!1),onConfirm:q,title:"Submit ePRF",message:"Are you sure you want to submit this ePRF?\n\nThis will:\n• Generate a PDF report for Patient ".concat(g,"\n• Save the record to the database\n• Download the PDF to your device"),confirmText:"Yes, Submit ePRF",cancelText:"Cancel",type:"success",isLoading:G}),(0,s.jsx)(c.Yj,{isOpen:z,onClose:()=>S(!1),errors:A,getSectionDisplayName:d.aY}),(0,s.jsx)(c.i_,{isOpen:T,onClose:()=>R(!1),title:D.title,message:D.message}),(0,s.jsx)(x.Z,{isOpen:P,onClose:()=>C(!1),onTransferComplete:e=>{let{transferAllPatients:a}=t(190);a(i,e.discordId,e.callsign),C(!1),I({title:"ePRF Transferred",message:"The ePRF has been transferred to ".concat(e.callsign,". You will be redirected to the dashboard.")}),R(!0),setTimeout(()=>{E()},2e3)},incidentId:i,patientLetter:g})]})}}},function(e){e.O(0,[505,125,914,973,12,971,30,744],function(){return e(e.s=5635)}),_N_E=e.O()}]);