{"version":3,"file":"edge-chunks/625.js","mappings":"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","sources":["webpack://_N_E/","webpack://_N_E/?a6c6","webpack://_N_E/./app/components/ConfirmationModal.tsx","webpack://_N_E/./app/utils/apiClient.ts","webpack://_N_E/./app/utils/pdfGenerator.ts","webpack://_N_E/./app/layout.tsx","webpack://_N_E/./app/globals.css"],"sourcesContent":[null,"import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\node_modules\\\\next\\\\dist\\\\esm\\\\client\\\\components\\\\app-router.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\node_modules\\\\next\\\\dist\\\\esm\\\\client\\\\components\\\\client-page.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\node_modules\\\\next\\\\dist\\\\esm\\\\client\\\\components\\\\error-boundary.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\node_modules\\\\next\\\\dist\\\\esm\\\\client\\\\components\\\\layout-router.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\node_modules\\\\next\\\\dist\\\\esm\\\\client\\\\components\\\\not-found-boundary.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\node_modules\\\\next\\\\dist\\\\esm\\\\client\\\\components\\\\render-from-template-context.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\node_modules\\\\next\\\\dist\\\\esm\\\\shared\\\\lib\\\\app-router-context.shared-runtime.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\node_modules\\\\next\\\\dist\\\\esm\\\\shared\\\\lib\\\\hooks-client-context.shared-runtime.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\node_modules\\\\next\\\\dist\\\\esm\\\\shared\\\\lib\\\\loadable-context.shared-runtime.js\");\n;\nimport(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\node_modules\\\\next\\\\dist\\\\esm\\\\shared\\\\lib\\\\server-inserted-html.shared-runtime.js\");\n","'use client'\r\n\r\nimport { useState } from 'react'\r\n\r\ninterface ConfirmationModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onConfirm: () => void\r\n  title: string\r\n  message: string\r\n  confirmText?: string\r\n  cancelText?: string\r\n  type?: 'warning' | 'success' | 'info'\r\n  isLoading?: boolean\r\n}\r\n\r\nexport default function ConfirmationModal({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  title,\r\n  message,\r\n  confirmText = 'Confirm',\r\n  cancelText = 'Cancel',\r\n  type = 'warning',\r\n  isLoading = false\r\n}: ConfirmationModalProps) {\r\n  if (!isOpen) return null\r\n\r\n  const getTypeColor = () => {\r\n    switch (type) {\r\n      case 'success': return '#28a745'\r\n      case 'warning': return '#ffc107'\r\n      case 'info': return '#17a2b8'\r\n      default: return '#ffc107'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <style jsx>{`\r\n        .modal-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(0, 0, 0, 0.6);\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          z-index: 10000;\r\n        }\r\n\r\n        .modal-content {\r\n          background: #fff;\r\n          border-radius: 12px;\r\n          padding: 0;\r\n          max-width: 450px;\r\n          width: 90%;\r\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\r\n          overflow: hidden;\r\n        }\r\n\r\n        .modal-header {\r\n          background: ${getTypeColor()};\r\n          padding: 20px 25px;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n        }\r\n\r\n        .modal-icon {\r\n          width: 32px;\r\n          height: 32px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          font-size: 24px;\r\n        }\r\n\r\n        .modal-title {\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n          color: #1a1a1a;\r\n          margin: 0;\r\n        }\r\n\r\n        .modal-body {\r\n          padding: 25px;\r\n        }\r\n\r\n        .modal-message {\r\n          font-size: 15px;\r\n          color: #444;\r\n          line-height: 1.6;\r\n          margin: 0;\r\n          white-space: pre-line;\r\n        }\r\n\r\n        .modal-footer {\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          gap: 12px;\r\n          padding: 20px 25px;\r\n          border-top: 1px solid #e0e0e0;\r\n          background: #f8f9fa;\r\n        }\r\n\r\n        .modal-btn {\r\n          padding: 10px 24px;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          border: none;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n          transition: all 0.2s;\r\n        }\r\n\r\n        .modal-btn:disabled {\r\n          opacity: 0.6;\r\n          cursor: not-allowed;\r\n        }\r\n\r\n        .modal-btn-cancel {\r\n          background: #e0e0e0;\r\n          color: #333;\r\n        }\r\n\r\n        .modal-btn-cancel:hover:not(:disabled) {\r\n          background: #d0d0d0;\r\n        }\r\n\r\n        .modal-btn-confirm {\r\n          background: #0066cc;\r\n          color: white;\r\n        }\r\n\r\n        .modal-btn-confirm:hover:not(:disabled) {\r\n          background: #0052a3;\r\n        }\r\n\r\n        .modal-btn-confirm.warning {\r\n          background: #dc3545;\r\n        }\r\n\r\n        .modal-btn-confirm.warning:hover:not(:disabled) {\r\n          background: #c82333;\r\n        }\r\n\r\n        .modal-btn-confirm.success {\r\n          background: #28a745;\r\n        }\r\n\r\n        .modal-btn-confirm.success:hover:not(:disabled) {\r\n          background: #1e7e34;\r\n        }\r\n\r\n        .loading-spinner {\r\n          display: inline-block;\r\n          width: 14px;\r\n          height: 14px;\r\n          border: 2px solid #ffffff;\r\n          border-radius: 50%;\r\n          border-top-color: transparent;\r\n          animation: spin 0.8s linear infinite;\r\n          margin-right: 8px;\r\n        }\r\n\r\n        @keyframes spin {\r\n          to { transform: rotate(360deg); }\r\n        }\r\n      `}</style>\r\n      <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <div className=\"modal-icon\">\r\n            {type === 'warning' && '⚠️'}\r\n            {type === 'success' && '✅'}\r\n            {type === 'info' && 'ℹ️'}\r\n          </div>\r\n          <h3 className=\"modal-title\">{title}</h3>\r\n        </div>\r\n        <div className=\"modal-body\">\r\n          <p className=\"modal-message\">{message}</p>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button \r\n            className=\"modal-btn modal-btn-cancel\" \r\n            onClick={onClose}\r\n            disabled={isLoading}\r\n          >\r\n            {cancelText}\r\n          </button>\r\n          <button \r\n            className={`modal-btn modal-btn-confirm ${type}`}\r\n            onClick={onConfirm}\r\n            disabled={isLoading}\r\n          >\r\n            {isLoading && <span className=\"loading-spinner\"></span>}\r\n            {confirmText}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n// Validation Error Modal Component\r\ninterface ValidationErrorModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  errors: { [section: string]: string[] }\r\n  getSectionDisplayName: (section: string) => string\r\n}\r\n\r\nexport function ValidationErrorModal({\r\n  isOpen,\r\n  onClose,\r\n  errors,\r\n  getSectionDisplayName\r\n}: ValidationErrorModalProps) {\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <style jsx>{`\r\n        .modal-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(0, 0, 0, 0.6);\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          z-index: 10000;\r\n        }\r\n\r\n        .modal-content {\r\n          background: #fff;\r\n          border-radius: 12px;\r\n          padding: 0;\r\n          max-width: 550px;\r\n          width: 90%;\r\n          max-height: 80vh;\r\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\r\n          overflow: hidden;\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n\r\n        .modal-header {\r\n          background: #dc3545;\r\n          padding: 20px 25px;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n        }\r\n\r\n        .modal-icon {\r\n          font-size: 28px;\r\n        }\r\n\r\n        .modal-title {\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n          color: #fff;\r\n          margin: 0;\r\n        }\r\n\r\n        .modal-body {\r\n          padding: 20px 25px;\r\n          overflow-y: auto;\r\n          flex: 1;\r\n        }\r\n\r\n        .modal-intro {\r\n          font-size: 14px;\r\n          color: #666;\r\n          margin-bottom: 20px;\r\n        }\r\n\r\n        .error-section {\r\n          margin-bottom: 20px;\r\n        }\r\n\r\n        .error-section-title {\r\n          font-size: 15px;\r\n          font-weight: 600;\r\n          color: #1a3a5c;\r\n          margin-bottom: 8px;\r\n          padding-bottom: 5px;\r\n          border-bottom: 2px solid #e0e0e0;\r\n        }\r\n\r\n        .error-list {\r\n          list-style: none;\r\n          padding: 0;\r\n          margin: 0;\r\n        }\r\n\r\n        .error-item {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          padding: 8px 0;\r\n          font-size: 14px;\r\n          color: #c0392b;\r\n        }\r\n\r\n        .error-bullet {\r\n          color: #dc3545;\r\n          font-size: 10px;\r\n        }\r\n\r\n        .modal-footer {\r\n          display: flex;\r\n          justify-content: center;\r\n          padding: 20px 25px;\r\n          border-top: 1px solid #e0e0e0;\r\n          background: #f8f9fa;\r\n        }\r\n\r\n        .modal-btn-ok {\r\n          padding: 12px 40px;\r\n          font-size: 15px;\r\n          font-weight: 600;\r\n          background: #0066cc;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n          transition: all 0.2s;\r\n        }\r\n\r\n        .modal-btn-ok:hover {\r\n          background: #0052a3;\r\n        }\r\n      `}</style>\r\n      <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <span className=\"modal-icon\">❌</span>\r\n          <h3 className=\"modal-title\">Cannot Submit ePRF</h3>\r\n        </div>\r\n        <div className=\"modal-body\">\r\n          <p className=\"modal-intro\">\r\n            Please complete all required fields before submitting. The following sections have missing information:\r\n          </p>\r\n          {Object.entries(errors).map(([section, fieldErrors]) => (\r\n            <div key={section} className=\"error-section\">\r\n              <div className=\"error-section-title\">{getSectionDisplayName(section)}</div>\r\n              <ul className=\"error-list\">\r\n                {fieldErrors.map((error, index) => (\r\n                  <li key={index} className=\"error-item\">\r\n                    <span className=\"error-bullet\">●</span>\r\n                    {error}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button className=\"modal-btn-ok\" onClick={onClose}>\r\n            OK, I'll fix these\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n// Success Modal Component\r\ninterface SuccessModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  title: string\r\n  message: string\r\n}\r\n\r\nexport function SuccessModal({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  message\r\n}: SuccessModalProps) {\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <style jsx>{`\r\n        .modal-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(0, 0, 0, 0.6);\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          z-index: 10000;\r\n        }\r\n\r\n        .modal-content {\r\n          background: #fff;\r\n          border-radius: 12px;\r\n          padding: 0;\r\n          max-width: 450px;\r\n          width: 90%;\r\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\r\n          overflow: hidden;\r\n          text-align: center;\r\n        }\r\n\r\n        .modal-header {\r\n          background: #28a745;\r\n          padding: 30px 25px;\r\n        }\r\n\r\n        .modal-icon {\r\n          font-size: 60px;\r\n          display: block;\r\n          margin-bottom: 10px;\r\n        }\r\n\r\n        .modal-title {\r\n          font-size: 22px;\r\n          font-weight: 600;\r\n          color: #fff;\r\n          margin: 0;\r\n        }\r\n\r\n        .modal-body {\r\n          padding: 25px;\r\n        }\r\n\r\n        .modal-message {\r\n          font-size: 15px;\r\n          color: #444;\r\n          line-height: 1.6;\r\n          margin: 0;\r\n          white-space: pre-line;\r\n        }\r\n\r\n        .modal-footer {\r\n          display: flex;\r\n          justify-content: center;\r\n          padding: 20px 25px;\r\n          border-top: 1px solid #e0e0e0;\r\n          background: #f8f9fa;\r\n        }\r\n\r\n        .modal-btn-ok {\r\n          padding: 12px 50px;\r\n          font-size: 15px;\r\n          font-weight: 600;\r\n          background: #28a745;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 6px;\r\n          cursor: pointer;\r\n          transition: all 0.2s;\r\n        }\r\n\r\n        .modal-btn-ok:hover {\r\n          background: #1e7e34;\r\n        }\r\n      `}</style>\r\n      <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <span className=\"modal-icon\">✓</span>\r\n          <h3 className=\"modal-title\">{title}</h3>\r\n        </div>\r\n        <div className=\"modal-body\">\r\n          <p className=\"modal-message\">{message}</p>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button className=\"modal-btn-ok\" onClick={onClose}>\r\n            Done\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","// API Client for ePRF database operations\r\n\r\nexport interface EPRFRecord {\r\n  id: number;\r\n  incident_id: string;\r\n  patient_letter: string;\r\n  status: 'incomplete' | 'complete';\r\n  author_discord_id: string;\r\n  author_callsign: string;\r\n  fleet_id: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n  submitted_at?: string;\r\n}\r\n\r\nexport interface User {\r\n  id: number;\r\n  discord_id: string;\r\n  discord_username: string;\r\n  callsign: string;\r\n  vehicle: string;\r\n  last_login: string;\r\n}\r\n\r\n// ePRF Records API\r\nexport async function createEPRFRecord(\r\n  incidentId: string,\r\n  patientLetter: string,\r\n  authorDiscordId: string,\r\n  authorCallsign: string,\r\n  fleetId: string\r\n): Promise<EPRFRecord | null> {\r\n  try {\r\n    const response = await fetch('/api/eprf/records', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        incidentId,\r\n        patientLetter,\r\n        authorDiscordId,\r\n        authorCallsign,\r\n        fleetId\r\n      })\r\n    });\r\n    const data = await response.json();\r\n    if (data.success) {\r\n      return data.record;\r\n    }\r\n    console.error('createEPRFRecord error:', data.error);\r\n    return null;\r\n  } catch (error) {\r\n    console.error('createEPRFRecord error:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function getEPRFRecord(\r\n  incidentId: string,\r\n  patientLetter: string\r\n): Promise<EPRFRecord | null> {\r\n  try {\r\n    const params = new URLSearchParams({ incidentId, patientLetter });\r\n    const response = await fetch(`/api/eprf/records?${params}`);\r\n    const data = await response.json();\r\n    return data.success ? data.record : null;\r\n  } catch (error) {\r\n    console.error('getEPRFRecord error:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function getEPRFRecordsByUser(discordId: string): Promise<EPRFRecord[]> {\r\n  try {\r\n    const params = new URLSearchParams({ discordId });\r\n    const response = await fetch(`/api/eprf/records?${params}`);\r\n    const data = await response.json();\r\n    return data.success ? data.records : [];\r\n  } catch (error) {\r\n    console.error('getEPRFRecordsByUser error:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function searchEPRFs(\r\n  discordId: string,\r\n  query?: string,\r\n  status?: string\r\n): Promise<EPRFRecord[]> {\r\n  try {\r\n    const params = new URLSearchParams({ discordId });\r\n    if (query) params.set('query', query);\r\n    if (status) params.set('status', status);\r\n    const response = await fetch(`/api/eprf/records?${params}`);\r\n    const data = await response.json();\r\n    return data.success ? data.records : [];\r\n  } catch (error) {\r\n    console.error('searchEPRFs error:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function markEPRFComplete(\r\n  incidentId: string,\r\n  patientLetter: string\r\n): Promise<EPRFRecord | null> {\r\n  try {\r\n    const response = await fetch('/api/eprf/records', {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ incidentId, patientLetter, action: 'complete' })\r\n    });\r\n    const data = await response.json();\r\n    return data.success ? data.record : null;\r\n  } catch (error) {\r\n    console.error('markEPRFComplete error:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function transferEPRF(\r\n  incidentId: string,\r\n  patientLetter: string,\r\n  newAuthorDiscordId: string,\r\n  newAuthorCallsign: string\r\n): Promise<EPRFRecord | null> {\r\n  try {\r\n    const response = await fetch('/api/eprf/records', {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        incidentId,\r\n        patientLetter,\r\n        action: 'transfer',\r\n        newAuthorDiscordId,\r\n        newAuthorCallsign\r\n      })\r\n    });\r\n    const data = await response.json();\r\n    return data.success ? data.record : null;\r\n  } catch (error) {\r\n    console.error('transferEPRF error:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function deleteEPRFRecord(\r\n  incidentId: string,\r\n  patientLetter: string\r\n): Promise<boolean> {\r\n  try {\r\n    const response = await fetch('/api/eprf/records', {\r\n      method: 'DELETE',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ incidentId, patientLetter })\r\n    });\r\n    const data = await response.json();\r\n    return data.success;\r\n  } catch (error) {\r\n    console.error('deleteEPRFRecord error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// ePRF Form Data API\r\nexport async function saveEPRFData(\r\n  incidentId: string,\r\n  patientLetter: string,\r\n  section: string,\r\n  formData: any\r\n): Promise<boolean> {\r\n  try {\r\n    const response = await fetch('/api/eprf/data', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ incidentId, patientLetter, section, data: formData })\r\n    });\r\n    const data = await response.json();\r\n    return data.success;\r\n  } catch (error) {\r\n    console.error('saveEPRFData error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function getEPRFData(\r\n  incidentId: string,\r\n  patientLetter: string,\r\n  section: string\r\n): Promise<any | null> {\r\n  try {\r\n    const params = new URLSearchParams({ incidentId, patientLetter, section });\r\n    const response = await fetch(`/api/eprf/data?${params}`);\r\n    const data = await response.json();\r\n    return data.success ? data.data : null;\r\n  } catch (error) {\r\n    console.error('getEPRFData error:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function getAllEPRFData(\r\n  incidentId: string,\r\n  patientLetter: string\r\n): Promise<{ [key: string]: any }> {\r\n  try {\r\n    const params = new URLSearchParams({ incidentId, patientLetter, all: 'true' });\r\n    const response = await fetch(`/api/eprf/data?${params}`);\r\n    const data = await response.json();\r\n    return data.success ? data.data : {};\r\n  } catch (error) {\r\n    console.error('getAllEPRFData error:', error);\r\n    return {};\r\n  }\r\n}\r\n\r\n// User API\r\nexport async function loginUser(\r\n  discordId: string,\r\n  discordUsername: string,\r\n  callsign: string,\r\n  vehicle: string\r\n): Promise<User | null> {\r\n  try {\r\n    const response = await fetch('/api/users', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ discordId, discordUsername, callsign, vehicle })\r\n    });\r\n    const data = await response.json();\r\n    return data.success ? data.user : null;\r\n  } catch (error) {\r\n    console.error('loginUser error:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function getActiveUsers(): Promise<User[]> {\r\n  try {\r\n    const response = await fetch('/api/users?active=true');\r\n    const data = await response.json();\r\n    return data.success ? data.users : [];\r\n  } catch (error) {\r\n    console.error('getActiveUsers error:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getUser(discordId: string): Promise<User | null> {\r\n  try {\r\n    const params = new URLSearchParams({ discordId });\r\n    const response = await fetch(`/api/users?${params}`);\r\n    const data = await response.json();\r\n    return data.success ? data.user : null;\r\n  } catch (error) {\r\n    console.error('getUser error:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Initialize database (call once on first deploy)\r\nexport async function initializeDatabase(): Promise<boolean> {\r\n  try {\r\n    const response = await fetch('/api/db/init');\r\n    const data = await response.json();\r\n    return data.success;\r\n  } catch (error) {\r\n    console.error('initializeDatabase error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Admin Discord ID\r\nexport const ADMIN_DISCORD_ID = '695765253612953651';\r\n\r\n// Check if user is admin\r\nexport function isAdmin(discordId: string): boolean {\r\n  return discordId === ADMIN_DISCORD_ID;\r\n}\r\n\r\n// Admin API Functions\r\nexport interface AdminEPRFRecord extends EPRFRecord {\r\n  user_callsign?: string;\r\n  discord_username?: string;\r\n}\r\n\r\nexport async function adminGetAllRecords(\r\n  discordId: string,\r\n  query?: string,\r\n  status?: string,\r\n  authorId?: string\r\n): Promise<AdminEPRFRecord[]> {\r\n  try {\r\n    const params = new URLSearchParams({ discordId });\r\n    if (query) params.set('query', query);\r\n    if (status) params.set('status', status);\r\n    if (authorId) params.set('authorId', authorId);\r\n    const response = await fetch(`/api/admin/records?${params}`);\r\n    const data = await response.json();\r\n    return data.success ? data.records : [];\r\n  } catch (error) {\r\n    console.error('adminGetAllRecords error:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function adminGetAllUsers(discordId: string): Promise<User[]> {\r\n  try {\r\n    const params = new URLSearchParams({ discordId, type: 'users' });\r\n    const response = await fetch(`/api/admin/records?${params}`);\r\n    const data = await response.json();\r\n    return data.success ? data.users : [];\r\n  } catch (error) {\r\n    console.error('adminGetAllUsers error:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function adminDeleteRecord(\r\n  discordId: string,\r\n  incidentId: string,\r\n  patientLetter: string\r\n): Promise<boolean> {\r\n  try {\r\n    const response = await fetch('/api/admin/records', {\r\n      method: 'DELETE',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ discordId, incidentId, patientLetter })\r\n    });\r\n    const data = await response.json();\r\n    return data.success;\r\n  } catch (error) {\r\n    console.error('adminDeleteRecord error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function adminTransferRecord(\r\n  discordId: string,\r\n  incidentId: string,\r\n  patientLetter: string,\r\n  newAuthorDiscordId: string,\r\n  newAuthorCallsign: string\r\n): Promise<AdminEPRFRecord | null> {\r\n  try {\r\n    const response = await fetch('/api/admin/records', {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        discordId,\r\n        incidentId,\r\n        patientLetter,\r\n        action: 'transfer',\r\n        newAuthorDiscordId,\r\n        newAuthorCallsign\r\n      })\r\n    });\r\n    const data = await response.json();\r\n    return data.success ? data.record : null;\r\n  } catch (error) {\r\n    console.error('adminTransferRecord error:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function adminUpdateStatus(\r\n  discordId: string,\r\n  incidentId: string,\r\n  patientLetter: string,\r\n  status: 'incomplete' | 'complete'\r\n): Promise<AdminEPRFRecord | null> {\r\n  try {\r\n    const response = await fetch('/api/admin/records', {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        discordId,\r\n        incidentId,\r\n        patientLetter,\r\n        action: 'updateStatus',\r\n        status\r\n      })\r\n    });\r\n    const data = await response.json();\r\n    return data.success ? data.record : null;\r\n  } catch (error) {\r\n    console.error('adminUpdateStatus error:', error);\r\n    return null;\r\n  }\r\n}\r\n","'use client'\r\n\r\nimport { jsPDF } from 'jspdf'\r\n\r\ninterface EPRFData {\r\n  incidentId: string\r\n  patientLetter: string\r\n  incident: any\r\n  patientInfo: any\r\n  primarySurvey: any\r\n  hxComplaint: any\r\n  pastMedicalHistory: any\r\n  clinicalImpression: any\r\n  disposition: any\r\n  vitals: any[]\r\n  medications: any[]\r\n  interventions: any[]\r\n}\r\n\r\nfunction formatDate(dateStr: string): string {\r\n  if (!dateStr) return 'N/A'\r\n  try {\r\n    const date = new Date(dateStr)\r\n    return date.toLocaleString('en-GB', { \r\n      day: '2-digit', \r\n      month: '2-digit', \r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    })\r\n  } catch {\r\n    return dateStr\r\n  }\r\n}\r\n\r\nfunction addSectionHeader(doc: jsPDF, title: string, y: number): number {\r\n  doc.setFillColor(0, 82, 147) // Navy blue\r\n  doc.rect(10, y, 190, 8, 'F')\r\n  doc.setTextColor(255, 255, 255)\r\n  doc.setFontSize(11)\r\n  doc.setFont('helvetica', 'bold')\r\n  doc.text(title, 15, y + 6)\r\n  doc.setTextColor(0, 0, 0)\r\n  doc.setFont('helvetica', 'normal')\r\n  return y + 12\r\n}\r\n\r\nfunction addField(doc: jsPDF, label: string, value: string, x: number, y: number, width: number = 90): number {\r\n  doc.setFontSize(8)\r\n  doc.setFont('helvetica', 'bold')\r\n  doc.text(label + ':', x, y)\r\n  doc.setFont('helvetica', 'normal')\r\n  const displayValue = value || 'N/A'\r\n  const lines = doc.splitTextToSize(displayValue, width - 5)\r\n  doc.text(lines, x, y + 4)\r\n  return y + 4 + (lines.length * 3.5)\r\n}\r\n\r\nfunction checkPageBreak(doc: jsPDF, y: number, needed: number = 30): number {\r\n  if (y + needed > 280) {\r\n    doc.addPage()\r\n    return 20\r\n  }\r\n  return y\r\n}\r\n\r\nexport function generateEPRFPdf(data: EPRFData): jsPDF {\r\n  const doc = new jsPDF()\r\n  let y = 15\r\n  \r\n  // Header\r\n  doc.setFillColor(0, 51, 102)\r\n  doc.rect(0, 0, 210, 25, 'F')\r\n  doc.setTextColor(255, 255, 255)\r\n  doc.setFontSize(18)\r\n  doc.setFont('helvetica', 'bold')\r\n  doc.text('Electronic Patient Report Form (ePRF)', 105, 12, { align: 'center' })\r\n  doc.setFontSize(10)\r\n  doc.text(`Incident ID: ${data.incidentId} | Patient: ${data.patientLetter}`, 105, 20, { align: 'center' })\r\n  doc.setTextColor(0, 0, 0)\r\n  \r\n  y = 35\r\n  \r\n  // Incident Information Section\r\n  y = addSectionHeader(doc, 'Incident Information', y)\r\n  const inc = data.incident || {}\r\n  \r\n  doc.setFontSize(9)\r\n  y = addField(doc, 'Case Type', inc.caseType, 15, y)\r\n  y = addField(doc, 'Date/Time of Call', formatDate(inc.dateTimeOfCall), 15, y)\r\n  y = addField(doc, 'Incident Location', inc.incidentLocation, 15, y)\r\n  y = addField(doc, 'Location Type', inc.locationType, 15, y)\r\n  if (inc.chiefComplaint) y = addField(doc, 'Chief Complaint', inc.chiefComplaint, 15, y)\r\n  \r\n  y += 5\r\n  y = checkPageBreak(doc, y, 50)\r\n  \r\n  // Patient Information Section\r\n  y = addSectionHeader(doc, 'Patient Information', y)\r\n  const pt = data.patientInfo || {}\r\n  \r\n  const col1x = 15, col2x = 110\r\n  let y1 = y, y2 = y\r\n  \r\n  y1 = addField(doc, 'Roblox Username', pt.robloxUsername, col1x, y1)\r\n  y2 = addField(doc, 'NHS Number', pt.nhsNo, col2x, y2)\r\n  \r\n  y1 = addField(doc, 'First Name', pt.firstName, col1x, y1)\r\n  y2 = addField(doc, 'Surname', pt.surname, col2x, y2)\r\n  \r\n  y1 = addField(doc, 'Sex', pt.sex, col1x, y1)\r\n  y2 = addField(doc, 'Date of Birth', pt.dob, col2x, y2)\r\n  \r\n  y1 = addField(doc, 'Age', `${pt.age || ''} ${pt.ageType || ''}`.trim(), col1x, y1)\r\n  y2 = addField(doc, 'Weight', pt.weight ? `${pt.weight} kg` : '', col2x, y2)\r\n  \r\n  y = Math.max(y1, y2)\r\n  y = addField(doc, 'Patient Address', pt.ptAddress, 15, y, 180)\r\n  \r\n  y += 5\r\n  y = checkPageBreak(doc, y, 50)\r\n  \r\n  // Primary Survey Section\r\n  y = addSectionHeader(doc, 'Primary Survey', y)\r\n  const ps = data.primarySurvey || {}\r\n  \r\n  y1 = y; y2 = y\r\n  y1 = addField(doc, 'Clinical Status', ps.clinicalStatus, col1x, y1)\r\n  y2 = addField(doc, 'Responsiveness', ps.responsiveness, col2x, y2)\r\n  \r\n  y1 = addField(doc, 'Airway', ps.airway, col1x, y1)\r\n  y2 = addField(doc, 'Breathing', ps.breathing, col2x, y2)\r\n  \r\n  y1 = addField(doc, 'Circulation', ps.circulation, col1x, y1)\r\n  y2 = addField(doc, 'Blood Loss', ps.bloodLoss, col2x, y2)\r\n  \r\n  if (ps.traumaType) {\r\n    y = Math.max(y1, y2)\r\n    y = addField(doc, 'Trauma Type', ps.traumaType, 15, y)\r\n  } else {\r\n    y = Math.max(y1, y2)\r\n  }\r\n  \r\n  y += 5\r\n  y = checkPageBreak(doc, y, 40)\r\n  \r\n  // Hx & Complaint Section\r\n  y = addSectionHeader(doc, 'Presenting Complaint & History', y)\r\n  const hx = data.hxComplaint || {}\r\n  \r\n  const complaints = Array.isArray(hx.complaints) ? hx.complaints.join(', ') : hx.complaints\r\n  y = addField(doc, 'Presenting Complaint(s)', complaints, 15, y, 180)\r\n  y = addField(doc, 'Date of Onset', hx.dateOfOnset, 15, y)\r\n  if (hx.symptoms) y = addField(doc, 'Symptoms', hx.symptoms, 15, y, 180)\r\n  if (hx.patientNarrative) y = addField(doc, 'Patient Narrative', hx.patientNarrative, 15, y, 180)\r\n  \r\n  y += 5\r\n  y = checkPageBreak(doc, y, 40)\r\n  \r\n  // Past Medical History Section\r\n  y = addSectionHeader(doc, 'Past Medical History', y)\r\n  const pmh = data.pastMedicalHistory || {}\r\n  \r\n  y = addField(doc, 'Past Medical History', pmh.pastMedicalHistory, 15, y, 180)\r\n  y = addField(doc, 'Medications', pmh.medications, 15, y, 180)\r\n  y = addField(doc, 'Allergies', pmh.allergies, 15, y, 180)\r\n  y = addField(doc, 'Last Oral Intake', pmh.lastOralIntake, 15, y, 180)\r\n  \r\n  y += 5\r\n  y = checkPageBreak(doc, y, 50)\r\n  \r\n  // Vital Observations Section\r\n  if (data.vitals && data.vitals.length > 0) {\r\n    y = addSectionHeader(doc, 'Vital Observations', y)\r\n    \r\n    doc.setFontSize(7)\r\n    doc.setFont('helvetica', 'bold')\r\n    const headers = ['Time', 'HR', 'BP', 'SpO2', 'RR', 'Temp', 'GCS', 'Pain']\r\n    const colWidths = [30, 20, 30, 20, 20, 20, 20, 20]\r\n    let xPos = 15\r\n    \r\n    headers.forEach((header, i) => {\r\n      doc.text(header, xPos, y)\r\n      xPos += colWidths[i]\r\n    })\r\n    \r\n    y += 4\r\n    doc.setFont('helvetica', 'normal')\r\n    \r\n    data.vitals.forEach((vital) => {\r\n      y = checkPageBreak(doc, y, 8)\r\n      xPos = 15\r\n      const row = [\r\n        vital.time || '',\r\n        vital.heartRate || '',\r\n        vital.bloodPressure || '',\r\n        vital.spo2 || '',\r\n        vital.respRate || '',\r\n        vital.temp || '',\r\n        vital.gcsTotal || '',\r\n        vital.painScore || ''\r\n      ]\r\n      row.forEach((cell, i) => {\r\n        doc.text(String(cell), xPos, y)\r\n        xPos += colWidths[i]\r\n      })\r\n      y += 4\r\n    })\r\n    \r\n    y += 5\r\n  }\r\n  \r\n  y = checkPageBreak(doc, y, 50)\r\n  \r\n  // Medications Section\r\n  if (data.medications && data.medications.length > 0) {\r\n    y = addSectionHeader(doc, 'Medications Administered', y)\r\n    \r\n    doc.setFontSize(7)\r\n    doc.setFont('helvetica', 'bold')\r\n    const headers = ['Time', 'Medication', 'Dose', 'Route', 'Admin By']\r\n    const colWidths = [30, 50, 30, 30, 40]\r\n    let xPos = 15\r\n    \r\n    headers.forEach((header, i) => {\r\n      doc.text(header, xPos, y)\r\n      xPos += colWidths[i]\r\n    })\r\n    \r\n    y += 4\r\n    doc.setFont('helvetica', 'normal')\r\n    \r\n    data.medications.forEach((med) => {\r\n      y = checkPageBreak(doc, y, 8)\r\n      xPos = 15\r\n      const row = [\r\n        med.time || '',\r\n        med.medication || '',\r\n        `${med.dose || ''} ${med.unit || ''}`.trim(),\r\n        med.route || '',\r\n        med.administeredBy || ''\r\n      ]\r\n      row.forEach((cell, i) => {\r\n        const text = doc.splitTextToSize(String(cell), colWidths[i] - 2)[0]\r\n        doc.text(text, xPos, y)\r\n        xPos += colWidths[i]\r\n      })\r\n      y += 4\r\n    })\r\n    \r\n    y += 5\r\n  }\r\n  \r\n  y = checkPageBreak(doc, y, 50)\r\n  \r\n  // Interventions Section\r\n  if (data.interventions && data.interventions.length > 0) {\r\n    y = addSectionHeader(doc, 'Interventions', y)\r\n    \r\n    data.interventions.forEach((intervention, index) => {\r\n      y = checkPageBreak(doc, y, 20)\r\n      doc.setFontSize(8)\r\n      doc.setFont('helvetica', 'bold')\r\n      doc.text(`Intervention ${index + 1}: ${intervention.time || ''} by ${intervention.performedBy || ''}`, 15, y)\r\n      y += 5\r\n      doc.setFont('helvetica', 'normal')\r\n      \r\n      const details: string[] = []\r\n      if (intervention.airway) details.push(`Airway: ${intervention.airway}`)\r\n      if (intervention.ventilation) details.push(`Ventilation: ${intervention.ventilation}`)\r\n      if (intervention.cpr) details.push(`CPR: ${intervention.cpr}`)\r\n      if (intervention.defibrillation) details.push(`Defibrillation: ${intervention.defibrillation}`)\r\n      if (intervention.ivCannulation) details.push(`IV: ${intervention.ivCannulation}`)\r\n      if (intervention.ioAccess) details.push(`IO: ${intervention.ioAccess}`)\r\n      \r\n      if (details.length > 0) {\r\n        const detailText = details.join(' | ')\r\n        const lines = doc.splitTextToSize(detailText, 180)\r\n        doc.text(lines, 15, y)\r\n        y += lines.length * 4\r\n      }\r\n      y += 3\r\n    })\r\n    \r\n    y += 5\r\n  }\r\n  \r\n  y = checkPageBreak(doc, y, 40)\r\n  \r\n  // Clinical Impression Section\r\n  y = addSectionHeader(doc, 'Clinical Impression', y)\r\n  const ci = data.clinicalImpression || {}\r\n  \r\n  y = addField(doc, 'Primary Clinical Impression', ci.primaryClinicalImpression, 15, y, 180)\r\n  if (ci.secondaryClinicalImpression) {\r\n    y = addField(doc, 'Secondary Clinical Impression', ci.secondaryClinicalImpression, 15, y, 180)\r\n  }\r\n  if (ci.clinicalNotes) {\r\n    y = addField(doc, 'Clinical Notes', ci.clinicalNotes, 15, y, 180)\r\n  }\r\n  \r\n  y += 5\r\n  y = checkPageBreak(doc, y, 40)\r\n  \r\n  // Disposition Section\r\n  y = addSectionHeader(doc, 'Disposition', y)\r\n  const disp = data.disposition || {}\r\n  \r\n  y1 = y; y2 = y\r\n  y1 = addField(doc, 'Disposition', disp.disposition, col1x, y1)\r\n  y2 = addField(doc, 'Final Patient Status', disp.finalPatientStatus, col2x, y2)\r\n  \r\n  y = Math.max(y1, y2)\r\n  y = addField(doc, 'Copy to GP', disp.copyToGP, 15, y)\r\n  \r\n  if (disp.receivingFacility) y = addField(doc, 'Receiving Facility', disp.receivingFacility, 15, y)\r\n  if (disp.handoverTo) y = addField(doc, 'Handover To', disp.handoverTo, 15, y)\r\n  \r\n  // Footer on last page\r\n  const pageCount = doc.getNumberOfPages()\r\n  for (let i = 1; i <= pageCount; i++) {\r\n    doc.setPage(i)\r\n    doc.setFontSize(8)\r\n    doc.setTextColor(128, 128, 128)\r\n    doc.text(`Page ${i} of ${pageCount}`, 105, 290, { align: 'center' })\r\n    doc.text(`Generated: ${new Date().toLocaleString('en-GB')}`, 15, 290)\r\n    doc.text(`ePRF ID: ${data.incidentId}-${data.patientLetter}`, 195, 290, { align: 'right' })\r\n  }\r\n  \r\n  return doc\r\n}\r\n\r\nexport function downloadEPRFPdf(data: EPRFData): void {\r\n  const doc = generateEPRFPdf(data)\r\n  doc.save(`ePRF_${data.incidentId}_Patient${data.patientLetter}_${new Date().toISOString().split('T')[0]}.pdf`)\r\n}\r\n\r\n// Collect all ePRF data from localStorage for a given incident\r\nexport function collectEPRFData(incidentId: string, patientLetter: string): EPRFData {\r\n  const getItem = (key: string) => {\r\n    try {\r\n      const data = localStorage.getItem(key)\r\n      return data ? JSON.parse(data) : null\r\n    } catch {\r\n      return null\r\n    }\r\n  }\r\n  \r\n  return {\r\n    incidentId,\r\n    patientLetter,\r\n    incident: getItem(`incident_${incidentId}`),\r\n    patientInfo: getItem(`patient_info_${incidentId}`),\r\n    primarySurvey: getItem(`primary_survey_${incidentId}`),\r\n    hxComplaint: getItem(`hx_complaint_${incidentId}`),\r\n    pastMedicalHistory: getItem(`past_medical_history_${incidentId}`),\r\n    clinicalImpression: getItem(`clinical_impression_${incidentId}`),\r\n    disposition: getItem(`disposition_${incidentId}`),\r\n    vitals: getItem(`vitals_${incidentId}`) || [],\r\n    medications: getItem(`medications_${incidentId}`) || [],\r\n    interventions: getItem(`interventions_${incidentId}`) || []\r\n  }\r\n}\r\n","import type { Metadata } from \"next\"\nimport \"./globals.css\"\n\nexport const metadata: Metadata = {\n  title: \"Discord Login\",\n  description: \"Discord OAuth Login App\",\n}\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang=\"en\">\n      <body>{children}</body>\n    </html>\n  )\n}\r\n"],"names":["Promise","resolve","then","__webpack_require__","bind","ConfirmationModal","isOpen","onClose","onConfirm","title","message","confirmText","cancelText","type","isLoading","getTypeColor","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","div","onClick","e","stopPropagation","jsx","h3","p","button","disabled","span","ValidationErrorModal","errors","getSectionDisplayName","Object","entries","map","section","fieldErrors","ul","error","index","li","SuccessModal","createEPRFRecord","incidentId","patientLetter","authorDiscordId","authorCallsign","fleetId","response","fetch","method","headers","body","JSON","stringify","data","json","success","record","console","getEPRFRecordsByUser","discordId","params","URLSearchParams","records","searchEPRFs","query","status","set","markEPRFComplete","action","transferEPRF","newAuthorDiscordId","newAuthorCallsign","deleteEPRFRecord","getAllEPRFData","all","getActiveUsers","users","isAdmin","adminGetAllRecords","authorId","adminGetAllUsers","adminDeleteRecord","adminTransferRecord","addSectionHeader","doc","y","setFillColor","rect","setTextColor","setFontSize","setFont","text","addField","label","value","x","width","lines","splitTextToSize","length","checkPageBreak","needed","addPage","downloadEPRFPdf","jsPDF","align","inc","incident","caseType","formatDate","dateStr","date","Date","toLocaleString","day","month","year","hour","minute","dateTimeOfCall","incidentLocation","locationType","chiefComplaint","pt","patientInfo","y1","y2","robloxUsername","nhsNo","firstName","surname","sex","dob","Math","max","age","ageType","trim","weight","ptAddress","ps","primarySurvey","clinicalStatus","responsiveness","airway","breathing","circulation","bloodLoss","traumaType","hx","hxComplaint","Array","isArray","complaints","join","dateOfOnset","symptoms","patientNarrative","pmh","pastMedicalHistory","medications","allergies","lastOralIntake","vitals","colWidths","xPos","forEach","header","i","row","vital","time","heartRate","bloodPressure","spo2","respRate","temp","gcsTotal","painScore","cell","String","med","medication","dose","unit","route","administeredBy","interventions","intervention","performedBy","details","push","ventilation","cpr","defibrillation","ivCannulation","ioAccess","detailText","ci","clinicalImpression","primaryClinicalImpression","secondaryClinicalImpression","clinicalNotes","disp","disposition","finalPatientStatus","copyToGP","receivingFacility","handoverTo","pageCount","getNumberOfPages","setPage","save","toISOString","split","collectEPRFData","getItem","localStorage","key","parse","metadata","description","RootLayout","children","html","lang"],"sourceRoot":""}