(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[625],{4820:()=>{},5335:(e,t,i)=>{Promise.resolve().then(i.bind(i,6336)),Promise.resolve().then(i.bind(i,5721)),Promise.resolve().then(i.bind(i,9027)),Promise.resolve().then(i.bind(i,7603)),Promise.resolve().then(i.bind(i,7245)),Promise.resolve().then(i.bind(i,4782)),Promise.resolve().then(i.bind(i,5291)),Promise.resolve().then(i.bind(i,4504)),Promise.resolve().then(i.bind(i,5975)),Promise.resolve().then(i.bind(i,8823))},596:(e,t,i)=>{"use strict";i.d(t,{Yj:()=>s,ZP:()=>r,i_:()=>l});var a=i(926),o=i(9807),n=i.n(o);function r({isOpen:e,onClose:t,onConfirm:i,title:o,message:r,confirmText:s="Confirm",cancelText:l="Cancel",type:c="warning",isLoading:d=!1}){if(!e)return null;let m=()=>{switch(c){case"success":return"#28a745";case"warning":default:return"#ffc107";case"info":return"#17a2b8"}};return(0,a.jsxs)("div",{onClick:t,className:n().dynamic([["2f014c33745be792",[m()]]])+" modal-overlay",children:[(0,a.jsx)(n(),{id:"2f014c33745be792",dynamic:[m()],children:`.modal-overlay.__jsx-style-dynamic-selector{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;z-index:10000}.modal-content.__jsx-style-dynamic-selector{background:#fff;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:0;max-width:450px;width:90%;-webkit-box-shadow:0 10px 40px rgba(0,0,0,.3);-moz-box-shadow:0 10px 40px rgba(0,0,0,.3);box-shadow:0 10px 40px rgba(0,0,0,.3);overflow:hidden}.modal-header.__jsx-style-dynamic-selector{background:${m()};padding:20px 25px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:12px}.modal-icon.__jsx-style-dynamic-selector{width:32px;height:32px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;font-size:24px}.modal-title.__jsx-style-dynamic-selector{font-size:18px;font-weight:600;color:#1a1a1a;margin:0}.modal-body.__jsx-style-dynamic-selector{padding:25px}.modal-message.__jsx-style-dynamic-selector{font-size:15px;color:#444;line-height:1.6;margin:0;white-space:pre-line}.modal-footer.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;gap:12px;padding:20px 25px;border-top:1px solid#e0e0e0;background:#f8f9fa}.modal-btn.__jsx-style-dynamic-selector{padding:10px 24px;font-size:14px;font-weight:600;border:none;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.modal-btn.__jsx-style-dynamic-selector:disabled{opacity:.6;cursor:not-allowed}.modal-btn-cancel.__jsx-style-dynamic-selector{background:#e0e0e0;color:#333}.modal-btn-cancel.__jsx-style-dynamic-selector:hover:not(:disabled){background:#d0d0d0}.modal-btn-confirm.__jsx-style-dynamic-selector{background:#06c;color:white}.modal-btn-confirm.__jsx-style-dynamic-selector:hover:not(:disabled){background:#0052a3}.modal-btn-confirm.warning.__jsx-style-dynamic-selector{background:#dc3545}.modal-btn-confirm.warning.__jsx-style-dynamic-selector:hover:not(:disabled){background:#c82333}.modal-btn-confirm.success.__jsx-style-dynamic-selector{background:#28a745}.modal-btn-confirm.success.__jsx-style-dynamic-selector:hover:not(:disabled){background:#1e7e34}.loading-spinner.__jsx-style-dynamic-selector{display:inline-block;width:14px;height:14px;border:2px solid#fff;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;border-top-color:transparent;-webkit-animation:spin.8s linear infinite;-moz-animation:spin.8s linear infinite;-o-animation:spin.8s linear infinite;animation:spin.8s linear infinite;margin-right:8px}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}`}),(0,a.jsxs)("div",{onClick:e=>e.stopPropagation(),className:n().dynamic([["2f014c33745be792",[m()]]])+" modal-content",children:[(0,a.jsxs)("div",{className:n().dynamic([["2f014c33745be792",[m()]]])+" modal-header",children:[(0,a.jsxs)("div",{className:n().dynamic([["2f014c33745be792",[m()]]])+" modal-icon",children:["warning"===c&&"⚠️","success"===c&&"✅","info"===c&&"ℹ️"]}),(0,a.jsx)("h3",{className:n().dynamic([["2f014c33745be792",[m()]]])+" modal-title",children:o})]}),(0,a.jsx)("div",{className:n().dynamic([["2f014c33745be792",[m()]]])+" modal-body",children:(0,a.jsx)("p",{className:n().dynamic([["2f014c33745be792",[m()]]])+" modal-message",children:r})}),(0,a.jsxs)("div",{className:n().dynamic([["2f014c33745be792",[m()]]])+" modal-footer",children:[(0,a.jsx)("button",{onClick:t,disabled:d,className:n().dynamic([["2f014c33745be792",[m()]]])+" modal-btn modal-btn-cancel",children:l}),(0,a.jsxs)("button",{onClick:i,disabled:d,className:n().dynamic([["2f014c33745be792",[m()]]])+" "+`modal-btn modal-btn-confirm ${c}`,children:[d&&(0,a.jsx)("span",{className:n().dynamic([["2f014c33745be792",[m()]]])+" loading-spinner"}),s]})]})]})]})}function s({isOpen:e,onClose:t,errors:i,getSectionDisplayName:o}){return e?(0,a.jsxs)("div",{onClick:t,className:"jsx-9370299e019b9ab5 modal-overlay",children:[(0,a.jsx)(n(),{id:"9370299e019b9ab5",children:".modal-overlay.jsx-9370299e019b9ab5{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;z-index:10000}.modal-content.jsx-9370299e019b9ab5{background:#fff;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:0;max-width:550px;width:90%;max-height:80vh;-webkit-box-shadow:0 10px 40px rgba(0,0,0,.3);-moz-box-shadow:0 10px 40px rgba(0,0,0,.3);box-shadow:0 10px 40px rgba(0,0,0,.3);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.modal-header.jsx-9370299e019b9ab5{background:#dc3545;padding:20px 25px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:12px}.modal-icon.jsx-9370299e019b9ab5{font-size:28px}.modal-title.jsx-9370299e019b9ab5{font-size:18px;font-weight:600;color:#fff;margin:0}.modal-body.jsx-9370299e019b9ab5{padding:20px 25px;overflow-y:auto;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.modal-intro.jsx-9370299e019b9ab5{font-size:14px;color:#666;margin-bottom:20px}.error-section.jsx-9370299e019b9ab5{margin-bottom:20px}.error-section-title.jsx-9370299e019b9ab5{font-size:15px;font-weight:600;color:#1a3a5c;margin-bottom:8px;padding-bottom:5px;border-bottom:2px solid#e0e0e0}.error-list.jsx-9370299e019b9ab5{list-style:none;padding:0;margin:0}.error-item.jsx-9370299e019b9ab5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;padding:8px 0;font-size:14px;color:#c0392b}.error-bullet.jsx-9370299e019b9ab5{color:#dc3545;font-size:10px}.modal-footer.jsx-9370299e019b9ab5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:20px 25px;border-top:1px solid#e0e0e0;background:#f8f9fa}.modal-btn-ok.jsx-9370299e019b9ab5{padding:12px 40px;font-size:15px;font-weight:600;background:#06c;color:white;border:none;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.modal-btn-ok.jsx-9370299e019b9ab5:hover{background:#0052a3}"}),(0,a.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-9370299e019b9ab5 modal-content",children:[(0,a.jsxs)("div",{className:"jsx-9370299e019b9ab5 modal-header",children:[(0,a.jsx)("span",{className:"jsx-9370299e019b9ab5 modal-icon",children:"❌"}),(0,a.jsx)("h3",{className:"jsx-9370299e019b9ab5 modal-title",children:"Cannot Submit ePRF"})]}),(0,a.jsxs)("div",{className:"jsx-9370299e019b9ab5 modal-body",children:[(0,a.jsx)("p",{className:"jsx-9370299e019b9ab5 modal-intro",children:"Please complete all required fields before submitting. The following sections have missing information:"}),Object.entries(i).map(([e,t])=>(0,a.jsxs)("div",{className:"jsx-9370299e019b9ab5 error-section",children:[(0,a.jsx)("div",{className:"jsx-9370299e019b9ab5 error-section-title",children:o(e)}),(0,a.jsx)("ul",{className:"jsx-9370299e019b9ab5 error-list",children:t.map((e,t)=>(0,a.jsxs)("li",{className:"jsx-9370299e019b9ab5 error-item",children:[(0,a.jsx)("span",{className:"jsx-9370299e019b9ab5 error-bullet",children:"●"}),e]},t))})]},e))]}),(0,a.jsx)("div",{className:"jsx-9370299e019b9ab5 modal-footer",children:(0,a.jsx)("button",{onClick:t,className:"jsx-9370299e019b9ab5 modal-btn-ok",children:"OK, I'll fix these"})})]})]}):null}function l({isOpen:e,onClose:t,title:i,message:o}){return e?(0,a.jsxs)("div",{onClick:t,className:"jsx-220c97c74d236b8a modal-overlay",children:[(0,a.jsx)(n(),{id:"220c97c74d236b8a",children:".modal-overlay.jsx-220c97c74d236b8a{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;z-index:10000}.modal-content.jsx-220c97c74d236b8a{background:#fff;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:0;max-width:450px;width:90%;-webkit-box-shadow:0 10px 40px rgba(0,0,0,.3);-moz-box-shadow:0 10px 40px rgba(0,0,0,.3);box-shadow:0 10px 40px rgba(0,0,0,.3);overflow:hidden;text-align:center}.modal-header.jsx-220c97c74d236b8a{background:#28a745;padding:30px 25px}.modal-icon.jsx-220c97c74d236b8a{font-size:60px;display:block;margin-bottom:10px}.modal-title.jsx-220c97c74d236b8a{font-size:22px;font-weight:600;color:#fff;margin:0}.modal-body.jsx-220c97c74d236b8a{padding:25px}.modal-message.jsx-220c97c74d236b8a{font-size:15px;color:#444;line-height:1.6;margin:0;white-space:pre-line}.modal-footer.jsx-220c97c74d236b8a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:20px 25px;border-top:1px solid#e0e0e0;background:#f8f9fa}.modal-btn-ok.jsx-220c97c74d236b8a{padding:12px 50px;font-size:15px;font-weight:600;background:#28a745;color:white;border:none;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.modal-btn-ok.jsx-220c97c74d236b8a:hover{background:#1e7e34}"}),(0,a.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-220c97c74d236b8a modal-content",children:[(0,a.jsxs)("div",{className:"jsx-220c97c74d236b8a modal-header",children:[(0,a.jsx)("span",{className:"jsx-220c97c74d236b8a modal-icon",children:"✓"}),(0,a.jsx)("h3",{className:"jsx-220c97c74d236b8a modal-title",children:i})]}),(0,a.jsx)("div",{className:"jsx-220c97c74d236b8a modal-body",children:(0,a.jsx)("p",{className:"jsx-220c97c74d236b8a modal-message",children:o})}),(0,a.jsx)("div",{className:"jsx-220c97c74d236b8a modal-footer",children:(0,a.jsx)("button",{onClick:t,className:"jsx-220c97c74d236b8a modal-btn-ok",children:"Done"})})]})]}):null}},8718:(e,t,i)=>{"use strict";async function a(e,t,i,a,o){try{let n=await fetch("/api/eprf/records",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({incidentId:e,patientLetter:t,authorDiscordId:i,authorCallsign:a,fleetId:o})}),r=await n.json();if(r.success)return r.record;return console.error("createEPRFRecord error:",r.error),null}catch(e){return console.error("createEPRFRecord error:",e),null}}async function o(e){try{let t=new URLSearchParams({discordId:e}),i=await fetch(`/api/eprf/records?${t}`),a=await i.json();return a.success?a.records:[]}catch(e){return console.error("getEPRFRecordsByUser error:",e),[]}}async function n(e,t,i){try{let a=new URLSearchParams({discordId:e});t&&a.set("query",t),i&&a.set("status",i);let o=await fetch(`/api/eprf/records?${a}`),n=await o.json();return n.success?n.records:[]}catch(e){return console.error("searchEPRFs error:",e),[]}}async function r(e,t){try{let i=await fetch("/api/eprf/records",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({incidentId:e,patientLetter:t,action:"complete"})}),a=await i.json();return a.success?a.record:null}catch(e){return console.error("markEPRFComplete error:",e),null}}async function s(e,t,i,a){try{let o=await fetch("/api/eprf/records",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({incidentId:e,patientLetter:t,action:"transfer",newAuthorDiscordId:i,newAuthorCallsign:a})}),n=await o.json();return n.success?n.record:null}catch(e){return console.error("transferEPRF error:",e),null}}async function l(e,t){try{let i=await fetch("/api/eprf/records",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({incidentId:e,patientLetter:t})});return(await i.json()).success}catch(e){return console.error("deleteEPRFRecord error:",e),!1}}async function c(e,t){try{let i=new URLSearchParams({incidentId:e,patientLetter:t,all:"true"}),a=await fetch(`/api/eprf/data?${i}`),o=await a.json();return o.success?o.data:{}}catch(e){return console.error("getAllEPRFData error:",e),{}}}async function d(){try{let e=await fetch("/api/users?active=true"),t=await e.json();return t.success?t.users:[]}catch(e){return console.error("getActiveUsers error:",e),[]}}function m(e){return"695765253612953651"===e}async function b(e,t,i,a){try{let o=new URLSearchParams({discordId:e});t&&o.set("query",t),i&&o.set("status",i),a&&o.set("authorId",a);let n=await fetch(`/api/admin/records?${o}`),r=await n.json();return r.success?r.records:[]}catch(e){return console.error("adminGetAllRecords error:",e),[]}}async function x(e){try{let t=new URLSearchParams({discordId:e,type:"users"}),i=await fetch(`/api/admin/records?${t}`),a=await i.json();return a.success?a.users:[]}catch(e){return console.error("adminGetAllUsers error:",e),[]}}async function p(e,t,i){try{let a=await fetch("/api/admin/records",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({discordId:e,incidentId:t,patientLetter:i})});return(await a.json()).success}catch(e){return console.error("adminDeleteRecord error:",e),!1}}async function f(e,t,i,a,o){try{let n=await fetch("/api/admin/records",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({discordId:e,incidentId:t,patientLetter:i,action:"transfer",newAuthorDiscordId:a,newAuthorCallsign:o})}),r=await n.json();return r.success?r.record:null}catch(e){return console.error("adminTransferRecord error:",e),null}}i.d(t,{$h:()=>r,Ee:()=>x,F3:()=>s,GJ:()=>m,Gx:()=>f,HX:()=>l,Jf:()=>o,bW:()=>b,cO:()=>d,ie:()=>a,qx:()=>n,uK:()=>p,wK:()=>c})},3846:(e,t,i)=>{"use strict";i.d(t,{NI:()=>s,kv:()=>l});var a=i(484);function o(e,t,i){return e.setFillColor(0,82,147),e.rect(10,i,190,8,"F"),e.setTextColor(255,255,255),e.setFontSize(11),e.setFont("helvetica","bold"),e.text(t,15,i+6),e.setTextColor(0,0,0),e.setFont("helvetica","normal"),i+12}function n(e,t,i,a,o,n=90){e.setFontSize(8),e.setFont("helvetica","bold"),e.text(t+":",a,o),e.setFont("helvetica","normal");let r=e.splitTextToSize(i||"N/A",n-5);return e.text(r,a,o+4),o+4+3.5*r.length}function r(e,t,i=30){return t+i>280?(e.addPage(),20):t}function s(e){(function(e){let t=new a.kH,i=15;t.setFillColor(0,51,102),t.rect(0,0,210,25,"F"),t.setTextColor(255,255,255),t.setFontSize(18),t.setFont("helvetica","bold"),t.text("Electronic Patient Report Form (ePRF)",105,12,{align:"center"}),t.setFontSize(10),t.text(`Incident ID: ${e.incidentId} | Patient: ${e.patientLetter}`,105,20,{align:"center"}),t.setTextColor(0,0,0),i=o(t,"Incident Information",i=35);let s=e.incident||{};t.setFontSize(9),i=n(t,"Case Type",s.caseType,15,i),i=n(t,"Date/Time of Call",function(e){if(!e)return"N/A";try{return new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}}(s.dateTimeOfCall),15,i),i=n(t,"Incident Location",s.incidentLocation,15,i),i=n(t,"Location Type",s.locationType,15,i),s.chiefComplaint&&(i=n(t,"Chief Complaint",s.chiefComplaint,15,i)),i+=5,i=r(t,i,50),i=o(t,"Patient Information",i);let l=e.patientInfo||{},c=i,d=i;c=n(t,"Roblox Username",l.robloxUsername,15,c),d=n(t,"NHS Number",l.nhsNo,110,d),c=n(t,"First Name",l.firstName,15,c),d=n(t,"Surname",l.surname,110,d),c=n(t,"Sex",l.sex,15,c),d=n(t,"Date of Birth",l.dob,110,d),i=Math.max(c=n(t,"Age",`${l.age||""} ${l.ageType||""}`.trim(),15,c),d=n(t,"Weight",l.weight?`${l.weight} kg`:"",110,d)),i=n(t,"Patient Address",l.ptAddress,15,i,180)+5,i=r(t,i,50),i=o(t,"Primary Survey",i);let m=e.primarySurvey||{};c=i,d=i,c=n(t,"Clinical Status",m.clinicalStatus,15,c),d=n(t,"Responsiveness",m.responsiveness,110,d),c=n(t,"Airway",m.airway,15,c),d=n(t,"Breathing",m.breathing,110,d),c=n(t,"Circulation",m.circulation,15,c),d=n(t,"Blood Loss",m.bloodLoss,110,d),m.traumaType?(i=Math.max(c,d),i=n(t,"Trauma Type",m.traumaType,15,i)):i=Math.max(c,d),i+=5,i=r(t,i,40),i=o(t,"Presenting Complaint & History",i);let b=e.hxComplaint||{};i=n(t,"Presenting Complaint(s)",Array.isArray(b.complaints)?b.complaints.join(", "):b.complaints,15,i,180),i=n(t,"Date of Onset",b.dateOfOnset,15,i),b.symptoms&&(i=n(t,"Symptoms",b.symptoms,15,i,180)),b.patientNarrative&&(i=n(t,"Patient Narrative",b.patientNarrative,15,i,180)),i+=5,i=r(t,i,40),i=o(t,"Past Medical History",i);let x=e.pastMedicalHistory||{};if(i=n(t,"Past Medical History",x.pastMedicalHistory,15,i,180),i=n(t,"Medications",x.medications,15,i,180),i=n(t,"Allergies",x.allergies,15,i,180),i=n(t,"Last Oral Intake",x.lastOralIntake,15,i,180)+5,i=r(t,i,50),e.vitals&&e.vitals.length>0){i=o(t,"Vital Observations",i),t.setFontSize(7),t.setFont("helvetica","bold");let a=[30,20,30,20,20,20,20,20],n=15;["Time","HR","BP","SpO2","RR","Temp","GCS","Pain"].forEach((e,o)=>{t.text(e,n,i),n+=a[o]}),i+=4,t.setFont("helvetica","normal"),e.vitals.forEach(e=>{i=r(t,i,8),n=15,[e.time||"",e.heartRate||"",e.bloodPressure||"",e.spo2||"",e.respRate||"",e.temp||"",e.gcsTotal||"",e.painScore||""].forEach((e,o)=>{t.text(String(e),n,i),n+=a[o]}),i+=4}),i+=5}if(i=r(t,i,50),e.medications&&e.medications.length>0){i=o(t,"Medications Administered",i),t.setFontSize(7),t.setFont("helvetica","bold");let a=[30,50,30,30,40],n=15;["Time","Medication","Dose","Route","Admin By"].forEach((e,o)=>{t.text(e,n,i),n+=a[o]}),i+=4,t.setFont("helvetica","normal"),e.medications.forEach(e=>{i=r(t,i,8),n=15,[e.time||"",e.medication||"",`${e.dose||""} ${e.unit||""}`.trim(),e.route||"",e.administeredBy||""].forEach((e,o)=>{let r=t.splitTextToSize(String(e),a[o]-2)[0];t.text(r,n,i),n+=a[o]}),i+=4}),i+=5}i=r(t,i,50),e.interventions&&e.interventions.length>0&&(i=o(t,"Interventions",i),e.interventions.forEach((e,a)=>{i=r(t,i,20),t.setFontSize(8),t.setFont("helvetica","bold"),t.text(`Intervention ${a+1}: ${e.time||""} by ${e.performedBy||""}`,15,i),i+=5,t.setFont("helvetica","normal");let o=[];if(e.airway&&o.push(`Airway: ${e.airway}`),e.ventilation&&o.push(`Ventilation: ${e.ventilation}`),e.cpr&&o.push(`CPR: ${e.cpr}`),e.defibrillation&&o.push(`Defibrillation: ${e.defibrillation}`),e.ivCannulation&&o.push(`IV: ${e.ivCannulation}`),e.ioAccess&&o.push(`IO: ${e.ioAccess}`),o.length>0){let e=o.join(" | "),a=t.splitTextToSize(e,180);t.text(a,15,i),i+=4*a.length}i+=3}),i+=5),i=r(t,i,40),i=o(t,"Clinical Impression",i);let p=e.clinicalImpression||{};i=n(t,"Primary Clinical Impression",p.primaryClinicalImpression,15,i,180),p.secondaryClinicalImpression&&(i=n(t,"Secondary Clinical Impression",p.secondaryClinicalImpression,15,i,180)),p.clinicalNotes&&(i=n(t,"Clinical Notes",p.clinicalNotes,15,i,180)),i+=5,i=r(t,i,40),i=o(t,"Disposition",i);let f=e.disposition||{};c=i,d=i,i=Math.max(c=n(t,"Disposition",f.disposition,15,c),d=n(t,"Final Patient Status",f.finalPatientStatus,110,d)),i=n(t,"Copy to GP",f.copyToGP,15,i),f.receivingFacility&&(i=n(t,"Receiving Facility",f.receivingFacility,15,i)),f.handoverTo&&(i=n(t,"Handover To",f.handoverTo,15,i));let y=t.getNumberOfPages();for(let i=1;i<=y;i++)t.setPage(i),t.setFontSize(8),t.setTextColor(128,128,128),t.text(`Page ${i} of ${y}`,105,290,{align:"center"}),t.text(`Generated: ${new Date().toLocaleString("en-GB")}`,15,290),t.text(`ePRF ID: ${e.incidentId}-${e.patientLetter}`,195,290,{align:"right"});return t})(e).save(`ePRF_${e.incidentId}_Patient${e.patientLetter}_${new Date().toISOString().split("T")[0]}.pdf`)}function l(e,t){let i=e=>{try{let t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}};return{incidentId:e,patientLetter:t,incident:i(`incident_${e}`),patientInfo:i(`patient_info_${e}`),primarySurvey:i(`primary_survey_${e}`),hxComplaint:i(`hx_complaint_${e}`),pastMedicalHistory:i(`past_medical_history_${e}`),clinicalImpression:i(`clinical_impression_${e}`),disposition:i(`disposition_${e}`),vitals:i(`vitals_${e}`)||[],medications:i(`medications_${e}`)||[],interventions:i(`interventions_${e}`)||[]}}},7665:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n,metadata:()=>o});var a=i(2416);i(7272);let o={title:"Discord Login",description:"Discord OAuth Login App"};function n({children:e}){return(0,a.jsx)("html",{lang:"en",children:(0,a.jsx)("body",{children:e})})}},7272:()=>{}}]);
//# sourceMappingURL=625.js.map