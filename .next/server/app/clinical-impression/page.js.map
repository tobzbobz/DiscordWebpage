{"version":3,"file":"app/clinical-impression/page.js","mappings":"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,kBACA,kBACA,sBACA,mBACA,iBACA,oBACA,uBACA,mBACA,qCACA,0DACA,iCACA,kBACA,0BACA,sBACA,+CACA,oDACA,+CACA,oDACA,sDACA,wCACA,aACA,kCACA,2BACA,iBACA,gBACA,uBACA,8BACA,kCACA,kCACA,UACA,oBACA,UACA,aACA,0BACA,6BACA,2BACA,2BACA,2BACA,4BACA,0BACA,cACA,SACA,eACA,cACA,yBACA,uCACA,UACA,UACA,SACA,eACA,YACA,eACA,2BACA,mCACA,gBACA,SACA,oBACA,sBACA,sBACA,iBACA,qBACA,sBACA,WACA,wBACA,0BACA,gBACA,eACA,mBACA,cACA,oBACA,qCACA,sBACA,iBACA,kBACA,kBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,oBACA,iBACA,qBACA,sBACA,+BACA,oBACA,sBACA,oBACA,oBACA,uBACA,wBACA,wCACA,eACA,WACA,2BACA,oDACA,2BACA,gCACA,mCACA,2BACA,eACA,oCACA,2BACA,0BACA,4BACA,6BACA,2BACA,2BACA,0BACA,qCACA,4BACA,yBACA,2BACA,uCACA,4CACA,0BACA,4BACA,2BACA,0BACA,6BACA,8BACA,8BACA,2BACA,0BACA,yBACA,yBACA,0BACA,yBACA,gCACA,+BACA,2BACA,sCACA,wDACA,0BACA,0BACA,mCACA,2BACA,qCACA,2BACA,4BACA,4BACA,+BACA,2BACA,oCACA,QACA,wDACA,0CACA,iDACA,sCACA,sCACA,2CACA,+CACA,+BACA,8BACA,uCACA,WACA,qBACA,mCACA,iCACA,6CACA,cACA,WACA,aACA,YACA,yBACA,2BACA,wBACA,yBACA,yBACA,mCACA,uBACA,2BACA,4BACA,yBACA,cACA,kEACA,wCACA,8BACA,kBACA,aACA,YACA,UACA,cACA,oBACA,mBACA,kBACA,YACA,uBACA,kBACA,aACA,oBACA,sBACA,aACA,wCACA,4CACA,4BACA,yDACA,6BACA,2CACA,yCACA,qCACA,WACA,0BACA,6BACA,+BACA,8BACA,yBACA,4BACA,yBACA,kCACA,4BACA,2BACA,oCACA,yBACA,4BACA,mCACA,0BACA,4BACA,qCACA,2BACA,mCACA,kDACA,oCACA,0BACA,0BACA,0BACA,YACA,mBACA,mBACA,4BACA,0CACA,mBACA,eACA,kBACA,aACA,8BACA,cACA,cACA,cACA,iBACA,UACA,+DACA,WACA,kBACA,0BACA,SACA,2BACA,WACA,2BACA,iBACA,gBACA,eACA,mBACA,gBACA,cACA,eACA,iCACA,UACA,+BACA,2BACA,oBACA,gBACA,gBACA,gEACA,mBACA,uBACA,wCACA,4CACA,kBACA,qBACA,4BACA,wBACA,sCACA,2DACA,aACA,6BACA,SACA,aACA,8BACA,4BACA,2BACA,6BACA,8BACA,2BACA,4BACA,iCACA,iCACA,4BACA,0BACA,iCACA,8BACA,6BACA,6BACA,2BACA,8BACA,+BACA,gCACA,2BACA,2BACA,oCACA,0BACA,2BACA,0BACA,gCACA,2BACA,2BACA,2BACA,+BACA,4BACA,4BACA,0BACA,gCACA,iCACA,4BACA,oCACA,2BACA,kBACA,mBACA,wBACA,2BACA,oBACA,4BACA,2BACA,WACA,kBACA,gBACA,+CACA,UACA,UACA,UACA,mBACA,mCACA,wBACA,WACA,cACA,4BACA,4BACA,0BACA,uBACA,uBACA,oCACA,SACA,sBACA,YACA,0BACA,yBACA,yCACA,6DACA,yDACA,OACA,kBACA,eACA,kBACA,aACA,eACA,uBACA,oBACA,4BACA,cACA,iBACA,YACA,eACA,mBACA,gCACA,yBACA,oBACA,qBACA,mBACA,kCACA,WACA,qBACA,+BACA,eACA,cACA,qBACA,8BACA,oBACA,4BACA,mBACA,sBACA,oBACA,yBACA,4BACA,qBACA,6BACA,4BACA,YACA,uCACA,mCACA,WACA,sCACA,qBACA,qBACA,uBACA,oBACA,sBACA,YACA,mBACA,qBACA,iCACA,oCACA,yBACA,sBACA,uBACA,8BACA,2BACA,kBACA,iCACA,qCACA,aACA,qB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","sources":["webpack://_N_E/external commonjs \"node:async_hooks\"","webpack://_N_E/external commonjs \"node:buffer\"","webpack://_N_E/./app/clinical-impression/page.tsx?eaba","webpack://_N_E/|ssr?fbeb","webpack://_N_E/?acfc","webpack://_N_E/./app/clinical-impression/page.tsx"],"sourcesContent":["module.exports = require(\"node:async_hooks\");","module.exports = require(\"node:buffer\");","\"TURBOPACK { transition: next-ssr }\";\nimport { AppPageRouteModule } from \"next/dist/server/future/route-modules/app-page/module.compiled\";\nimport { RouteKind } from \"next/dist/server/future/route-kind\";\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: [\n        'clinical-impression',\n        {\n        children: ['__PAGE__', {}, {\n          page: [() => import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\app\\\\clinical-impression\\\\page.tsx\"), \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\app\\\\clinical-impression\\\\page.tsx\"],\n          \n        }]\n      },\n        {\n        \n        \n      }\n      ]\n      },\n        {\n        'layout': [() => import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\app\\\\layout.tsx\"), \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\app\\\\layout.tsx\"],\n'not-found': [() => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/not-found-error\"), \"next/dist/client/components/not-found-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\app\\\\clinical-impression\\\\page.tsx\"];\nexport { tree, pages };\nexport { default as GlobalError } from \"next/dist/client/components/error-boundary\";\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nexport const originalPathname = \"/clinical-impression/page\";\nexport const __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\nexport * from \"next/dist/server/app-render/entry-base\";\n// Create and export the route module that will be consumed.\nexport const routeModule = new AppPageRouteModule({\n    definition: {\n        kind: RouteKind.APP_PAGE,\n        page: \"/clinical-impression/page\",\n        pathname: \"/clinical-impression\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\",\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map","var _self___RSC_MANIFEST;\nimport \"next/dist/server/web/globals\";\nimport { adapter } from \"next/dist/server/web/adapter\";\nimport { getRender } from \"next/dist/build/webpack/loaders/next-edge-ssr-loader/render\";\nimport { IncrementalCache } from \"next/dist/server/lib/incremental-cache\";\nimport { renderToHTMLOrFlight as renderToHTML } from \"next/dist/server/app-render/app-render\";\nimport * as pageMod from \"next-app-loader?name=app%2Fclinical-impression%2Fpage&page=%2Fclinical-impression%2Fpage&pagePath=private-next-app-dir%2Fclinical-impression%2Fpage.tsx&appDir=C%3A%5CUsers%5CToby%5CDownloads%5Cnode-v24.11.1-win-x64%5Capp123%5Capp&appPaths=%2Fclinical-impression%2Fpage&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!private-next-app-dir/clinical-impression/page.tsx?__next_edge_ssr_entry__\";\nimport { PAGE_TYPES } from \"next/dist/lib/page-types\";\nimport { setReferenceManifestsSingleton } from \"next/dist/server/app-render/encryption-utils\";\nimport { createServerModuleMap } from \"next/dist/server/app-render/action-utils\";\nconst incrementalCacheHandler = null\nconst Document = null;\nconst appMod = null;\nconst errorMod = null;\nconst error500Mod = null;\nconst sriEnabled = false\nconst isServerComponent = true\nconst dev = false\nconst serverActions = undefined\nconst nextConfig = {\"env\":{},\"webpack\":null,\"eslint\":{\"ignoreDuringBuilds\":false},\"typescript\":{\"ignoreBuildErrors\":false,\"tsconfigPath\":\"tsconfig.json\"},\"distDir\":\".next\",\"cleanDistDir\":true,\"assetPrefix\":\"\",\"cacheMaxMemorySize\":52428800,\"configOrigin\":\"next.config.js\",\"useFileSystemPublicRoutes\":true,\"generateEtags\":true,\"pageExtensions\":[\"tsx\",\"ts\",\"jsx\",\"js\"],\"poweredByHeader\":true,\"compress\":true,\"analyticsId\":\"\",\"images\":{\"deviceSizes\":[640,750,828,1080,1200,1920,2048,3840],\"imageSizes\":[16,32,48,64,96,128,256,384],\"path\":\"/_next/image\",\"loader\":\"default\",\"loaderFile\":\"\",\"domains\":[],\"disableStaticImages\":false,\"minimumCacheTTL\":60,\"formats\":[\"image/webp\"],\"dangerouslyAllowSVG\":false,\"contentSecurityPolicy\":\"script-src 'none'; frame-src 'none'; sandbox;\",\"contentDispositionType\":\"inline\",\"remotePatterns\":[],\"unoptimized\":false},\"devIndicators\":{\"buildActivity\":true,\"buildActivityPosition\":\"bottom-right\"},\"onDemandEntries\":{\"maxInactiveAge\":60000,\"pagesBufferLength\":5},\"amp\":{\"canonicalBase\":\"\"},\"basePath\":\"\",\"sassOptions\":{},\"trailingSlash\":false,\"i18n\":null,\"productionBrowserSourceMaps\":false,\"optimizeFonts\":true,\"excludeDefaultMomentLocales\":true,\"serverRuntimeConfig\":{},\"publicRuntimeConfig\":{},\"reactProductionProfiling\":false,\"reactStrictMode\":null,\"httpAgentOptions\":{\"keepAlive\":true},\"outputFileTracing\":true,\"staticPageGenerationTimeout\":60,\"swcMinify\":true,\"modularizeImports\":{\"@mui/icons-material\":{\"transform\":\"@mui/icons-material/{{member}}\"},\"lodash\":{\"transform\":\"lodash/{{member}}\"}},\"experimental\":{\"multiZoneDraftMode\":false,\"prerenderEarlyExit\":false,\"serverMinification\":true,\"serverSourceMaps\":false,\"linkNoTouchStart\":false,\"caseSensitiveRoutes\":false,\"clientRouterFilter\":true,\"clientRouterFilterRedirects\":false,\"fetchCacheKeyPrefix\":\"\",\"middlewarePrefetch\":\"flexible\",\"optimisticClientCache\":true,\"manualClientBasePath\":false,\"cpus\":11,\"memoryBasedWorkersCount\":false,\"isrFlushToDisk\":true,\"workerThreads\":false,\"optimizeCss\":false,\"nextScriptWorkers\":false,\"scrollRestoration\":false,\"externalDir\":false,\"disableOptimizedLoading\":false,\"gzipSize\":true,\"craCompat\":false,\"esmExternals\":true,\"fullySpecified\":false,\"outputFileTracingRoot\":\"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\",\"swcTraceProfiling\":false,\"forceSwcTransforms\":false,\"largePageDataBytes\":128000,\"adjustFontFallbacks\":false,\"adjustFontFallbacksWithSizeAdjust\":false,\"typedRoutes\":false,\"instrumentationHook\":false,\"bundlePagesExternals\":false,\"parallelServerCompiles\":false,\"parallelServerBuildTraces\":false,\"ppr\":false,\"missingSuspenseWithCSRBailout\":true,\"optimizeServerReact\":true,\"useEarlyImport\":false,\"staleTimes\":{\"dynamic\":30,\"static\":300},\"optimizePackageImports\":[\"lucide-react\",\"date-fns\",\"lodash-es\",\"ramda\",\"antd\",\"react-bootstrap\",\"ahooks\",\"@ant-design/icons\",\"@headlessui/react\",\"@headlessui-float/react\",\"@heroicons/react/20/solid\",\"@heroicons/react/24/solid\",\"@heroicons/react/24/outline\",\"@visx/visx\",\"@tremor/react\",\"rxjs\",\"@mui/material\",\"@mui/icons-material\",\"recharts\",\"react-use\",\"@material-ui/core\",\"@material-ui/icons\",\"@tabler/icons-react\",\"mui-core\",\"react-icons/ai\",\"react-icons/bi\",\"react-icons/bs\",\"react-icons/cg\",\"react-icons/ci\",\"react-icons/di\",\"react-icons/fa\",\"react-icons/fa6\",\"react-icons/fc\",\"react-icons/fi\",\"react-icons/gi\",\"react-icons/go\",\"react-icons/gr\",\"react-icons/hi\",\"react-icons/hi2\",\"react-icons/im\",\"react-icons/io\",\"react-icons/io5\",\"react-icons/lia\",\"react-icons/lib\",\"react-icons/lu\",\"react-icons/md\",\"react-icons/pi\",\"react-icons/ri\",\"react-icons/rx\",\"react-icons/si\",\"react-icons/sl\",\"react-icons/tb\",\"react-icons/tfi\",\"react-icons/ti\",\"react-icons/vsc\",\"react-icons/wi\"]},\"configFile\":\"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\next.config.js\",\"configFileName\":\"next.config.js\"}\nconst maybeJSONParse = (str)=>str ? JSON.parse(str) : undefined;\nconst buildManifest = self.__BUILD_MANIFEST;\nconst reactLoadableManifest = maybeJSONParse(self.__REACT_LOADABLE_MANIFEST);\nconst rscManifest = (_self___RSC_MANIFEST = self.__RSC_MANIFEST) == null ? void 0 : _self___RSC_MANIFEST[\"/clinical-impression/page\"];\nconst rscServerManifest = maybeJSONParse(self.__RSC_SERVER_MANIFEST);\nconst subresourceIntegrityManifest = sriEnabled ? maybeJSONParse(self.__SUBRESOURCE_INTEGRITY_MANIFEST) : undefined;\nconst nextFontManifest = maybeJSONParse(self.__NEXT_FONT_MANIFEST);\nconst interceptionRouteRewrites = maybeJSONParse(self.__INTERCEPTION_ROUTE_REWRITE_MANIFEST) ?? [];\nif (rscManifest && rscServerManifest) {\n    setReferenceManifestsSingleton({\n        clientReferenceManifest: rscManifest,\n        serverActionsManifest: rscServerManifest,\n        serverModuleMap: createServerModuleMap({\n            serverActionsManifest: rscServerManifest,\n            pageName: \"/clinical-impression/page\"\n        })\n    });\n}\nconst render = getRender({\n    pagesType: PAGE_TYPES.APP,\n    dev,\n    page: \"/clinical-impression/page\",\n    appMod,\n    pageMod,\n    errorMod,\n    error500Mod,\n    Document,\n    buildManifest,\n    renderToHTML,\n    reactLoadableManifest,\n    clientReferenceManifest: isServerComponent ? rscManifest : null,\n    serverActionsManifest: isServerComponent ? rscServerManifest : null,\n    serverActions: isServerComponent ? serverActions : undefined,\n    subresourceIntegrityManifest,\n    config: nextConfig,\n    buildId: process.env.__NEXT_BUILD_ID,\n    nextFontManifest,\n    incrementalCacheHandler,\n    interceptionRouteRewrites\n});\nexport const ComponentMod = pageMod;\nexport default function nHandler(opts) {\n    return adapter({\n        ...opts,\n        IncrementalCache,\n        handler: render\n    });\n}\n\n//# sourceMappingURL=edge-ssr-app.js.map","import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\Toby\\\\Downloads\\\\node-v24.11.1-win-x64\\\\app123\\\\app\\\\clinical-impression\\\\page.tsx\");\n","\"use client\"\r\n\r\nimport { useSearchParams, useRouter } from 'next/navigation'\r\nimport { useState, useEffect, useRef } from 'react'\r\nimport { validateAllSections, getSectionDisplayName } from '../utils/validation'\r\nimport { handleAddPatient as addPatientService, handleSubmitEPRF as submitEPRFService, getCurrentPatientLetter } from '../utils/eprfService'\r\nimport ConfirmationModal, { ValidationErrorModal, SuccessModal } from '../components/ConfirmationModal'\r\nimport TransferModal from '../components/TransferModal'\r\nimport { getCurrentUser } from '../utils/userService'\r\nimport { isAdmin } from '../utils/apiClient'\r\n\r\nexport const runtime = 'edge'\r\n\r\nexport default function ClinicalImpressionPage() {\r\n  const searchParams = useSearchParams()\r\n  const router = useRouter()\r\n  const incidentId = searchParams?.get('id') || ''\r\n  const fleetId = searchParams?.get('fleetId') || ''\r\n\r\n  const [incompleteSections, setIncompleteSections] = useState<string[]>([])\r\n  const [patientLetter, setPatientLetter] = useState('A')\r\n\r\n  // Modal states\r\n  const [showAddPatientModal, setShowAddPatientModal] = useState(false)\r\n  const [showSubmitModal, setShowSubmitModal] = useState(false)\r\n  const [showTransferModal, setShowTransferModal] = useState(false)\r\n  const [showValidationErrorModal, setShowValidationErrorModal] = useState(false)\r\n  const [showSuccessModal, setShowSuccessModal] = useState(false)\r\n  const [validationErrorsData, setValidationErrorsData] = useState<{[section: string]: string[]}>({})\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n  const [successMessage, setSuccessMessage] = useState({ title: '', message: '' })\r\n\r\n  const [formData, setFormData] = useState({\r\n    primaryClinicalImpression: '',\r\n    secondaryClinicalImpression: '',\r\n    clinicalImpressionNotes: ''\r\n  })\r\n\r\n  const [showPrimaryDropdown, setShowPrimaryDropdown] = useState(false)\r\n  const [showSecondaryDropdown, setShowSecondaryDropdown] = useState(false)\r\n  const [primarySearchQuery, setPrimarySearchQuery] = useState('')\r\n  const [secondarySearchQuery, setSecondarySearchQuery] = useState('')\r\n  const [listSearchQuery, setListSearchQuery] = useState('')\r\n  const [showListModal, setShowListModal] = useState(false)\r\n  const [listField, setListField] = useState<'primary' | 'secondary'>('primary')\r\n\r\n  const primaryInputRef = useRef<HTMLInputElement>(null)\r\n  const secondaryInputRef = useRef<HTMLInputElement>(null)\r\n\r\n  // Complete clinical impressions list from screenshots\r\n  const clinicalImpressions = [\r\n    'Abdominal aortic aneurysm',\r\n    'Abdominal distension',\r\n    'Abdominal mass',\r\n    'Abdominal pain - cause unknown',\r\n    'Abdominal pain (ACC & MED)',\r\n    'Abdominal pain in pregnancy',\r\n    'Abnormal behaviour',\r\n    'Abnormal gait',\r\n    'Abnormal involuntary movement',\r\n    'Abnormal vision',\r\n    'Abrasion',\r\n    'Abrasion of abdominal wall (ACC)',\r\n    'Abrasion of ankle (ACC)',\r\n    'Abrasion of back (ACC)',\r\n    'Abrasion of buttock (ACC)',\r\n    'Abrasion of chest wall (ACC)',\r\n    'Abrasion of face (ACC)',\r\n    'Abrasion of finger (ACC)',\r\n    'Abrasion of flank (ACC)',\r\n    'Abrasion of foot (ACC)',\r\n    'Abrasion of forearm area (ACC)',\r\n    'Abrasion of hand (ACC)',\r\n    'Abrasion of head &or neck (ACC)',\r\n    'Abrasion of hip (ACC)',\r\n    'Abrasion of knee (ACC)',\r\n    'Abrasion of lower leg (ACC)',\r\n    'Abrasion of multiple fingers (ACC)',\r\n    'Abrasion of scalp (ACC)',\r\n    'Abrasion of shoulder (ACC)',\r\n    'Abrasion of thigh (ACC)',\r\n    'Abrasion of toe(s) (ACC)',\r\n    'Abrasion of trunk (ACC)',\r\n    'Abrasion of upper arm (ACC)',\r\n    'Abscess',\r\n    'Abscess of ankle',\r\n    'Abscess of back except buttock',\r\n    'Abscess of buttock',\r\n    'Abscess of chest wall',\r\n    'Abscess of ear',\r\n    'Abscess of elbow',\r\n    'Abscess of eye',\r\n    'Abscess of face',\r\n    'Abscess of finger(s)',\r\n    'Abscess of flank',\r\n    'Abscess of foot',\r\n    'Abscess of forearm',\r\n    'Abscess of groin',\r\n    'Abscess of hand',\r\n    'Abscess of hip',\r\n    'Abscess of jaw',\r\n    'Abscess of knee',\r\n    'Abscess of lip',\r\n    'Abscess of lower leg',\r\n    'Abscess of neck',\r\n    'Abscess of nose',\r\n    'Abscess of shoulder',\r\n    'Abscess of thigh',\r\n    'Abscess of toe',\r\n    'Abscess of tongue',\r\n    'Abscess of upper arm',\r\n    'Abscess of wrist',\r\n    'Accidental poisoning by drug (ACC)',\r\n    'Accidental poisoning by substance other than drug (ACC)',\r\n    'Accidental removal of catheter',\r\n    'Acute confusion',\r\n    'Acute drug intoxication',\r\n    'Acute low back pain',\r\n    'Acute myocardial infarction of anterior wall',\r\n    'Acute myocardial infarction of anterolateral wall',\r\n    'Acute myocardial infarction of inferior wall',\r\n    'Acute myocardial infarction of inferolateral wall',\r\n    'Acute myocardial infarction of inferoposterior wall',\r\n    'Acute myocardial infarction of septum',\r\n    'Acute pain',\r\n    'Acute pelvic pain (ACC and MED)',\r\n    'Adverse reaction to drug',\r\n    'Agitated state',\r\n    'Alcohol abuse',\r\n    'Alcohol intoxication',\r\n    'Allergic contact dermatitis',\r\n    'Allergic reaction to drug (ACC)',\r\n    'Allergic reaction to food (ACC)',\r\n    'Allergy',\r\n    'Altered sensation',\r\n    'Amnesia',\r\n    'Amputation',\r\n    'Amputation of ear (ACC)',\r\n    'Amputation of finger (ACC)',\r\n    'Amputation of foot (ACC)',\r\n    'Amputation of hand (ACC)',\r\n    'Amputation of limb (ACC)',\r\n    'Amputation of thumb (ACC)',\r\n    'Amputation of toe (ACC)',\r\n    'Anaphylaxis',\r\n    'Angina',\r\n    'Angio-oedema',\r\n    'Animal bite',\r\n    'Antepartum haemorrhage',\r\n    'Anterior chest wall pain (ACC & MED)',\r\n    'Anxiety',\r\n    'Aphasia',\r\n    'Apnoea',\r\n    'Appendicitis',\r\n    'Arthritis',\r\n    'Asphyxiation',\r\n    'Aspiration of food (ACC)',\r\n    'Aspiration pneumonia (ACC & MED)',\r\n    'Assault (ACC)',\r\n    'Asthma',\r\n    'At risk for falls',\r\n    'At risk for suicide',\r\n    'Atrial fibrillation',\r\n    'Atrial flutter',\r\n    'Atrial tachycardia',\r\n    'Atypical chest pain',\r\n    'Avulsion',\r\n    'Avulsion of eye (ACC)',\r\n    'Avulsion of scalp (ACC)',\r\n    'Biliary colic',\r\n    'Bladder pain',\r\n    'Blocked catheter',\r\n    'Bradycardia',\r\n    'Breathing painful',\r\n    'Breathing problem of unknown cause',\r\n    'Breech presentation',\r\n    'Bronchiectasis',\r\n    'Burn <10% (ACC)',\r\n    'Burn >90% (ACC)',\r\n    'Burn 10-19% (ACC)',\r\n    'Burn 20-29% (ACC)',\r\n    'Burn 30-39% (ACC)',\r\n    'Burn 40-49% (ACC)',\r\n    'Burn 50-59% (ACC)',\r\n    'Burn 60-69% (ACC)',\r\n    'Burn 70-79% (ACC)',\r\n    'Burn 80-89% (ACC)',\r\n    'Cardiac arrest',\r\n    'Cardiac chest pain',\r\n    'Cardiac dysrhythmia',\r\n    'Cardiogenic pulmonary oedema',\r\n    'Cardiogenic shock',\r\n    'Child at risk (ACC)',\r\n    'Chronic arthritis',\r\n    'Chronic back pain',\r\n    'Chronic constipation',\r\n    'Chronic low back pain',\r\n    'Chronic obstructive pulmonary disease',\r\n    'Chronic pain',\r\n    'Collapse',\r\n    'Collapse - cause unknown',\r\n    'Complication occurring during labour and delivery',\r\n    'Complication of catheter',\r\n    'Complication of haemodialysis',\r\n    'Complication of urinary catheter',\r\n    'Congestive heart failure',\r\n    'Constipation',\r\n    'Contusion of abdominal wall (ACC)',\r\n    'Contusion of ankle (ACC)',\r\n    'Contusion of back (ACC)',\r\n    'Contusion of breast (ACC)',\r\n    'Contusion of buttock (ACC)',\r\n    'Contusion of cheek (ACC)',\r\n    'Contusion of chest (ACC)',\r\n    'Contusion of chin (ACC)',\r\n    'Contusion of clavicular area (ACC)',\r\n    'Contusion of coccyx (ACC)',\r\n    'Contusion of ear (ACC)',\r\n    'Contusion of elbow (ACC)',\r\n    'Contusion of elbow &or forearm (ACC)',\r\n    'Contusion of eye socket (black eye) (ACC)',\r\n    'Contusion of face (ACC)',\r\n    'Contusion of finger (ACC)',\r\n    'Contusion of flank (ACC)',\r\n    'Contusion of foot (ACC)',\r\n    'Contusion of forearm (ACC)',\r\n    'Contusion of forehead (ACC)',\r\n    'Contusion of genitals (ACC)',\r\n    'Contusion of groin (ACC)',\r\n    'Contusion of heel (ACC)',\r\n    'Contusion of hip (ACC)',\r\n    'Contusion of jaw (ACC)',\r\n    'Contusion of knee (ACC)',\r\n    'Contusion of lip (ACC)',\r\n    'Contusion of lower back (ACC)',\r\n    'Contusion of lower leg (ACC)',\r\n    'Contusion of mouth (ACC)',\r\n    'Contusion of multiple fingers (ACC)',\r\n    'Contusion of multiple sites (ACC - describe in notes)',\r\n    'Contusion of neck (ACC)',\r\n    'Contusion of nose (ACC)',\r\n    'Contusion of pelvic region (ACC)',\r\n    'Contusion of scalp (ACC)',\r\n    'Contusion of shoulder region (ACC)',\r\n    'Contusion of thigh (ACC)',\r\n    'Contusion of throat (ACC)',\r\n    'Contusion of toe(s) (ACC)',\r\n    'Contusion of upper arm (ACC)',\r\n    'Contusion of wrist (ACC)',\r\n    'Contusion of wrist &or hand (ACC)',\r\n    'Cramp',\r\n    'Crush injury of ankle &or foot excluding toe(s) (ACC)',\r\n    'Crush injury of elbow &or forearm (ACC)',\r\n    'Crush injury of hand excluding finger(s) (ACC)',\r\n    'Crush injury of head &or neck (ACC)',\r\n    'Crush injury of hip &or thigh (ACC)',\r\n    'Crush injury of knee &or lower leg (ACC)',\r\n    'Crush injury of shoulder &or upper arm (ACC)',\r\n    'Crush injury of toe(s) (ACC)',\r\n    'Crush injury of trunk (ACC)',\r\n    'Crush injury of wrist &or hand (ACC)',\r\n    'Deceased',\r\n    'Decreased mobility',\r\n    'Degloving injury of finger (ACC)',\r\n    'Degloving injury of hand (ACC)',\r\n    'Degloving injury of multiple fingers (ACC)',\r\n    'Dehydration',\r\n    'Dementia',\r\n    'Dermatitis',\r\n    'Diarrhoea',\r\n    'Diarrhoea and vomiting',\r\n    'Difficulty passing urine',\r\n    'Difficulty swallowing',\r\n    'Dislocated ankle (ACC)',\r\n    'Dislocated elbow (ACC)',\r\n    'Dislocated finger or thumb (ACC)',\r\n    'Dislocated hip (ACC)',\r\n    'Dislocated patella (ACC)',\r\n    'Dislocated shoulder (ACC)',\r\n    'Dislocated wrist (ACC)',\r\n    'Dislocation',\r\n    'Dislocations sprains and strains involving head with neck (ACC)',\r\n    'Disorder of implantable defibrillator',\r\n    'DKA - Diabetic ketoacidosis',\r\n    'Drug withdrawal',\r\n    'Dysarthria',\r\n    'Dysphasia',\r\n    'Dysuria',\r\n    'Ear problem',\r\n    'Ectopic pregnancy',\r\n    'End of Life Care',\r\n    'Epigastric pain',\r\n    'Epistaxis',\r\n    'Exacerbation of CORD',\r\n    'Explosion (ACC)',\r\n    'Fall (ACC)',\r\n    'Fall minor injury',\r\n    'Fall without injury',\r\n    'Flank pain',\r\n    'Foreign body in anus &or rectum (ACC)',\r\n    'Foreign body in bladder &or urethra (ACC)',\r\n    'Foreign body in ear (ACC)',\r\n    'Foreign body in mouth &or oesophagus &or stomach (ACC)',\r\n    'Foreign body in nose (ACC)',\r\n    'Foreign body in pharynx &or larynx (ACC)',\r\n    'Foreign body in vulva &or vagina (ACC)',\r\n    'Foreign body on external eye (ACC)',\r\n    'Fracture',\r\n    'Fracture of ankle (ACC)',\r\n    'Fracture of clavicle (ACC)',\r\n    'Fracture of face bones (ACC)',\r\n    'Fracture of finger(s) (ACC)',\r\n    'Fracture of foot (ACC)',\r\n    'Fracture of humerus (ACC)',\r\n    'Fracture of knee (ACC)',\r\n    'Fracture of neck of femur (ACC)',\r\n    'Fracture of patella (ACC)',\r\n    'Fracture of pelvis (ACC)',\r\n    'Fracture of radius &or ulna (ACC)',\r\n    'Fracture of ribs (ACC)',\r\n    'Fracture of scapula (ACC)',\r\n    'Fracture of shaft of femur (ACC)',\r\n    'Fracture of skull (ACC)',\r\n    'Fracture of sternum (ACC)',\r\n    'Fracture of tibia &or fibula (ACC)',\r\n    'Fracture of toe(s) (ACC)',\r\n    'Fracture of wrist &or hand (ACC)',\r\n    'Fractures involving multiple body regions (ACC)',\r\n    'Fractures of multiple limbs (ACC)',\r\n    'Frostbite of face (ACC)',\r\n    'Frostbite of foot (ACC)',\r\n    'Frostbite of hand (ACC)',\r\n    'Gallstone',\r\n    'Gangrene of foot',\r\n    'Gangrene of hand',\r\n    'Gastrointestinal bleeding',\r\n    'Generalised aches and pains (ACC & MED)',\r\n    'Generally unwell',\r\n    'Haematemesis',\r\n    'Haematoma (ACC)',\r\n    'Haematuria',\r\n    'Haematuria ; Blood in urine',\r\n    'Haemoptysis',\r\n    'Haemorrhage',\r\n    'Haemothorax',\r\n    'Hallucinations',\r\n    'Hanging',\r\n    'Hanging strangulation or suffocation of unknown intent (ACC)',\r\n    'Headache',\r\n    'Hearing problem',\r\n    'Heat stroke (ACC & MED)',\r\n    'Hernia',\r\n    'Hernia of abdominal wall',\r\n    'Hip pain',\r\n    'Hyperemesis of pregnancy',\r\n    'Hyperglycaemia',\r\n    'Hyperkalaemia',\r\n    'Hyperthermia',\r\n    'Hyperventilation',\r\n    'Hypoglycaemia',\r\n    'Hypothermia',\r\n    'Hypovolaemia',\r\n    'Hypovolaemic shock (ACC & MED)',\r\n    'Hypoxia',\r\n    'ILI - Influenza-like illness',\r\n    'Illness of unknown cause',\r\n    'Incisional hernia',\r\n    'Infected face',\r\n    'Infected hand',\r\n    'Infection after injection infusion transfusion or vaccination',\r\n    'Infection of ear',\r\n    'Infection of nail(s)',\r\n    'Infection of obstetric surgical wound',\r\n    'Infection of peritoneal dialysis catheter',\r\n    'Inguinal hernia',\r\n    'Insect sting (ACC)',\r\n    'Intentional hanging (ACC)',\r\n    'Intentional Poisoning',\r\n    'Intentional poisoning by drug (ACC)',\r\n    'Intentional poisoning by substance other than drug (ACC)',\r\n    'Joint pain',\r\n    'Joint swelling (ACC & MED)',\r\n    'Labour',\r\n    'Laceration',\r\n    'Laceration of abdomen (ACC)',\r\n    'Laceration of ankle (ACC)',\r\n    'Laceration of back (ACC)',\r\n    'Laceration of breast (ACC)',\r\n    'Laceration of buttock (ACC)',\r\n    'Laceration of calf (ACC)',\r\n    'Laceration of cheek (ACC)',\r\n    'Laceration of chest wall (ACC)',\r\n    'Laceration of ear region (ACC)',\r\n    'Laceration of elbow (ACC)',\r\n    'Laceration of eye (ACC)',\r\n    'Laceration of eye region (ACC)',\r\n    'Laceration of eyebrow (ACC)',\r\n    'Laceration of eyelid (ACC)',\r\n    'Laceration of finger (ACC)',\r\n    'Laceration of foot (ACC)',\r\n    'Laceration of forearm (ACC)',\r\n    'Laceration of forehead (ACC)',\r\n    'Laceration of genitalia (ACC)',\r\n    'Laceration of hand (ACC)',\r\n    'Laceration of head (ACC)',\r\n    'Laceration of head and neck (ACC)',\r\n    'Laceration of hip (ACC)',\r\n    'Laceration of knee (ACC)',\r\n    'Laceration of lip (ACC)',\r\n    'Laceration of lower leg (ACC)',\r\n    'Laceration of neck (ACC)',\r\n    'Laceration of nose (ACC)',\r\n    'Laceration of shin (ACC)',\r\n    'Laceration of shoulder (ACC)',\r\n    'Laceration of thigh (ACC)',\r\n    'Laceration of thumb (ACC)',\r\n    'Laceration of toe (ACC)',\r\n    'Laceration of upper arm (ACC)',\r\n    'Laceration of upper limb (ACC)',\r\n    'Laceration of wrist (ACC)',\r\n    'Leaking abdominal aortic aneurysm',\r\n    'Left bundle branch block',\r\n    'Left flank pain',\r\n    'Left hemiparesis',\r\n    'Left iliac fossa pain',\r\n    'Left lower quadrant pain',\r\n    'Left pneumothorax',\r\n    'Left sided abdominal pain',\r\n    'Left upper quadrant pain',\r\n    'Lethargy',\r\n    'Lightheadedness',\r\n    'Low back pain',\r\n    'Major trauma involving multiple body regions',\r\n    'Malaise',\r\n    'Measles',\r\n    'Melaena',\r\n    'Meningococcaemia',\r\n    'Meningococcal infectious disease',\r\n    'Mental health problem',\r\n    'Migraine',\r\n    'Miscarriage',\r\n    'Mobitz type 1 heart block',\r\n    'Mobitz type 2 heart block',\r\n    'Muscle pain (ACC & MED)',\r\n    'Musculoskeletal pain',\r\n    'Myocardial ischaemia',\r\n    'NAI - Non-accidental injury (ACC)',\r\n    'Nausea',\r\n    'Nausea and vomiting',\r\n    'Neck pain',\r\n    'No abnormality detected',\r\n    'Non-cardiac chest pain',\r\n    'Other injury (ACC - describe in notes)',\r\n    'Other abrasion &or friction burn (ACC - describe in notes)',\r\n    'Other illness or medical condition (describe in notes)',\r\n    'Pain',\r\n    'Palliative care',\r\n    'Palpitations',\r\n    'Paralysis (ACC)',\r\n    'Paraplegia',\r\n    'Pericarditis',\r\n    'Peripheral ischaemia',\r\n    'Peripheral oedema',\r\n    'Pharyngitis ; Sore throat',\r\n    'Photophobia',\r\n    'Pleuritic pain',\r\n    'Pneumonia',\r\n    'Pneumothorax',\r\n    'Post-ictal state',\r\n    'Postoperative wound infection',\r\n    'Postpartum haemorrhage',\r\n    'Pregnancy problem',\r\n    'Premature delivery',\r\n    'Premature labour',\r\n    'Presentation for social reasons',\r\n    'Priapism',\r\n    'Pulmonary embolism',\r\n    'PV bleeding/Vaginal Bleeding',\r\n    'Quadriplegia',\r\n    'Renal Colic',\r\n    'Respiratory arrest',\r\n    'Respiratory tract infection',\r\n    'Retained placenta',\r\n    'Right bundle branch block',\r\n    'Right flank pain',\r\n    'Right Heart Failure',\r\n    'Right hemiparesis',\r\n    'Right iliac fossa pain',\r\n    'Right lower quadrant pain',\r\n    'Right pneumothorax',\r\n    'Right sided abdominal pain',\r\n    'Right upper quadrant pain',\r\n    'Rotavirus',\r\n    'Rupture of abdominal aortic aneurysm',\r\n    'Rupture of achilles tendon (ACC)',\r\n    'Sciatica',\r\n    'Self inflicted lacerations to wrist',\r\n    'Sepsis (ACC & MED)',\r\n    'Sexual abuse (ACC)',\r\n    'Sexual assault (ACC)',\r\n    'Shock (ACC & MED)',\r\n    'Shortness of breath',\r\n    'Skin tear',\r\n    'Smoke Inhalation',\r\n    'Spinal cord injury',\r\n    'Sprain of ankle &or foot (ACC)',\r\n    'Sprain of elbow &or forearm (ACC)',\r\n    'Sprain of finger (ACC)',\r\n    'Sprain of hip (ACC)',\r\n    'Sprain of knee (ACC)',\r\n    'Sprain of lumbar back (ACC)',\r\n    'Sprain of shoulder (ACC)',\r\n    'Sprain of thumb',\r\n    'Sprain of wrist &or hand (ACC)',\r\n    'ST elevation myocardial infarction',\r\n    'Stab wound',\r\n    'Status epilepticus',\r\n    'Substance abuse (ACC)',\r\n    'SUDI - Sudden unexpected death of an infant',\r\n    'Suicidal',\r\n    'Sunburn (ACC)',\r\n    'Superficial abrasion (ACC)',\r\n    'Superficial bruising (ACC)',\r\n    'Supraventricular tachycardia',\r\n    'Suspected victim of child abuse',\r\n    'Swollen eye(s) (ACC)',\r\n    'Tachycardia',\r\n    'Tachypnoea',\r\n    'Third degree heart block',\r\n    'Thoracic back pain',\r\n    'Toothache',\r\n    'Transient ischaemic attack',\r\n    'Traumatic brain injury',\r\n    'Traumatic cervical spine pain (ACC)',\r\n    'Traumatic haemothorax (ACC)',\r\n    'Traumatic pneumothorax (ACC)',\r\n    'Undifferentiated illness',\r\n    'Unintentional Poisoning',\r\n    'Urinary Tract Infection',\r\n    'Urticaria',\r\n    'Vaginal bleeding',\r\n    'Varicose veins of the leg with rupture (ACC & MED)',\r\n    'Ventricular fibrillation',\r\n    'Ventricular tachycardia',\r\n    'Visual difficulty',\r\n    'Weakness present',\r\n    'Wound of ankle (ACC)',\r\n    'Wound of buttock (ACC)',\r\n    'Wound of chest (ACC)',\r\n    'Wound of ear (ACC)',\r\n    'Wound of face (ACC)',\r\n    'Wound of finger(s) (ACC)',\r\n    'Wound of forearm (ACC)',\r\n    'Wound of hand (ACC)',\r\n    'Wound of hip &or thigh (ACC)',\r\n    'Wound of knee (ACC)',\r\n    'Wound of lip (ACC)',\r\n    'Wound of lower abdomen (ACC)',\r\n    'Wound of mouth (ACC)',\r\n    'Wound of neck (ACC)',\r\n    'Wound of nose (ACC)',\r\n    'Wound of scalp (ACC)',\r\n    'Wound of upper abdomen (ACC)',\r\n    'Wound of upper arm (ACC)',\r\n    'Wounds of multiple areas (ACC)'\r\n  ]\r\n\r\n  // Load saved data on mount\r\n  useEffect(() => {\r\n    if (incidentId) {\r\n      const saved = localStorage.getItem(`clinical_impression_${incidentId}`)\r\n      if (saved) {\r\n        try {\r\n          setFormData(JSON.parse(saved))\r\n        } catch (e) {\r\n          console.error('Failed to parse saved data:', e)\r\n        }\r\n      }\r\n    }\r\n  }, [incidentId])\r\n\r\n  // Save data whenever it changes\r\n  useEffect(() => {\r\n    if (incidentId) {\r\n      localStorage.setItem(`clinical_impression_${incidentId}`, JSON.stringify(formData))\r\n    }\r\n  }, [formData, incidentId])\r\n\r\n  // Close dropdowns when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      const target = e.target as HTMLElement\r\n      if (!target.closest('.form-row')) {\r\n        setShowPrimaryDropdown(false)\r\n        setShowSecondaryDropdown(false)\r\n      }\r\n    }\r\n    document.addEventListener('click', handleClickOutside)\r\n    return () => document.removeEventListener('click', handleClickOutside)\r\n  }, [])\r\n\r\n  const handleLogout = () => {\r\n    router.push('/')\r\n  }\r\n\r\n  const handleHome = () => {\r\n    const params = new URLSearchParams({ fleetId })\r\n    router.push(`/dashboard?${params}`)\r\n  }\r\n\r\n  const handleAdminPanel = () => {\r\n    const user = getCurrentUser()\r\n    if (user && isAdmin(user.discordId)) {\r\n      router.push('/admin')\r\n    }\r\n  }\r\n\r\n  const handleTransferClick = () => {\r\n    setShowTransferModal(true)\r\n  }\r\n\r\n  const handleTransferComplete = (targetUser: any) => {\r\n    const { transferAllPatients } = require('../utils/eprfHistoryService')\r\n    transferAllPatients(incidentId, targetUser.discordId, targetUser.callsign)\r\n    \r\n    setShowTransferModal(false)\r\n    setSuccessMessage({\r\n      title: 'ePRF Transferred',\r\n      message: `The ePRF has been transferred to ${targetUser.callsign}. You will be redirected to the dashboard.`\r\n    })\r\n    setShowSuccessModal(true)\r\n    setTimeout(() => {\r\n      handleHome()\r\n    }, 2000)\r\n  }\r\n\r\n  const navigateTo = (section: string) => {\r\n    const params = new URLSearchParams({ id: incidentId, fleetId })\r\n    if (section === 'incident') router.push(`/incident?${params}`)\r\n    else if (section === 'patient-info') router.push(`/patient-info?${params}`)\r\n    else if (section === 'primary-survey') router.push(`/primary-survey?${params}`)\r\n    else if (section === 'vital-obs') router.push(`/vital-obs?${params}`)\r\n    else if (section === 'hx-complaint') router.push(`/hx-complaint?${params}`)\r\n    else if (section === 'past-medical-history') router.push(`/past-medical-history?${params}`)\r\n    else if (section === 'clinical-impression') router.push(`/clinical-impression?${params}`)\r\n    else if (section === 'disposition') router.push(`/disposition?${params}`)\r\n    else if (section === 'media') router.push(`/media?${params}`)\r\n  }\r\n\r\n  const handlePrevious = () => {\r\n    navigateTo('past-medical-history')\r\n  }\r\n\r\n  const handleNext = () => {\r\n    const params = new URLSearchParams({ id: incidentId, fleetId })\r\n    router.push(`/disposition?${params}`)\r\n  }\r\n\r\n  const handleSubmitEPRF = () => {\r\n    const result = validateAllSections(incidentId)\r\n    setIncompleteSections(result.incompleteSections)\r\n    \r\n    if (result.isValid) {\r\n      setShowSubmitModal(true)\r\n    } else {\r\n      setValidationErrorsData(result.fieldErrors)\r\n      setShowValidationErrorModal(true)\r\n    }\r\n  }\r\n\r\n  const confirmSubmitEPRF = async () => {\r\n    setIsSubmitting(true)\r\n    try {\r\n      const result = await submitEPRFService(incidentId, fleetId)\r\n      \r\n      if (result.success) {\r\n        setShowSubmitModal(false)\r\n        setSuccessMessage({\r\n          title: 'ePRF Submitted Successfully!',\r\n          message: `The ePRF for Patient ${patientLetter} has been submitted.\\n\\nA PDF copy has been downloaded to your device and the record has been saved.`\r\n        })\r\n        setShowSuccessModal(true)\r\n      } else if (result.validationResult) {\r\n        setShowSubmitModal(false)\r\n        setValidationErrorsData(result.validationResult.fieldErrors)\r\n        setIncompleteSections(result.validationResult.incompleteSections)\r\n        setShowValidationErrorModal(true)\r\n      }\r\n    } catch (error) {\r\n      console.error('Submit error:', error)\r\n      alert('An error occurred while submitting. Please try again.')\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  const handleAddPatientClick = () => {\r\n    setShowAddPatientModal(true)\r\n  }\r\n\r\n  const confirmAddPatient = async () => {\r\n    setIsSubmitting(true)\r\n    try {\r\n      const result = await addPatientService(incidentId)\r\n      \r\n      if (result.success) {\r\n        setShowAddPatientModal(false)\r\n        setPatientLetter(result.newLetter)\r\n        setSuccessMessage({\r\n          title: 'Patient Added Successfully!',\r\n          message: `Patient ${patientLetter} has been saved.\\n\\nYou are now working on Patient ${result.newLetter}.\\n\\nThe form has been cleared for the new patient.`\r\n        })\r\n        setShowSuccessModal(true)\r\n        \r\n        setTimeout(() => {\r\n          const params = new URLSearchParams({ id: incidentId, fleetId })\r\n          router.push(`/patient-info?${params}`)\r\n        }, 2000)\r\n      } else {\r\n        alert(result.error || 'Failed to add patient')\r\n      }\r\n    } catch (error) {\r\n      console.error('Add patient error:', error)\r\n      alert('An error occurred. Please try again.')\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  // Load patient letter on mount\r\n  useEffect(() => {\r\n    if (incidentId) {\r\n      setPatientLetter(getCurrentPatientLetter(incidentId))\r\n    }\r\n  }, [incidentId])\r\n\r\n  const hasFieldError = (field: string) => {\r\n    return incompleteSections.includes('clinical-impression') && (\r\n      (field === 'primaryClinicalImpression' && !formData.primaryClinicalImpression)\r\n    )\r\n  }\r\n\r\n  const handlePrimarySearch = () => {\r\n    setPrimarySearchQuery(formData.primaryClinicalImpression)\r\n    setShowPrimaryDropdown(true)\r\n    setShowSecondaryDropdown(false)\r\n  }\r\n\r\n  const handleSecondarySearch = () => {\r\n    setSecondarySearchQuery(formData.secondaryClinicalImpression)\r\n    setShowSecondaryDropdown(true)\r\n    setShowPrimaryDropdown(false)\r\n  }\r\n\r\n  const openList = (field: 'primary' | 'secondary') => {\r\n    setListField(field)\r\n    setListSearchQuery('')\r\n    setShowListModal(true)\r\n    setShowPrimaryDropdown(false)\r\n    setShowSecondaryDropdown(false)\r\n  }\r\n\r\n  const selectPrimaryImpression = (impression: string) => {\r\n    setFormData(prev => ({ ...prev, primaryClinicalImpression: impression }))\r\n    setShowPrimaryDropdown(false)\r\n  }\r\n\r\n  const selectSecondaryImpression = (impression: string) => {\r\n    setFormData(prev => ({ ...prev, secondaryClinicalImpression: impression }))\r\n    setShowSecondaryDropdown(false)\r\n  }\r\n\r\n  const selectFromList = (impression: string) => {\r\n    if (listField === 'primary') {\r\n      setFormData(prev => ({ ...prev, primaryClinicalImpression: impression }))\r\n    } else {\r\n      setFormData(prev => ({ ...prev, secondaryClinicalImpression: impression }))\r\n    }\r\n    setShowListModal(false)\r\n  }\r\n\r\n  const filteredPrimaryImpressions = clinicalImpressions.filter(imp =>\r\n    imp.toLowerCase().includes(primarySearchQuery.toLowerCase())\r\n  )\r\n\r\n  const filteredSecondaryImpressions = clinicalImpressions.filter(imp =>\r\n    imp.toLowerCase().includes(secondarySearchQuery.toLowerCase())\r\n  )\r\n\r\n  const filteredListImpressions = clinicalImpressions.filter(imp =>\r\n    imp.toLowerCase().includes(listSearchQuery.toLowerCase())\r\n  )\r\n\r\n  return (\r\n    <div className=\"eprf-dashboard incident-page\">\r\n      <style jsx>{`\r\n        .form-container {\r\n          padding: 20px;\r\n        }\r\n        \r\n        .form-row {\r\n          margin-bottom: 20px;\r\n          position: relative;\r\n        }\r\n        \r\n        .field-label {\r\n          display: block;\r\n          color: #1a3a5c;\r\n          font-size: 14px;\r\n          font-weight: bold;\r\n          margin-bottom: 8px;\r\n        }\r\n        \r\n        .field-label.required::after {\r\n          content: ' *';\r\n          color: #cc0000;\r\n        }\r\n        \r\n        .input-row {\r\n          display: flex;\r\n          gap: 10px;\r\n          align-items: center;\r\n        }\r\n        \r\n        .text-input {\r\n          flex: 1;\r\n          padding: 10px 15px;\r\n          border: 1px solid #7a9cc0;\r\n          border-radius: 3px;\r\n          font-size: 14px;\r\n          background: white;\r\n        }\r\n        \r\n        .text-input:focus {\r\n          outline: none;\r\n          border-color: #5a8ab8;\r\n        }\r\n        \r\n        .action-btn {\r\n          padding: 10px 25px;\r\n          background: linear-gradient(to bottom, #5a7a9c, #4a6a8c);\r\n          color: white;\r\n          border: 1px solid #3a5a7c;\r\n          border-radius: 3px;\r\n          cursor: pointer;\r\n          font-size: 14px;\r\n          min-width: 80px;\r\n        }\r\n        \r\n        .action-btn:hover {\r\n          background: linear-gradient(to bottom, #6a8aac, #5a7a9c);\r\n        }\r\n        \r\n        .notes-textarea {\r\n          width: 100%;\r\n          min-height: 120px;\r\n          padding: 12px;\r\n          border: 1px solid #7a9cc0;\r\n          border-radius: 3px;\r\n          font-size: 14px;\r\n          font-family: inherit;\r\n          resize: vertical;\r\n          background: white;\r\n        }\r\n        \r\n        .notes-textarea:focus {\r\n          outline: none;\r\n          border-color: #5a8ab8;\r\n        }\r\n        \r\n        .dropdown-list {\r\n          position: absolute;\r\n          top: 100%;\r\n          left: 0;\r\n          right: 160px;\r\n          max-height: 350px;\r\n          overflow-y: auto;\r\n          background: #6a8aac;\r\n          border: 1px solid #3a5a7c;\r\n          z-index: 100;\r\n          margin-top: 2px;\r\n        }\r\n        \r\n        .dropdown-item {\r\n          padding: 8px 12px;\r\n          cursor: pointer;\r\n          color: white;\r\n          font-size: 14px;\r\n          border-bottom: 1px solid #5a7a9c;\r\n        }\r\n        \r\n        .dropdown-item:nth-child(odd) {\r\n          background: #7a9abc;\r\n        }\r\n        \r\n        .dropdown-item:nth-child(even) {\r\n          background: #6a8aac;\r\n        }\r\n        \r\n        .dropdown-item:hover {\r\n          background: #8aaacc;\r\n        }\r\n        \r\n        .modal-overlay {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(0, 0, 0, 0.5);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          z-index: 1000;\r\n        }\r\n        \r\n        .modal {\r\n          background: #5a7ca5;\r\n          border: 2px solid #2d4a6c;\r\n          border-radius: 5px;\r\n          min-width: 500px;\r\n          max-width: 600px;\r\n          max-height: 80vh;\r\n          overflow: hidden;\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n        \r\n        .modal-header {\r\n          padding: 15px;\r\n          background: linear-gradient(to bottom, #4a6a8c, #3a5a7c);\r\n          color: white;\r\n          font-weight: bold;\r\n          text-align: center;\r\n        }\r\n        \r\n        .modal-search {\r\n          padding: 15px;\r\n          border-bottom: 1px solid #3a5a7c;\r\n        }\r\n        \r\n        .search-input {\r\n          width: 100%;\r\n          padding: 10px;\r\n          border: 1px solid #3a5a7c;\r\n          border-radius: 3px;\r\n          font-size: 14px;\r\n        }\r\n        \r\n        .modal-list {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          max-height: 400px;\r\n        }\r\n        \r\n        .list-item {\r\n          padding: 10px 15px;\r\n          cursor: pointer;\r\n          color: white;\r\n          font-size: 14px;\r\n          border-bottom: 1px solid #5a7a9c;\r\n        }\r\n        \r\n        .list-item:nth-child(odd) {\r\n          background: #7a9abc;\r\n        }\r\n        \r\n        .list-item:nth-child(even) {\r\n          background: #6a8aac;\r\n        }\r\n        \r\n        .list-item:hover {\r\n          background: #8aaacc;\r\n        }\r\n        \r\n        .modal-footer {\r\n          padding: 15px;\r\n          display: flex;\r\n          justify-content: center;\r\n          background: linear-gradient(to bottom, #4a6a8c, #3a5a7c);\r\n        }\r\n        \r\n        .cancel-btn {\r\n          padding: 10px 30px;\r\n          background: linear-gradient(to bottom, #c0c0c0, #a0a0a0);\r\n          color: #333;\r\n          border: 1px solid #808080;\r\n          border-radius: 3px;\r\n          cursor: pointer;\r\n          font-size: 14px;\r\n        }\r\n        \r\n        .cancel-btn:hover {\r\n          background: linear-gradient(to bottom, #d0d0d0, #b0b0b0);\r\n        }\r\n      `}</style>\r\n\r\n      <div className=\"eprf-nav\">\r\n        <button className=\"nav-btn\" onClick={handleHome}>Home</button>\r\n        <button className=\"nav-btn\">Tools</button>\r\n        <button className=\"nav-btn\" onClick={handleAdminPanel}>Admin Panel</button>\r\n        <button className=\"nav-btn\" onClick={handleLogout}>Manage Crew</button>\r\n        <div className=\"page-counter\">\r\n          <span className=\"patient-letter\">{patientLetter}</span>\r\n          <span className=\"page-indicator\">1 of 1</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"incident-layout\">\r\n        <aside className=\"sidebar\">\r\n          <button className={`sidebar-btn${incompleteSections.includes('incident') ? ' incomplete' : ''}`} onClick={() => navigateTo('incident')}>Incident Information</button>\r\n          <button className={`sidebar-btn${incompleteSections.includes('patient-info') ? ' incomplete' : ''}`} onClick={() => navigateTo('patient-info')}>Patient Information</button>\r\n          <button className={`sidebar-btn${incompleteSections.includes('primary-survey') ? ' incomplete' : ''}`} onClick={() => navigateTo('primary-survey')}>Primary Survey</button>\r\n          <button className={`sidebar-btn${incompleteSections.includes('vital-obs') ? ' incomplete' : ''}`} onClick={() => navigateTo('vital-obs')}>Vital Obs / Treat</button>\r\n          <button className={`sidebar-btn${incompleteSections.includes('hx-complaint') ? ' incomplete' : ''}`} onClick={() => navigateTo('hx-complaint')}>Hx Complaint</button>\r\n          <button className={`sidebar-btn${incompleteSections.includes('past-medical-history') ? ' incomplete' : ''}`} onClick={() => navigateTo('past-medical-history')}>Past Medical History</button>\r\n          <button className={`sidebar-btn active${incompleteSections.includes('clinical-impression') ? ' incomplete' : ''}`}>Clinical Impression</button>\r\n          <button className={`sidebar-btn${incompleteSections.includes('disposition') ? ' incomplete' : ''}`} onClick={() => navigateTo('disposition')}>Disposition</button>\r\n          <button className=\"sidebar-btn\" onClick={() => navigateTo('media')}>Media</button>\r\n        </aside>\r\n\r\n        <main className=\"incident-content\">\r\n          <div className=\"form-container\">\r\n            {/* Primary Clinical Impression */}\r\n            <div className=\"form-row\">\r\n              <label className={`field-label required ${hasFieldError('primaryClinicalImpression') ? 'validation-error-label' : ''}`}>Primary Clinical Impression</label>\r\n              <div className=\"input-row\">\r\n                <input\r\n                  ref={primaryInputRef}\r\n                  type=\"text\"\r\n                  className={`text-input ${hasFieldError('primaryClinicalImpression') ? 'validation-error' : ''}`}\r\n                  value={formData.primaryClinicalImpression}\r\n                  onChange={(e) => {\r\n                    setFormData(prev => ({ ...prev, primaryClinicalImpression: e.target.value }))\r\n                    setPrimarySearchQuery(e.target.value)\r\n                    if (e.target.value) {\r\n                      setShowPrimaryDropdown(true)\r\n                      setShowSecondaryDropdown(false)\r\n                    } else {\r\n                      setShowPrimaryDropdown(false)\r\n                    }\r\n                  }}\r\n                  onFocus={() => {\r\n                    if (formData.primaryClinicalImpression) {\r\n                      setPrimarySearchQuery(formData.primaryClinicalImpression)\r\n                      setShowPrimaryDropdown(true)\r\n                      setShowSecondaryDropdown(false)\r\n                    }\r\n                  }}\r\n                />\r\n                <button className=\"action-btn\" onClick={handlePrimarySearch}>Search</button>\r\n                <button className=\"action-btn\" onClick={() => openList('primary')}>List</button>\r\n              </div>\r\n              {showPrimaryDropdown && filteredPrimaryImpressions.length > 0 && (\r\n                <div className=\"dropdown-list\">\r\n                  {filteredPrimaryImpressions.slice(0, 20).map((impression, index) => (\r\n                    <div\r\n                      key={index}\r\n                      className=\"dropdown-item\"\r\n                      onClick={() => selectPrimaryImpression(impression)}\r\n                    >\r\n                      {impression}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Secondary Clinical Impression */}\r\n            <div className=\"form-row\">\r\n              <label className=\"field-label\">Secondary Clinical Impression</label>\r\n              <div className=\"input-row\">\r\n                <input\r\n                  ref={secondaryInputRef}\r\n                  type=\"text\"\r\n                  className=\"text-input\"\r\n                  value={formData.secondaryClinicalImpression}\r\n                  onChange={(e) => {\r\n                    setFormData(prev => ({ ...prev, secondaryClinicalImpression: e.target.value }))\r\n                    setSecondarySearchQuery(e.target.value)\r\n                    if (e.target.value) {\r\n                      setShowSecondaryDropdown(true)\r\n                      setShowPrimaryDropdown(false)\r\n                    } else {\r\n                      setShowSecondaryDropdown(false)\r\n                    }\r\n                  }}\r\n                  onFocus={() => {\r\n                    if (formData.secondaryClinicalImpression) {\r\n                      setSecondarySearchQuery(formData.secondaryClinicalImpression)\r\n                      setShowSecondaryDropdown(true)\r\n                      setShowPrimaryDropdown(false)\r\n                    }\r\n                  }}\r\n                />\r\n                <button className=\"action-btn\" onClick={handleSecondarySearch}>Search</button>\r\n                <button className=\"action-btn\" onClick={() => openList('secondary')}>List</button>\r\n              </div>\r\n              {showSecondaryDropdown && filteredSecondaryImpressions.length > 0 && (\r\n                <div className=\"dropdown-list\">\r\n                  {filteredSecondaryImpressions.slice(0, 20).map((impression, index) => (\r\n                    <div\r\n                      key={index}\r\n                      className=\"dropdown-item\"\r\n                      onClick={() => selectSecondaryImpression(impression)}\r\n                    >\r\n                      {impression}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Clinical Impression Notes */}\r\n            <div className=\"form-row\">\r\n              <label className=\"field-label\">Clinical Impression Notes</label>\r\n              <textarea\r\n                className=\"notes-textarea\"\r\n                value={formData.clinicalImpressionNotes}\r\n                onChange={(e) => setFormData(prev => ({ ...prev, clinicalImpressionNotes: e.target.value }))}\r\n                onClick={() => {\r\n                  setShowPrimaryDropdown(false)\r\n                  setShowSecondaryDropdown(false)\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      <footer className=\"eprf-footer\">\r\n        <button className=\"footer-btn\">\r\n          <span className=\"btn-icon\"></span>\r\n          <span className=\"btn-text\">Internet</span>\r\n        </button>\r\n        <button className=\"footer-btn server-btn\">\r\n          <span className=\"btn-icon\"></span>\r\n          <span className=\"btn-text\">Server</span>\r\n        </button>\r\n        <button className=\"footer-btn add-patient-btn\" onClick={handleAddPatientClick}>\r\n          <span className=\"btn-icon\">+</span>\r\n          <span className=\"btn-text\">Add Patient</span>\r\n        </button>\r\n        <button className=\"footer-btn transfer-btn\" onClick={handleTransferClick}>\r\n          <span className=\"btn-icon\"></span>\r\n          <span className=\"btn-text\">Transfer ePRF</span>\r\n        </button>\r\n        <button className=\"footer-btn submit-btn\" onClick={handleSubmitEPRF}>\r\n          <span className=\"btn-icon\"></span>\r\n          <span className=\"btn-text\">Submit ePRF</span>\r\n        </button>\r\n        <div className=\"footer-right\">\r\n          <button className=\"nav-prev\" onClick={handlePrevious}>&lt; Previous</button>\r\n          <button className=\"nav-next\" onClick={handleNext}>Next &gt;</button>\r\n        </div>\r\n      </footer>\r\n\r\n      {/* List Modal with Search */}\r\n      {showListModal && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowListModal(false)}>\r\n          <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              {listField === 'primary' ? 'Primary' : 'Secondary'} Clinical Impression\r\n            </div>\r\n            <div className=\"modal-search\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"search-input\"\r\n                placeholder=\"Search...\"\r\n                value={listSearchQuery}\r\n                onChange={(e) => setListSearchQuery(e.target.value)}\r\n                autoFocus\r\n              />\r\n            </div>\r\n            <div className=\"modal-list\">\r\n              {filteredListImpressions.map((impression, index) => (\r\n                <div\r\n                  key={index}\r\n                  className=\"list-item\"\r\n                  onClick={() => selectFromList(impression)}\r\n                >\r\n                  {impression}\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button className=\"cancel-btn\" onClick={() => setShowListModal(false)}>Cancel</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Confirmation Modals */}\r\n      <ConfirmationModal\r\n        isOpen={showAddPatientModal}\r\n        onClose={() => setShowAddPatientModal(false)}\r\n        onConfirm={confirmAddPatient}\r\n        title=\"Add New Patient\"\r\n        message={`Are you sure you want to save Patient ${patientLetter} and start a new patient record?\\n\\nThis will:\\n Save all current patient data\\n Create a new patient record (Patient ${String.fromCharCode(patientLetter.charCodeAt(0) + 1)})\\n Clear the form for the new patient`}\r\n        confirmText=\"Yes, Add Patient\"\r\n        cancelText=\"Cancel\"\r\n        type=\"info\"\r\n        isLoading={isSubmitting}\r\n      />\r\n\r\n      <ConfirmationModal\r\n        isOpen={showSubmitModal}\r\n        onClose={() => setShowSubmitModal(false)}\r\n        onConfirm={confirmSubmitEPRF}\r\n        title=\"Submit ePRF\"\r\n        message={`Are you sure you want to submit the ePRF for Patient ${patientLetter}?\\n\\nThis will:\\n Generate a PDF copy for your records\\n Submit the data to the server\\n Mark this ePRF as complete`}\r\n        confirmText=\"Yes, Submit ePRF\"\r\n        cancelText=\"Cancel\"\r\n        type=\"success\"\r\n        isLoading={isSubmitting}\r\n      />\r\n\r\n      <ValidationErrorModal\r\n        isOpen={showValidationErrorModal}\r\n        onClose={() => setShowValidationErrorModal(false)}\r\n        errors={validationErrorsData}\r\n        getSectionDisplayName={getSectionDisplayName}\r\n      />\r\n\r\n      <SuccessModal\r\n        isOpen={showSuccessModal}\r\n        onClose={() => setShowSuccessModal(false)}\r\n        title={successMessage.title}\r\n        message={successMessage.message}\r\n      />\r\n\r\n      <TransferModal\r\n        isOpen={showTransferModal}\r\n        onClose={() => setShowTransferModal(false)}\r\n        onTransferComplete={handleTransferComplete}\r\n        incidentId={incidentId}\r\n        patientLetter={patientLetter}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":["module","exports","require","_self___RSC_MANIFEST","tree","children","page","Promise","resolve","then","__webpack_require__","bind","pages","originalPathname","__next_app__","loadChunk","routeModule","module_compiled","AppPageRouteModule","definition","kind","route_kind","x","APP_PAGE","pathname","bundlePath","filename","appPaths","userland","loaderTree","maybeJSONParse","str","JSON","parse","undefined","buildManifest","self","__BUILD_MANIFEST","reactLoadableManifest","__REACT_LOADABLE_MANIFEST","rscManifest","__RSC_MANIFEST","rscServerManifest","__RSC_SERVER_MANIFEST","nextFontManifest","__NEXT_FONT_MANIFEST","interceptionRouteRewrites","__INTERCEPTION_ROUTE_REWRITE_MANIFEST","encryption_utils","Mo","clientReferenceManifest","serverActionsManifest","serverModuleMap","action_utils","w","pageName","page_stringifiedConfig_eyJlbnYiOnt9LCJ3ZWJwYWNrIjpudWxsLCJlc2xpbnQiOnsiaWdub3JlRHVyaW5nQnVpbGRzIjpmYWxzZX0sInR5cGVzY3JpcHQiOnsiaWdub3JlQnVpbGRFcnJvcnMiOmZhbHNlLCJ0c2NvbmZpZ1BhdGgiOiJ0c2NvbmZpZy5qc29uIn0sImRpc3REaXIiOiIubmV4dCIsImNsZWFuRGlzdERpciI6dHJ1ZSwiYXNzZXRQcmVmaXgiOiIiLCJjYWNoZU1heE1lbW9yeVNpemUiOjUyNDI4ODAwLCJjb25maWdPcmlnaW4iOiJuZXh0LmNvbmZpZy5qcyIsInVzZUZpbGVTeXN0ZW1QdWJsaWNSb3V0ZXMiOnRydWUsImdlbmVyYXRlRXRhZ3MiOnRydWUsInBhZ2VFeHRlbnNpb25zIjpbInRzeCIsInRzIiwianN4IiwianMiXSwicG93ZXJlZEJ5SGVhZGVyIjp0cnVlLCJjb21wcmVzcyI6dHJ1ZSwiYW5hbHl0aWNzSWQiOiIiLCJpbWFnZXMiOnsiZGV2aWNlU2l6ZXMiOls2NDAsNzUwLDgyOCwxMDgwLDEyMDAsMTkyMCwyMDQ4LDM4NDBdLCJpbWFnZVNpemVzIjpbMTYsMzIsNDgsNjQsOTYsMTI4LDI1NiwzODRdLCJwYXRoIjoiL19uZXh0L2ltYWdlIiwibG9hZGVyIjoiZGVmYXVsdCIsImxvYWRlckZpbGUiOiIiLCJkb21haW5zIjpbXSwiZGlzYWJsZVN0YXRpY0ltYWdlcyI6ZmFsc2UsIm1pbmltdW1DYWNoZVRUTCI6NjAsImZvcm1hdHMiOlsiaW1hZ2Uvd2VicCJdLCJkYW5nZXJvdXNseUFsbG93U1ZHIjpmYWxzZSwiY29udGVudFNlY3VyaXR5UG9saWN5Ijoic2NyaXB0LXNyYyAnbm9uZSc7IGZyYW1lLXNyYyAnbm9uZSc7IHNhbmRib3g7IiwiY29udGVudERpc3Bvc2l0aW9uVHlwZSI6ImlubGluZSIsInJlbW90ZVBhdHRlcm5zIjpbXSwidW5vcHRpbWl6ZWQiOmZhbHNlfSwiZGV2SW5kaWNhdG9ycyI6eyJidWlsZEFjdGl2aXR5Ijp0cnVlLCJidWlsZEFjdGl2aXR5UG9zaXRpb24iOiJib3R0b20tcmlnaHQifSwib25EZW1hbmRFbnRyaWVzIjp7Im1heEluYWN0aXZlQWdlIjo2MDAwMCwicGFnZXNCdWZmZXJMZW5ndGgiOjV9LCJhbXAiOnsiY2Fub25pY2FsQmFzZSI6IiJ9LCJiYXNlUGF0aCI6IiIsInNhc3NPcHRpb25zIjp7fSwidHJhaWxpbmdTbGFzaCI6ZmFsc2UsImkxOG4iOm51bGwsInByb2R1Y3Rpb25Ccm93c2VyU291cmNlTWFwcyI6ZmFsc2UsIm9wdGltaXplRm9udHMiOnRydWUsImV4Y2x1ZGVEZWZhdWx0TW9tZW50TG9jYWxlcyI6dHJ1ZSwic2VydmVyUnVudGltZUNvbmZpZyI6e30sInB1YmxpY1J1bnRpbWVDb25maWciOnt9LCJyZWFjdFByb2R1Y3Rpb25Qcm9maWxpbmciOmZhbHNlLCJyZWFjdFN0cmljdE1vZGUiOm51bGwsImh0dHBBZ2VudE9wdGlvbnMiOnsia2VlcEFsaXZlIjp0cnVlfSwib3V0cHV0RmlsZVRyYWNpbmciOnRydWUsInN0YXRpY1BhZ2VHZW5lcmF0aW9uVGltZW91dCI6NjAsInN3Y01pbmlmeSI6dHJ1ZSwibW9kdWxhcml6ZUltcG9ydHMiOnsiQG11aS9pY29ucy1tYXRlcmlhbCI6eyJ0cmFuc2Zvcm0iOiJAbXVpL2ljb25zLW1hdGVyaWFsL3t7bWVtYmVyfX0ifSwibG9kYXNoIjp7InRyYW5zZm9ybSI6ImxvZGFzaC97e21lbWJlcn19In19LCJleHBlcmltZW50YWwiOnsibXVsdGlab25lRHJhZnRNb2RlIjpmYWxzZSwicHJlcmVuZGVyRWFybHlFeGl0IjpmYWxzZSwic2VydmVyTWluaWZpY2F0aW9uIjp0cnVlLCJzZXJ2ZXJTb3VyY2VNYXBzIjpmYWxzZSwibGlua05vVG91Y2hTdGFydCI6ZmFsc2UsImNhc2VTZW5zaXRpdmVSb3V0ZXMiOmZhbHNlLCJjbGllbnRSb3V0ZXJGaWx0ZXIiOnRydWUsImNsaWVudFJvdXRlckZpbHRlclJlZGlyZWN0cyI6ZmFsc2UsImZldGNoQ2FjaGVLZXlQcmVmaXgiOiIiLCJtaWRkbGV3YXJlUHJlZmV0Y2giOiJmbGV4aWJsZSIsIm9wdGltaXN0aWNDbGllbnRDYWNoZSI6dHJ1ZSwibWFudWFsQ2xpZW50QmFzZVBhdGgiOmZhbHNlLCJjcHVzIjoxMSwibWVtb3J5QmFzZWRXb3JrZXJzQ291bnQiOmZhbHNlLCJpc3JGbHVzaFRvRGlzayI6dHJ1ZSwid29ya2VyVGhyZWFkcyI6ZmFsc2UsIm9wdGltaXplQ3NzIjpmYWxzZSwibmV4dFNjcmlwdFdvcmtlcnMiOmZhbHNlLCJzY3JvbGxSZXN0b3JhdGlvbiI6ZmFsc2UsImV4dGVybmFsRGlyIjpmYWxzZSwiZGlzYWJsZU9wdGltaXplZExvYWRpbmciOmZhbHNlLCJnemlwU2l6ZSI6dHJ1ZSwiY3JhQ29tcGF0IjpmYWxzZSwiZXNtRXh0ZXJuYWxzIjp0cnVlLCJmdWxseVNwZWNpZmllZCI6ZmFsc2UsIm91dHB1dEZpbGVUcmFjaW5nUm9vdCI6IkM6XFxVc2Vyc1xcVG9ieVxcRG93bmxvYWRzXFxub2RlLXYyNC4xMS4xLXdpbi14NjRcXGFwcDEyMyIsInN3Y1RyYWNlUHJvZmlsaW5nIjpmYWxzZSwiZm9yY2VTd2NUcmFuc2Zvcm1zIjpmYWxzZSwibGFyZ2VQYWdlRGF0YUJ5dGVzIjoxMjgwMDAsImFkanVzdEZvbnRGYWxsYmFja3MiOmZhbHNlLCJhZGp1c3RGb250RmFsbGJhY2tzV2l0aFNpemVBZGp1c3QiOmZhbHNlLCJ0eXBlZFJvdXRlcyI6ZmFsc2UsImluc3RydW1lbnRhdGlvbkhvb2siOmZhbHNlLCJidW5kbGVQYWdlc0V4dGVybmFscyI6ZmFsc2UsInBhcmFsbGVsU2VydmVyQ29tcGlsZXMiOmZhbHNlLCJwYXJhbGxlbFNlcnZlckJ1aWxkVHJhY2VzIjpmYWxzZSwicHByIjpmYWxzZSwibWlzc2luZ1N1c3BlbnNlV2l0aENTUkJhaWxvdXQiOnRydWUsIm9wdGltaXplU2VydmVyUmVhY3QiOnRydWUsInVzZUVhcmx5SW1wb3J0IjpmYWxzZSwic3RhbGVUaW1lcyI6eyJkeW5hbWljIjozMCwic3RhdGljIjozMDB9LCJvcHRpbWl6ZVBhY2thZ2VJbXBvcnRzIjpbImx1Y2lkZS1yZWFjdCIsImRhdGUtZm5zIiwibG9kYXNoLWVzIiwicmFtZGEiLCJhbnRkIiwicmVhY3QtYm9vdHN0cmFwIiwiYWhvb2tzIiwiQGFudC1kZXNpZ24vaWNvbnMiLCJAaGVhZGxlc3N1aS9yZWFjdCIsIkBoZWFkbGVzc3VpLWZsb2F0L3JlYWN0IiwiQGhlcm9pY29ucy9yZWFjdC8yMC9zb2xpZCIsIkBoZXJvaWNvbnMvcmVhY3QvMjQvc29saWQiLCJAaGVyb2ljb25zL3JlYWN0LzI0L291dGxpbmUiLCJAdmlzeC92aXN4IiwiQHRyZW1vci9yZWFjdCIsInJ4anMiLCJAbXVpL21hdGVyaWFsIiwiQG11aS9pY29ucy1tYXRlcmlhbCIsInJlY2hhcnRzIiwicmVhY3QtdXNlIiwiQG1hdGVyaWFsLXVpL2NvcmUiLCJAbWF0ZXJpYWwtdWkvaWNvbnMiLCJAdGFibGVyL2ljb25zLXJlYWN0IiwibXVpLWNvcmUiLCJyZWFjdC1pY29ucy9haSIsInJlYWN0LWljb25zL2JpIiwicmVhY3QtaWNvbnMvYnMiLCJyZWFjdC1pY29ucy9jZyIsInJlYWN0LWljb25zL2NpIiwicmVhY3QtaWNvbnMvZGkiLCJyZWFjdC1pY29ucy9mYSIsInJlYWN0LWljb25zL2ZhNiIsInJlYWN0LWljb25zL2ZjIiwicmVhY3QtaWNvbnMvZmkiLCJyZWFjdC1pY29ucy9naSIsInJlYWN0LWljb25zL2dvIiwicmVhY3QtaWNvbnMvZ3IiLCJyZWFjdC1pY29ucy9oaSIsInJlYWN0LWljb25zL2hpMiIsInJlYWN0LWljb25zL2ltIiwicmVhY3QtaWNvbnMvaW8iLCJyZWFjdC1pY29ucy9pbzUiLCJyZWFjdC1pY29ucy9saWEiLCJyZWFjdC1pY29ucy9saWIiLCJyZWFjdC1pY29ucy9sdSIsInJlYWN0LWljb25zL21kIiwicmVhY3QtaWNvbnMvcGkiLCJyZWFjdC1pY29ucy9yaSIsInJlYWN0LWljb25zL3J4IiwicmVhY3QtaWNvbnMvc2kiLCJyZWFjdC1pY29ucy9zbCIsInJlYWN0LWljb25zL3RiIiwicmVhY3QtaWNvbnMvdGZpIiwicmVhY3QtaWNvbnMvdGkiLCJyZWFjdC1pY29ucy92c2MiLCJyZWFjdC1pY29ucy93aSJdfSwiY29uZmlnRmlsZSI6IkM6XFxVc2Vyc1xcVG9ieVxcRG93bmxvYWRzXFxub2RlLXYyNC4xMS4xLXdpbi14NjRcXGFwcDEyM1xcbmV4dC5jb25maWcuanMiLCJjb25maWdGaWxlTmFtZSI6Im5leHQuY29uZmlnLmpzIn0_pagesType_app_appDirLoader_bmV4dC1hcHAtbG9hZGVyP25hbWU9YXBwJTJGY2xpbmljYWwtaW1wcmVzc2lvbiUyRnBhZ2UmcGFnZT0lMkZjbGluaWNhbC1pbXByZXNzaW9uJTJGcGFnZSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmNsaW5pY2FsLWltcHJlc3Npb24lMkZwYWdlLnRzeCZhcHBEaXI9QyUzQSU1Q1VzZXJzJTVDVG9ieSU1Q0Rvd25sb2FkcyU1Q25vZGUtdjI0LjExLjEtd2luLXg2NCU1Q2FwcDEyMyU1Q2FwcCZhcHBQYXRocz0lMkZjbGluaWNhbC1pbXByZXNzaW9uJTJGcGFnZSZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCE_sriEnabled_false_middlewareConfig_e30_render","render","d","pagesType","page_types","s","APP","dev","appMod","pageMod","page_next_edge_ssr_entry_namespaceObject","errorMod","error500Mod","Document","renderToHTML","app_render","f","serverActions","subresourceIntegrityManifest","config","buildId","process","env","__NEXT_BUILD_ID","incrementalCacheHandler","ComponentMod","nHandler","opts","adapter","C","IncrementalCache","incremental_cache","k","handler","runtime","ClinicalImpressionPage","searchParams","useSearchParams","router","useRouter","incidentId","get","fleetId","incompleteSections","setIncompleteSections","useState","patientLetter","setPatientLetter","showAddPatientModal","setShowAddPatientModal","showSubmitModal","setShowSubmitModal","showTransferModal","setShowTransferModal","showValidationErrorModal","setShowValidationErrorModal","showSuccessModal","setShowSuccessModal","validationErrorsData","setValidationErrorsData","isSubmitting","setIsSubmitting","successMessage","setSuccessMessage","title","message","formData","setFormData","primaryClinicalImpression","secondaryClinicalImpression","clinicalImpressionNotes","showPrimaryDropdown","setShowPrimaryDropdown","showSecondaryDropdown","setShowSecondaryDropdown","primarySearchQuery","setPrimarySearchQuery","secondarySearchQuery","setSecondarySearchQuery","listSearchQuery","setListSearchQuery","showListModal","setShowListModal","listField","setListField","primaryInputRef","useRef","secondaryInputRef","clinicalImpressions","handleHome","params","URLSearchParams","push","navigateTo","id","section","confirmSubmitEPRF","result","submitEPRFService","success","validationResult","fieldErrors","error","console","alert","confirmAddPatient","addPatientService","newLetter","setTimeout","hasFieldError","includes","field","openList","selectPrimaryImpression","prev","impression","selectSecondaryImpression","selectFromList","filteredPrimaryImpressions","filter","imp","toLowerCase","filteredSecondaryImpressions","filteredListImpressions","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","div","jsx","button","onClick","user","getCurrentUser","isAdmin","discordId","span","aside","main","label","input","ref","type","value","onChange","e","target","onFocus","length","slice","map","index","textarea","footer","validateAllSections","isValid","stopPropagation","placeholder","autoFocus","ConfirmationModal","isOpen","onClose","onConfirm","String","fromCharCode","charCodeAt","confirmText","cancelText","isLoading","ValidationErrorModal","errors","getSectionDisplayName","SuccessModal","TransferModal","onTransferComplete","transferAllPatients","targetUser","callsign"],"sourceRoot":""}