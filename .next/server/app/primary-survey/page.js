(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{2067:e=>{"use strict";e.exports=require("node:async_hooks")},6195:e=>{"use strict";e.exports=require("node:buffer")},9151:(e,a,s)=>{"use strict";s.r(a),s.d(a,{ComponentMod:()=>A,default:()=>R});var i,t={};s.r(t),s.d(t,{AppRouter:()=>m.WY,ClientPageRoot:()=>m.b1,GlobalError:()=>u.ZP,LayoutRouter:()=>m.yO,NotFoundBoundary:()=>m.O4,Postpone:()=>m.hQ,RenderFromTemplateContext:()=>m.b5,__next_app__:()=>b,actionAsyncStorage:()=>m.Wz,createDynamicallyTrackedSearchParams:()=>m.rL,createUntrackedSearchParams:()=>m.S5,decodeAction:()=>m.Hs,decodeFormState:()=>m.dH,decodeReply:()=>m.kf,originalPathname:()=>v,pages:()=>h,patchFetch:()=>m.XH,preconnect:()=>m.$P,preloadFont:()=>m.C5,preloadStyle:()=>m.oH,renderToReadableStream:()=>m.aW,requestAsyncStorage:()=>m.Fg,routeModule:()=>f,serverHooks:()=>m.GP,staticGenerationAsyncStorage:()=>m.AT,taintObjectReference:()=>m.nr,tree:()=>p}),s(7206);var n=s(9319),r=s(5989),o=s(1902),l=s(2042),c=s(4630),d=s(4828),u=s(5505),m=s(6453);let p=["",{children:["primary-survey",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4253)),"C:\\Users\\Toby\\Downloads\\node-v24.11.1-win-x64\\app123\\app\\primary-survey\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7665)),"C:\\Users\\Toby\\Downloads\\node-v24.11.1-win-x64\\app123\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,2520)),"next/dist/client/components/not-found-error"]}],h=["C:\\Users\\Toby\\Downloads\\node-v24.11.1-win-x64\\app123\\app\\primary-survey\\page.tsx"],v="/primary-survey/page",b={require:s,loadChunk:()=>Promise.resolve()},f=new c.AppPageRouteModule({definition:{kind:d.x.APP_PAGE,page:"/primary-survey/page",pathname:"/primary-survey",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}});var y=s(9094),g=s(5787),x=s(527);let j=e=>e?JSON.parse(e):void 0,N=self.__BUILD_MANIFEST,C=j(self.__REACT_LOADABLE_MANIFEST),S=null==(i=self.__RSC_MANIFEST)?void 0:i["/primary-survey/page"],P=j(self.__RSC_SERVER_MANIFEST),w=j(self.__NEXT_FONT_MANIFEST),k=j(self.__INTERCEPTION_ROUTE_REWRITE_MANIFEST)??[];S&&P&&(0,g.Mo)({clientReferenceManifest:S,serverActionsManifest:P,serverModuleMap:(0,x.w)({serverActionsManifest:P,pageName:"/primary-survey/page"})});let T=(0,r.d)({pagesType:y.s.APP,dev:!1,page:"/primary-survey/page",appMod:null,pageMod:t,errorMod:null,error500Mod:null,Document:null,buildManifest:N,renderToHTML:l.f,reactLoadableManifest:C,clientReferenceManifest:S,serverActionsManifest:P,serverActions:void 0,subresourceIntegrityManifest:void 0,config:{env:{},webpack:null,eslint:{ignoreDuringBuilds:!1},typescript:{ignoreBuildErrors:!1,tsconfigPath:"tsconfig.json"},distDir:".next",cleanDistDir:!0,assetPrefix:"",cacheMaxMemorySize:52428800,configOrigin:"next.config.js",useFileSystemPublicRoutes:!0,generateEtags:!0,pageExtensions:["tsx","ts","jsx","js"],poweredByHeader:!0,compress:!0,analyticsId:"",images:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1},devIndicators:{buildActivity:!0,buildActivityPosition:"bottom-right"},onDemandEntries:{maxInactiveAge:6e4,pagesBufferLength:5},amp:{canonicalBase:""},basePath:"",sassOptions:{},trailingSlash:!1,i18n:null,productionBrowserSourceMaps:!1,optimizeFonts:!0,excludeDefaultMomentLocales:!0,serverRuntimeConfig:{},publicRuntimeConfig:{},reactProductionProfiling:!1,reactStrictMode:null,httpAgentOptions:{keepAlive:!0},outputFileTracing:!0,staticPageGenerationTimeout:60,swcMinify:!0,modularizeImports:{"@mui/icons-material":{transform:"@mui/icons-material/{{member}}"},lodash:{transform:"lodash/{{member}}"}},experimental:{multiZoneDraftMode:!1,prerenderEarlyExit:!1,serverMinification:!0,serverSourceMaps:!1,linkNoTouchStart:!1,caseSensitiveRoutes:!1,clientRouterFilter:!0,clientRouterFilterRedirects:!1,fetchCacheKeyPrefix:"",middlewarePrefetch:"flexible",optimisticClientCache:!0,manualClientBasePath:!1,cpus:11,memoryBasedWorkersCount:!1,isrFlushToDisk:!0,workerThreads:!1,optimizeCss:!1,nextScriptWorkers:!1,scrollRestoration:!1,externalDir:!1,disableOptimizedLoading:!1,gzipSize:!0,craCompat:!1,esmExternals:!0,fullySpecified:!1,outputFileTracingRoot:"C:\\Users\\Toby\\Downloads\\node-v24.11.1-win-x64\\app123",swcTraceProfiling:!1,forceSwcTransforms:!1,largePageDataBytes:128e3,adjustFontFallbacks:!1,adjustFontFallbacksWithSizeAdjust:!1,typedRoutes:!1,instrumentationHook:!1,bundlePagesExternals:!1,parallelServerCompiles:!1,parallelServerBuildTraces:!1,ppr:!1,missingSuspenseWithCSRBailout:!0,optimizeServerReact:!0,useEarlyImport:!1,staleTimes:{dynamic:30,static:300},optimizePackageImports:["lucide-react","date-fns","lodash-es","ramda","antd","react-bootstrap","ahooks","@ant-design/icons","@headlessui/react","@headlessui-float/react","@heroicons/react/20/solid","@heroicons/react/24/solid","@heroicons/react/24/outline","@visx/visx","@tremor/react","rxjs","@mui/material","@mui/icons-material","recharts","react-use","@material-ui/core","@material-ui/icons","@tabler/icons-react","mui-core","react-icons/ai","react-icons/bi","react-icons/bs","react-icons/cg","react-icons/ci","react-icons/di","react-icons/fa","react-icons/fa6","react-icons/fc","react-icons/fi","react-icons/gi","react-icons/go","react-icons/gr","react-icons/hi","react-icons/hi2","react-icons/im","react-icons/io","react-icons/io5","react-icons/lia","react-icons/lib","react-icons/lu","react-icons/md","react-icons/pi","react-icons/ri","react-icons/rx","react-icons/si","react-icons/sl","react-icons/tb","react-icons/tfi","react-icons/ti","react-icons/vsc","react-icons/wi"]},configFile:"C:\\Users\\Toby\\Downloads\\node-v24.11.1-win-x64\\app123\\next.config.js",configFileName:"next.config.js"},buildId:process.env.__NEXT_BUILD_ID,nextFontManifest:w,incrementalCacheHandler:null,interceptionRouteRewrites:k}),A=t;function R(e){return(0,n.C)({...e,IncrementalCache:o.k,handler:T})}},5040:(e,a,s)=>{Promise.resolve().then(s.bind(s,3779))},3779:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p,runtime:()=>m});var i=s(926),t=s(4947),n=s(9220),r=s(6360),o=s(9572),l=s(596),c=s(7585),d=s(3759),u=s(8718);let m="edge";function p(){let e=(0,t.lr)(),a=(0,t.tv)(),m=e?.get("id")||"",p=e?.get("fleetId")||"",[h,v]=(0,n.useState)([]),[b,f]=(0,n.useState)("A"),[y,g]=(0,n.useState)(!1),[x,j]=(0,n.useState)(!1),[N,C]=(0,n.useState)(!1),[S,P]=(0,n.useState)(!1),[w,k]=(0,n.useState)(!1),[T,A]=(0,n.useState)({}),[R,_]=(0,n.useState)(!1),[E,F]=(0,n.useState)({title:"",message:""}),[$,I]=(0,n.useState)(""),[M,D]=(0,n.useState)(""),[L,O]=(0,n.useState)(""),[B,U]=(0,n.useState)(""),[z,H]=(0,n.useState)(""),[q,G]=(0,n.useState)(""),W=async()=>{_(!0);try{let e=await (0,o.Gf)(m,p);e.success?(j(!1),F({title:"ePRF Submitted Successfully!",message:`The ePRF for Patient ${b} has been submitted.

A PDF copy has been downloaded to your device and the record has been saved.`}),P(!0)):e.validationResult&&(j(!1),A(e.validationResult.fieldErrors),v(e.validationResult.incompleteSections),C(!0))}catch(e){console.error("Submit error:",e),alert("An error occurred while submitting. Please try again.")}finally{_(!1)}},V=async()=>{_(!0);try{let e=await (0,o.mb)(m);e.success?(g(!1),f(e.newLetter),F({title:"Patient Added Successfully!",message:`Patient ${b} has been saved.

You are now working on Patient ${e.newLetter}.

The form has been cleared for the new patient.`}),P(!0),setTimeout(()=>{let e=new URLSearchParams({id:m,fleetId:p});a.push(`/patient-info?${e}`)},2e3)):alert(e.error||"Failed to add patient")}catch(e){console.error("Add patient error:",e),alert("An error occurred. Please try again.")}finally{_(!1)}},Y=e=>h.includes("primary-survey")&&("clinicalStatus"===e&&!$||"responsiveness"===e&&!M||"airway"===e&&!L||"breathing"===e&&!B||"circulation"===e&&!z||"bloodLoss"===e&&!q),Z=()=>{let e=new URLSearchParams({fleetId:p});a.push(`/dashboard?${e}`)},X=e=>{let s=new URLSearchParams({id:m,fleetId:p});"incident"===e?a.push(`/incident?${s}`):"patient-info"===e?a.push(`/patient-info?${s}`):"primary-survey"===e?a.push(`/primary-survey?${s}`):"vital-obs"===e?a.push(`/vital-obs?${s}`):"hx-complaint"===e?a.push(`/hx-complaint?${s}`):"past-medical-history"===e?a.push(`/past-medical-history?${s}`):"clinical-impression"===e?a.push(`/clinical-impression?${s}`):"disposition"===e?a.push(`/disposition?${s}`):"media"===e&&a.push(`/media?${s}`)};return(0,i.jsxs)("div",{className:"eprf-dashboard incident-page",children:[(0,i.jsxs)("div",{className:"eprf-nav",children:[(0,i.jsx)("button",{className:"nav-btn",onClick:Z,children:"Home"}),(0,i.jsx)("button",{className:"nav-btn",children:"Tools"}),(0,i.jsx)("button",{className:"nav-btn",onClick:()=>{let e=(0,d.ts)();e&&(0,u.GJ)(e.discordId)&&a.push("/admin")},children:"Admin Panel"}),(0,i.jsx)("button",{className:"nav-btn",onClick:()=>{a.push("/")},children:"Manage Crew"}),(0,i.jsxs)("div",{className:"page-counter",children:[(0,i.jsx)("span",{className:"patient-letter",children:b}),(0,i.jsx)("span",{className:"page-indicator",children:"1 of 1"})]})]}),(0,i.jsxs)("div",{className:"incident-layout",children:[(0,i.jsxs)("aside",{className:"sidebar",children:[(0,i.jsx)("button",{className:`sidebar-btn${h.includes("incident")?" incomplete":""}`,onClick:()=>X("incident"),children:"Incident Information"}),(0,i.jsx)("button",{className:`sidebar-btn${h.includes("patient-info")?" incomplete":""}`,onClick:()=>X("patient-info"),children:"Patient Information"}),(0,i.jsx)("button",{className:`sidebar-btn active${h.includes("primary-survey")?" incomplete":""}`,children:"Primary Survey"}),(0,i.jsx)("button",{className:`sidebar-btn${h.includes("vital-obs")?" incomplete":""}`,onClick:()=>X("vital-obs"),children:"Vital Obs / Treat"}),(0,i.jsx)("button",{className:`sidebar-btn${h.includes("hx-complaint")?" incomplete":""}`,onClick:()=>X("hx-complaint"),children:"Hx Complaint"}),(0,i.jsx)("button",{className:`sidebar-btn${h.includes("past-medical-history")?" incomplete":""}`,onClick:()=>X("past-medical-history"),children:"Past Medical History"}),(0,i.jsx)("button",{className:`sidebar-btn${h.includes("clinical-impression")?" incomplete":""}`,onClick:()=>X("clinical-impression"),children:"Clinical Impression"}),(0,i.jsx)("button",{className:`sidebar-btn${h.includes("disposition")?" incomplete":""}`,onClick:()=>X("disposition"),children:"Disposition"}),(0,i.jsx)("button",{className:"sidebar-btn",onClick:()=>X("media"),children:"Media"})]}),(0,i.jsx)("main",{className:"incident-content",children:(0,i.jsxs)("section",{className:"incident-section",children:[(0,i.jsx)("h2",{className:"section-title",children:"Primary Survey"}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-field full-width",children:[(0,i.jsx)("label",{className:`field-label required ${Y("clinicalStatus")?"validation-error-label":""}`,children:"Clinical Status at Scene"}),(0,i.jsxs)("div",{className:`survey-options ${Y("clinicalStatus")?"validation-error-radio":""}`,children:[(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"clinicalStatus",value:"0",checked:"0"===$,onChange:e=>I(e.target.value)}),"0"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"clinicalStatus",value:"1",checked:"1"===$,onChange:e=>I(e.target.value)}),"1"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"clinicalStatus",value:"2",checked:"2"===$,onChange:e=>I(e.target.value)}),"2"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"clinicalStatus",value:"3",checked:"3"===$,onChange:e=>I(e.target.value)}),"3"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"clinicalStatus",value:"4",checked:"4"===$,onChange:e=>I(e.target.value)}),"4"]})]})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-field full-width",children:[(0,i.jsx)("label",{className:`field-label required ${Y("responsiveness")?"validation-error-label":""}`,children:"Responsiveness"}),(0,i.jsxs)("div",{className:`survey-options ${Y("responsiveness")?"validation-error-radio":""}`,children:[(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"responsiveness",value:"Alert",checked:"Alert"===M,onChange:e=>D(e.target.value)}),"Alert"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"responsiveness",value:"Voice",checked:"Voice"===M,onChange:e=>D(e.target.value)}),"Voice"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"responsiveness",value:"Pain",checked:"Pain"===M,onChange:e=>D(e.target.value)}),"Pain"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"responsiveness",value:"Unresponsive",checked:"Unresponsive"===M,onChange:e=>D(e.target.value)}),"Unresponsive"]})]})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-field full-width",children:[(0,i.jsx)("label",{className:`field-label required ${Y("airway")?"validation-error-label":""}`,children:"Airway"}),(0,i.jsxs)("div",{className:`survey-options ${Y("airway")?"validation-error-radio":""}`,children:[(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"airway",value:"Patent (Clear)",checked:"Patent (Clear)"===L,onChange:e=>O(e.target.value)}),"Patent (Clear)"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"airway",value:"Partially obstructed",checked:"Partially obstructed"===L,onChange:e=>O(e.target.value)}),"Partially obstructed"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"airway",value:"Obstructed",checked:"Obstructed"===L,onChange:e=>O(e.target.value)}),"Obstructed"]})]})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-field full-width",children:[(0,i.jsx)("label",{className:`field-label required ${Y("breathing")?"validation-error-label":""}`,children:"Breathing"}),(0,i.jsxs)("div",{className:`survey-options ${Y("breathing")?"validation-error-radio":""}`,children:[(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"breathing",value:"Effective",checked:"Effective"===B,onChange:e=>U(e.target.value)}),"Effective"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"breathing",value:"Ineffective",checked:"Ineffective"===B,onChange:e=>U(e.target.value)}),"Ineffective"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"breathing",value:"Absent",checked:"Absent"===B,onChange:e=>U(e.target.value)}),"Absent"]})]})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-field full-width",children:[(0,i.jsx)("label",{className:`field-label required ${Y("circulation")?"validation-error-label":""}`,children:"Circulation"}),(0,i.jsxs)("div",{className:`survey-options ${Y("circulation")?"validation-error-radio":""}`,children:[(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"circulation",value:"Normal",checked:"Normal"===z,onChange:e=>H(e.target.value)}),"Normal"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"circulation",value:"Compromised",checked:"Compromised"===z,onChange:e=>H(e.target.value)}),"Compromised"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"circulation",value:"Absent",checked:"Absent"===z,onChange:e=>H(e.target.value)}),"Absent"]})]})]})}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-field full-width",children:[(0,i.jsx)("label",{className:`field-label required ${Y("bloodLoss")?"validation-error-label":""}`,children:"Blood Loss"}),(0,i.jsxs)("div",{className:`survey-options ${Y("bloodLoss")?"validation-error-radio":""}`,children:[(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"bloodLoss",value:"Nil",checked:"Nil"===q,onChange:e=>G(e.target.value)}),"Nil"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"bloodLoss",value:"Not life threatening",checked:"Not life threatening"===q,onChange:e=>G(e.target.value)}),"Not life threatening"]}),(0,i.jsxs)("label",{className:"survey-option",children:[(0,i.jsx)("input",{type:"radio",name:"bloodLoss",value:"Life threatening",checked:"Life threatening"===q,onChange:e=>G(e.target.value)}),"Life threatening"]})]})]})})]})})]}),(0,i.jsxs)("div",{className:"eprf-footer incident-footer",children:[(0,i.jsxs)("div",{className:"footer-left",children:[(0,i.jsx)("button",{className:"footer-btn internet",children:"Internet"}),(0,i.jsx)("button",{className:"footer-btn server",children:"Server"}),(0,i.jsx)("button",{className:"footer-btn green",onClick:()=>{g(!0)},children:"Add Patient"}),(0,i.jsx)("button",{className:"footer-btn green",onClick:()=>{k(!0)},children:"Transfer ePRF"}),(0,i.jsx)("button",{className:"footer-btn green",onClick:()=>{let e=(0,r.Zl)(m);v(e.incompleteSections),e.isValid?j(!0):(A(e.fieldErrors),C(!0))},children:"Submit ePRF"})]}),(0,i.jsxs)("div",{className:"footer-right",children:[(0,i.jsx)("button",{className:"footer-btn orange",onClick:()=>{X("patient-info")},children:"< Previous"}),(0,i.jsx)("button",{className:"footer-btn orange",onClick:()=>{X("vital-obs")},children:"Next >"})]})]}),(0,i.jsx)(l.ZP,{isOpen:y,onClose:()=>g(!1),onConfirm:V,title:"Add New Patient",message:`Are you sure you want to add a new patient?

This will:
• Save the current Patient ${b} data
• Create a new patient record (Patient ${String.fromCharCode(b.charCodeAt(0)+1)})
• Clear the form for the new patient`,confirmText:"Yes, Add Patient",cancelText:"Cancel",type:"info",isLoading:R}),(0,i.jsx)(l.ZP,{isOpen:x,onClose:()=>j(!1),onConfirm:W,title:"Submit ePRF",message:`Are you sure you want to submit this ePRF?

This will:
• Generate a PDF report for Patient ${b}
• Save the record to the database
• Download the PDF to your device`,confirmText:"Yes, Submit ePRF",cancelText:"Cancel",type:"success",isLoading:R}),(0,i.jsx)(l.Yj,{isOpen:N,onClose:()=>C(!1),errors:T,getSectionDisplayName:r.aY}),(0,i.jsx)(l.i_,{isOpen:S,onClose:()=>P(!1),title:E.title,message:E.message}),(0,i.jsx)(c.Z,{isOpen:w,onClose:()=>k(!1),onTransferComplete:e=>{let{transferAllPatients:a}=s(2392);a(m,e.discordId,e.callsign),k(!1),F({title:"ePRF Transferred",message:`The ePRF has been transferred to ${e.callsign}. You will be redirected to the dashboard.`}),P(!0),setTimeout(()=>{Z()},2e3)},incidentId:m,patientLetter:b})]})}},4253:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>n,runtime:()=>t});var i=s(8264);let t=(0,i.D)(String.raw`C:\Users\Toby\Downloads\node-v24.11.1-win-x64\app123\app\primary-survey\page.tsx#runtime`),n=(0,i.D)(String.raw`C:\Users\Toby\Downloads\node-v24.11.1-win-x64\app123\app\primary-survey\page.tsx#default`)}},e=>{var a=a=>e(e.s=a);e.O(0,[378,716,337,625,974],()=>a(9151));var s=e.O();(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/primary-survey/page"]=s}]);
//# sourceMappingURL=page.js.map